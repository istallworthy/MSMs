[{"path":"https://istallworthy.github.io/devMSMs/articles/Specify_Core_Inputs.html","id":"home-directory","dir":"Articles","previous_headings":"","what":"Home Directory","title":"Specify Core Inputs","text":"Users required specify home directory, quotations, path designated folder output package, plan save intermediary final outputs package (default) setting ‘save.’ = TRUE functions. sub directories created within home directory devMSMs functions automatically ‘save.’ = TRUE.","code":"#set seed for reproducibility  set.seed(1234)  #required if you wish to use save.out = TRUE in the functions home_dir <- NA home_dir <- '/Users/isabella/Library/CloudStorage/Box-Box/BSL General/MSMs/testing/isa' #note: no / after"},{"path":"https://istallworthy.github.io/devMSMs/articles/Specify_Core_Inputs.html","id":"exposure-variable","dir":"Articles","previous_headings":"","what":"Exposure Variable","title":"Specify Core Inputs","text":"Users required specify exposure variable input functions devMSMs. user must specify exposure, variable name exposure quotations, without time information appended (e.g., “variable”). Note dataset, exposure variables wide format labeled “.time” suffix (e.g., “variable.t”).","code":"#required exposure <- \"ESETA1\""},{"path":"https://istallworthy.github.io/devMSMs/articles/Specify_Core_Inputs.html","id":"exposure-time-points","dir":"Articles","previous_headings":"","what":"Exposure Time Points","title":"Specify Core Inputs","text":"Next, users required provide information time points exposure assessed exposure_time_pts, required input createFormulas(), assessBalance(), fitModel(), compareHistories() devMSMs functions (see Workflows vignettes). user two options specifying exposure time points select option best serves theory regarding developmental timing practical constraints data modeling process. First, may specify time points exposure measured data. means balancing formulas created (Steps 1a, 2a, 3b Workflow vignettes) IPTW weights created (Steps 2b, 3c Workflow vignettes) assessed (Steps 2c, 3a, 4 Workflow vignettes) time points. case, epochs specified, time points included exposure main effects final substantive model history comparison (Step 5 Workflow vignettes). Second, may specify subset theoretically important time points exposure measured data. means balancing formulas created IPTW weights created assessed time points. , epochs specified, subsetted time points included exposure main effects final substantive models. Importantly, exposure variables time points exposure assessed included time-varying confounders balancing purposes . specification exposure epochs kept consistent throughout use devMSMs package. user intends specify exposure epochs (Preliminary Steps Vignette Step P3), user include time points encompassed epochs exposure_time_pts. user intend specify exposure epochs (Preliminary Steps Vignette Step P3), exposure_time_pts constitute exposure main effects final outcome model form basis histories used history comparison. case, user specifies 4 exposure time points, required conduct subset history comparisons (Step 5b Workflows vignettes), given base code (see hypotheses() function marginaleffects package) accommodate pairwise history comparisons 5 time points. elected create epochs infancy (6 15 months), toddlerhood (24 35 months), early childhood (58 months). Thus, input 6, 15, 24, 35, 58 exposure_time_pts.","code":"#required exposure_time_pts <- c(6, 15, 24, 35, 58)"},{"path":"https://istallworthy.github.io/devMSMs/articles/Specify_Core_Inputs.html","id":"outcome-variable","dir":"Articles","previous_headings":"","what":"Outcome Variable","title":"Specify Core Inputs","text":"Users also required specify outcome variable designated final time point, required input functions devMSMs package. final time point equal (, ideally greater ) final exposure time point. Note instances outcome variable measured prior time points included time-varying confounders balancing purposes. Specifying outcome, variable name outcome time point collected appended following period (e.g., “variable.t”) corresponding variable name wide data, required package. Outcome variables dataset wide format labeled “.time” suffix.","code":"#required outcome <- \"StrDif_Tot.58\""},{"path":"https://istallworthy.github.io/devMSMs/articles/Specify_Core_Inputs.html","id":"confounders","dir":"Articles","previous_headings":"","what":"Confounders","title":"Specify Core Inputs","text":"###Time invariant. Specifying least one time invariant confounder required use package required input createFormulas() function. Time invariant confounders include core demographic birth characteristics (e.g., sex, racial group membership, birth complications) might cause either exposure outcome, either directly proxy, suggested theory /evidenced strong associations existing literature. , user can also include interaction terms time invariant variables (e.g., “variable:variable”) inclusion balancing formula. Keep mind interactions include factor variables decomposed interactions factor level. ti_confounders, list, quotations, provide names confounders (e.g., “variable”, “variable:variable”) dataset time invariant. ###Time-varying. Specifying least time-varying exposures time-varying confounders required use package required input createFormulas() devMSMs function (see Workflows vignettes). tv_confounders list, quotations, provide names variables wide format (e.g., “variable.t”) dataset time-varying (including time-varying confounders, exposures, outcomes). include time-varying exposure variables outcome variables present dataset (e.g., “variable.t”). Note time-varying confounders also include confounders measured repeatedly time points (e.g., InRatioCor) collected one several specific time points, missing time points, time invariant. , user can also include interaction terms time-varying variables (e.g., “variable.t:variable.t”) time invariant time-varying variables (e.g., “variable.t:variable”) inclusion balancing formula. Keep mind interactions include factor variables decomposed interactions factor level. ##References Arel-Bundock, Vincent. 2023. marginaleffects: Predictions, Comparisons, Slopes, Marginal Means, Hypothesis Tests. https://CRAN.R-project.org/package=marginaleffects.","code":"#required; list in wide format ti_confounders <- c(\"state\", \"BioDadInHH2\", \"PmAge2\", \"PmBlac2\", \"TcBlac2\", \"PmMrSt2\", \"PmEd2\", \"KFASTScr\",                     \"RMomAgeU\", \"RHealth\", \"HomeOwnd\", \"SWghtLB\", \"SurpPreg\", \"SmokTotl\", \"DrnkFreq\",                     \"peri_health\", \"caregiv_health\", \"gov_assist\" ) #required  tv_confounders <- c(\"SAAmylase.6\",\"SAAmylase.15\", \"SAAmylase.24\",                     \"MDI.6\", \"MDI.15\",                                                                 \"RHasSO.6\", \"RHasSO.15\", \"RHasSO.24\",\"RHasSO.35\", \"RHasSO.58\",                                                              \"WndNbrhood.6\",\"WndNbrhood.24\", \"WndNbrhood.35\", \"WndNbrhood.58\",                                                            \"IBRAttn.6\", \"IBRAttn.15\", \"IBRAttn.24\",                                                        \"B18Raw.6\", \"B18Raw.15\", \"B18Raw.24\", \"B18Raw.58\",                                                                \"HOMEETA1.6\", \"HOMEETA1.15\", \"HOMEETA1.24\", \"HOMEETA1.35\", \"HOMEETA1.58\",                                                    \"InRatioCor.6\", \"InRatioCor.15\", \"InRatioCor.24\", \"InRatioCor.35\", \"InRatioCor.58\",                                              \"ESETA1.6\", \"ESETA1.15\", \"ESETA1.24\", \"ESETA1.35\", \"ESETA1.58\",  #exposure variables required                                    \"CORTB.6\", \"CORTB.15\", \"CORTB.24\",                                                                                       \"EARS_TJo.24\", \"EARS_TJo.35\",                                                             \"LESMnPos.24\", \"LESMnPos.35\",                                                       \"LESMnNeg.24\", \"LESMnNeg.35\",                            \"StrDif_Tot.35\", \"StrDif_Tot.58\",                         \"fscore.35\", \"fscore.58\" )"},{"path":"https://istallworthy.github.io/devMSMs/articles/demodevMSMsWorkflow.html","id":"data","dir":"Articles","previous_headings":"","what":"Data","title":"Demo of devMSMs Workflow","text":"devMSMs designed use longitudinal data. , provide example dataset simulated developmental data. Build vignette done:","code":"# devtools::build_vignettes()  #view # browseURL(\"doc/demodevMSMsWorkflow.html\")  # devtools::check()  # usethis::use_package(\"dplyr\", \"Suggests\")"},{"path":"https://istallworthy.github.io/devMSMs/authors.html","id":null,"dir":"","previous_headings":"","what":"Authors","title":"Authors and Citation","text":"Isabella Stallworthy. Author, maintainer. Noah Greifer. Author, contributor. Meriah DeJoseph. Author. Emily Padrutt. Author. Daniel Berry. Author.","code":""},{"path":"https://istallworthy.github.io/devMSMs/authors.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Authors and Citation","text":"Stallworthy , Greifer N, DeJoseph M, Padrutt E, Berry D (2023). devMSMs: Tools Conducting Marginal Structural Models Developmental Data. R package version 0.0.0.9000, https://github.com/istallworthy/devMSMs, https://istallworthy.github.io/devMSMs/.","code":"@Manual{,   title = {devMSMs: Tools for Conducting Marginal Structural Models with Developmental Data},   author = {Isabella Stallworthy and Noah Greifer and Meriah DeJoseph and Emily Padrutt and Daniel Berry},   year = {2023},   note = {R package version 0.0.0.9000, https://github.com/istallworthy/devMSMs},   url = {https://istallworthy.github.io/devMSMs/}, }"},{"path":"https://istallworthy.github.io/devMSMs/index.html","id":"devmsms","dir":"","previous_headings":"","what":"An R package for conducting marginal structural models (MSMs) with longitudinal data","title":"An R package for conducting marginal structural models (MSMs) with longitudinal data","text":"devMSMs R package implementing marginal structural models (MSMs) longitudinal data answer causal questions developmental science. package accompanying tutorial paper, Investigating Causal Questions Human Development using Marginal Structural Models: Tutorial Introduction devMSMs Package R, forthcoming. suggest reading paper brief conceptual introdcution MSMs prior implementing package. provided additional resources page -depth material method application. Core features package include: - step--step user guidance users new MSM technique R programming - flexible functions implementing IPTW weighting outcome modeling answer substantive causal questions dose timing","code":""},{"path":"https://istallworthy.github.io/devMSMs/index.html","id":"overview","dir":"","previous_headings":"","what":"Overview","title":"An R package for conducting marginal structural models (MSMs) with longitudinal data","text":"package contains 6 core functions conducting confounder adjustment outcome modeling longitudinal data time-varying exposures.","code":""},{"path":"https://istallworthy.github.io/devMSMs/index.html","id":"installation","dir":"","previous_headings":"","what":"Installation","title":"An R package for conducting marginal structural models (MSMs) with longitudinal data","text":"devMSMs can installed R Studio Github using devtools package:library(devtools)install_github(\"istallworthy/devMSMs\")library(devMSMs) helper functions can installed accompanying devMSMsHelpers repo:install_github(\"istallworthy/devMSMsHelperslibrary(devMSMsHelpers)","code":""},{"path":[]},{"path":"https://istallworthy.github.io/devMSMs/index.html","id":"additional-resources","dir":"","previous_headings":"","what":"Additional Resources","title":"An R package for conducting marginal structural models (MSMs) with longitudinal data","text":"Fong, C., Hazlett, C., & Imai, K. (2018). Covariate balancing propensity score continuous treatment: Application efficacy political advertisements. Annals Applied Statistics, 12(1), 156–177. https://doi.org/10.1214/17-AOAS1101 Hirano, K., & Imbens, G. W. (2004). Propensity Score Continuous Treatments. Applied Bayesian Modeling Causal Inference Incomplete-Data Perspectives (pp. 73–84). John Wiley & Sons, Ltd. https://doi.org/10.1002/0470090456.ch7 Robins, J. M., Hernán, M. Á., & Brumback, B. (2000). Marginal Structural Models Causal Inference Epidemiology. Epidemiology, 11(5), 550–560. Thoemmes, F., & Ong, . D. (2016). Primer Inverse Probability Treatment Weighting Marginal Structural Models. https://doi.org/10.1177/2167696815621645","code":""},{"path":"https://istallworthy.github.io/devMSMs/reference/add_dose.html","id":null,"dir":"Reference","previous_headings":"","what":"Add dose tally to table — add_dose","title":"Add dose tally to table — add_dose","text":"Add dose tally table","code":""},{"path":"https://istallworthy.github.io/devMSMs/reference/add_dose.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Add dose tally to table — add_dose","text":"","code":"add_dose(p, dose_level)"},{"path":"https://istallworthy.github.io/devMSMs/reference/add_dose.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Add dose tally to table — add_dose","text":"p table output marginaleffects::avg_predictions() hypotheses() dose_level \"l\" \"h\" indicating whether low high doses tallied tables plots","code":""},{"path":"https://istallworthy.github.io/devMSMs/reference/add_dose.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Add dose tally to table — add_dose","text":"table dose level tally","code":""},{"path":"https://istallworthy.github.io/devMSMs/reference/add_histories.html","id":null,"dir":"Reference","previous_headings":"","what":"Add history labels to table — add_histories","title":"Add history labels to table — add_histories","text":"Add history labels table","code":""},{"path":"https://istallworthy.github.io/devMSMs/reference/add_histories.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Add history labels to table — add_histories","text":"","code":"add_histories(p, d)"},{"path":"https://istallworthy.github.io/devMSMs/reference/add_histories.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Add history labels to table — add_histories","text":"p table output marginaleffects::avg_predictions() hypotheses() d data frame high low values per exposure main effect","code":""},{"path":"https://istallworthy.github.io/devMSMs/reference/add_histories.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Add history labels to table — add_histories","text":"table histories labeled","code":""},{"path":"https://istallworthy.github.io/devMSMs/reference/assessBalance.html","id":null,"dir":"Reference","previous_headings":"","what":"Assesses confounder balancing — assessBalance","title":"Assesses confounder balancing — assessBalance","text":"Draws functions cobalt package quantify relations exposure confounders exposure time point according guidelines Jackson, 2016 assess balance time-varying exposures.","code":""},{"path":"https://istallworthy.github.io/devMSMs/reference/assessBalance.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Assesses confounder balancing — assessBalance","text":"","code":"assessBalance(   data,   exposure,   exposure_time_pts,   outcome,   type,   formulas,   weights = NULL,   balance_thresh = NULL,   imp_conf = NULL,   home_dir = NULL,   verbose = TRUE,   save.out = TRUE )"},{"path":"https://istallworthy.github.io/devMSMs/reference/assessBalance.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Assesses confounder balancing — assessBalance","text":"data data wide format : data frame, list imputed data frames, mids object exposure name exposure variable exposure_time_pts list integers weights created/assessed correspond time points exposure wass measured outcome name outcome variable \".timepoint\" suffix type type balance assessment; 'prebalance' 'weighted' formulas list balancing formulas time point output createFormulas() weights list IPTW weights output createWeights, required type 'weighted' balance_thresh (optional) one two numbers 0 1 indicating single balancing threshold thresholds less important confounders, respectively (default = 0.1) imp_conf (optional) list variable names reflecting important confounders, required two balance thresholds supplied home_dir (optional) path home directory (required save.= TRUE) verbose (optiona) TRUE FALSE indicator user output (default TRUE) save.(optional) TRUE FALSE indicator save output intermediary output locally (default TRUE)","code":""},{"path":"https://istallworthy.github.io/devMSMs/reference/assessBalance.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Assesses confounder balancing — assessBalance","text":"data frame balance statistics","code":""},{"path":[]},{"path":"https://istallworthy.github.io/devMSMs/reference/assessBalance.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Assesses confounder balancing — assessBalance","text":"","code":"test <- data.frame(ID = 1:50,                    A.1 = rnorm(n = 50),                    A.2 = rnorm(n = 50),                    A.3 = rnorm(n = 50),                    B.1 = rnorm(n = 50),                    B.2 = rnorm(n = 50),                    B.3 = rnorm(n = 50),                    C = rnorm(n = 50),                    D.3 = rnorm(n = 50)) test[, c(\"A.1\", \"A.2\", \"A.3\")] <- lapply(test[, c(\"A.1\", \"A.2\", \"A.3\")], as.numeric)  f <- createFormulas(exposure = \"A\",                     exposure_time_pts = c(1, 2, 3),                     outcome = \"D.3\",                     tv_confounders = c(\"A.1\", \"A.2\", \"A.3\", \"B.1\", \"B.2\", \"B.3\"),                     ti_confounders = \"C\",                     type = \"short\",                     save.out = FALSE) #> USER ALERT: Please manually inspect the short balancing formula below that includes time-varying confounders at t-1 only: #> The short formula for A - D.3 at A time point 1 is:  #> A.1 ~ C #> <environment: 0x563d1554cab8> #>  #> USER ALERT: Please manually inspect the short balancing formula below that includes time-varying confounders at t-1 only: #> The short formula for A - D.3 at A time point 2 is:  #> A.2 ~ A.1 + B.1 + C #> <environment: 0x563d1554cab8> #>  #> USER ALERT: Please manually inspect the short balancing formula below that includes time-varying confounders at t-1 only: #> The short formula for A - D.3 at A time point 3 is:  #> A.3 ~ A.2 + B.2 + C #> <environment: 0x563d1554cab8> #>   #Prebalance b <- assessBalance(data = test,                    exposure = \"A\",                    exposure_time_pts = c(1, 2, 3),                    outcome = \"D.3\",                    type = \"prebalance\",                    formulas = f,                    save.out = FALSE) #> USER ALERT: The following statistics display covariate imbalance at each exposure time point prior to weighting, using short formulas. #>     #> As shown below, 3 out of 7 (43%) covariates across time points, corresponding to 2 out of 2 domains, remain imbalanced with a remaining median absolute value correlation/std mean difference of 0.2 (range= -0.24-0.2): #>  #> Table: Imbalanced covariates using no weights and short formulas #>  #> | exp_time| balanced_n| imbalanced_n|  n| #> |--------:|----------:|------------:|--:| #> |        1|          1|            0|  1| #> |        2|          1|            2|  3| #> |        3|          2|            1|  3| #>  #>  #> USER ALERT: For exposure A using the short formulas and no weights : #> The median absolute value relation between exposure and confounder is 0.1 (range = -0.24 -0.2).  #> As shown below, the following 3 covariates across time points out of 7 total (42.86%) spanning 2 domains out of 3 (66.67%) are imbalanced with a remaining median absolute value correlation/std mean difference in relation to A of 0.2 (range=-0.24-0.2) : #>  #>  #> Table: Imbalanced Covariates #>  #> |   |exposure | exp_time| covar_time|covariate |    avg_bal| bal_thresh| balanced| #> |:--|:--------|--------:|----------:|:---------|----------:|----------:|--------:| #> |3  |A        |        2|          1|B.1       |  0.1893178|        0.1|        0| #> |4  |A        |        2|          0|C         |  0.2043674|        0.1|        0| #> |7  |A        |        3|          0|C         | -0.2354980|        0.1|        0| #>  b <- assessBalance(data = test,                    exposure = \"A\",                    exposure_time_pts = c(1, 2, 3),                    outcome = \"D.3\",                    type = \"prebalance\",                    formulas = f,                    balance_thresh = 0.2,                    save.out = FALSE) #> USER ALERT: The following statistics display covariate imbalance at each exposure time point prior to weighting, using short formulas. #>     #> As shown below, 2 out of 7 (29%) covariates across time points, corresponding to 1 out of 2 domains, remain imbalanced with a remaining median absolute value correlation/std mean difference of 0.22 (range= -0.24-0.2): #>  #> Table: Imbalanced covariates using no weights and short formulas #>  #> | exp_time| balanced_n| imbalanced_n|  n| #> |--------:|----------:|------------:|--:| #> |        1|          1|            0|  1| #> |        2|          2|            1|  3| #> |        3|          2|            1|  3| #>  #>  #> USER ALERT: For exposure A using the short formulas and no weights : #> The median absolute value relation between exposure and confounder is 0.1 (range = -0.24 -0.2).  #> As shown below, the following 2 covariates across time points out of 7 total (28.57%) spanning 1 domains out of 3 (33.33%) are imbalanced with a remaining median absolute value correlation/std mean difference in relation to A of 0.22 (range=-0.24-0.2) : #>  #>  #> Table: Imbalanced Covariates #>  #> |   |exposure | exp_time| covar_time|covariate |    avg_bal| bal_thresh| balanced| #> |:--|:--------|--------:|----------:|:---------|----------:|----------:|--------:| #> |4  |A        |        2|          0|C         |  0.2043674|        0.2|        0| #> |7  |A        |        3|          0|C         | -0.2354980|        0.2|        0| #>  b <- assessBalance(data = test,                    exposure = \"A\",                    exposure_time_pts = c(1, 2, 3),                    outcome = \"D.3\",                    type = \"prebalance\",                    formulas = f,                    balance_thresh = c(0.1, 0.2),                    imp_conf = \"B.1\",                    save.out = FALSE) #> USER ALERT: The following statistics display covariate imbalance at each exposure time point prior to weighting, using short formulas. #>     #> As shown below, 3 out of 7 (43%) covariates across time points, corresponding to 2 out of 2 domains, remain imbalanced with a remaining median absolute value correlation/std mean difference of 0.2 (range= -0.24-0.2): #>  #> Table: Imbalanced covariates using no weights and short formulas #>  #> | exp_time| balanced_n| imbalanced_n|  n| #> |--------:|----------:|------------:|--:| #> |        1|          1|            0|  1| #> |        2|          1|            2|  3| #> |        3|          2|            1|  3| #>  #>  #> USER ALERT: For exposure A using the short formulas and no weights : #> The median absolute value relation between exposure and confounder is 0.1 (range = -0.24 -0.2).  #> As shown below, the following 3 covariates across time points out of 7 total (42.86%) spanning 2 domains out of 3 (66.67%) are imbalanced with a remaining median absolute value correlation/std mean difference in relation to A of 0.2 (range=-0.24-0.2) : #>  #>  #> Table: Imbalanced Covariates #>  #> |   |exposure | exp_time| covar_time|covariate |    avg_bal| bal_thresh| balanced| #> |:--|:--------|--------:|----------:|:---------|----------:|----------:|--------:| #> |3  |A        |        2|          1|B.1       |  0.1893178|        0.1|        0| #> |4  |A        |        2|          0|C         |  0.2043674|        0.2|        0| #> |7  |A        |        3|          0|C         | -0.2354980|        0.2|        0| #>  f <- createFormulas(exposure = \"A\",                     exposure_time_pts = c(1, 2, 3),                     outcome = \"D.3\",                     tv_confounders = c(\"A.1\", \"A.2\", \"A.3\", \"B.1\", \"B.2\", \"B.3\", \"A.1:B.1\"),                     ti_confounders = \"C\",                     type = \"short\",                     save.out = FALSE) #> USER ALERT: Please manually inspect the short balancing formula below that includes time-varying confounders at t-1 only: #> The short formula for A - D.3 at A time point 1 is:  #> A.1 ~ C #> <environment: 0x563d158ad940> #>  #> USER ALERT: Please manually inspect the short balancing formula below that includes time-varying confounders at t-1 only: #> The short formula for A - D.3 at A time point 2 is:  #> A.2 ~ A.1 + A.1:B.1 + B.1 + C #> <environment: 0x563d158ad940> #>  #> USER ALERT: Please manually inspect the short balancing formula below that includes time-varying confounders at t-1 only: #> The short formula for A - D.3 at A time point 3 is:  #> A.3 ~ A.2 + B.2 + C #> <environment: 0x563d158ad940> #>  b <- assessBalance(data = test,                    exposure = \"A\",                    exposure_time_pts = c(1, 2, 3),                    outcome = \"D.3\",                    type = \"prebalance\",                    formulas = f,                    save.out = FALSE) #> USER ALERT: The following statistics display covariate imbalance at each exposure time point prior to weighting, using short formulas. #>     #> As shown below, 4 out of 8 (50%) covariates across time points, corresponding to 3 out of 3 domains, remain imbalanced with a remaining median absolute value correlation/std mean difference of 0.22 (range= -0.27-0.2): #>  #> Table: Imbalanced covariates using no weights and short formulas #>  #> | exp_time| balanced_n| imbalanced_n|  n| #> |--------:|----------:|------------:|--:| #> |        1|          1|            0|  1| #> |        2|          1|            3|  4| #> |        3|          2|            1|  3| #>  #>  #> USER ALERT: For exposure A using the short formulas and no weights : #> The median absolute value relation between exposure and confounder is 0.14 (range = -0.27 -0.2).  #> As shown below, the following 4 covariates across time points out of 8 total (50%) spanning 3 domains out of 3 (100%) are imbalanced with a remaining median absolute value correlation/std mean difference in relation to A of 0.22 (range=-0.27-0.2) : #>  #>  #> Table: Imbalanced Covariates #>  #> |   |exposure | exp_time| covar_time|covariate |    avg_bal| bal_thresh| balanced| #> |:--|:--------|--------:|----------:|:---------|----------:|----------:|--------:| #> |3  |A        |        2|          1|A.1:B.1   | -0.2656160|        0.1|        0| #> |4  |A        |        2|          1|B.1       |  0.1893178|        0.1|        0| #> |5  |A        |        2|          0|C         |  0.2043674|        0.1|        0| #> |8  |A        |        3|          0|C         | -0.2354980|        0.1|        0| #>   # Weighted w <- createWeights(data = test,                    exposure = \"A\",                    outcome = \"D.3\",                    formulas = f,                    save.out = FALSE) #> For the cbps weighting method, the median weight value is 0.98 (SD = 2.47; range = 0.2-16).  #>    b <- assessBalance(data = test,                    exposure = \"A\",                    exposure_time_pts = c(1, 2, 3),                    outcome = \"D.3\",                    type = \"weighted\",                    weights = w,                    formulas = f,                    save.out = FALSE) #> USER ALERT: The following statistics display covariate imbalance at each exposure time point following IPTW weighting, using short formulas. #>     #> As shown below, 6 out of 8 (75%) covariates across time points, corresponding to 3 out of 3 domains, remain imbalanced with a remaining median absolute value correlation/std mean difference of 0.15 (range= -0.2-0.19): #>  #> Table: Imbalanced covariates using cbps and short formulas #>  #> | exp_time| balanced_n| imbalanced_n|  n| #> |--------:|----------:|------------:|--:| #> |        1|          0|            1|  1| #> |        2|          2|            2|  4| #> |        3|          0|            3|  3| #>  #>  #> USER ALERT: For exposure A using the short formulas and cbps : #> The median absolute value relation between exposure and confounder is 0.14 (range = -0.2 -0.19).  #> As shown below, the following 6 covariates across time points out of 8 total (75%) spanning 3 domains out of 3 (100%) are imbalanced with a remaining median absolute value correlation/std mean difference in relation to A of 0.15 (range=-0.2-0.19) : #>  #>  #> Table: Imbalanced Covariates #>  #> |   |exposure | exp_time| covar_time|covariate |    avg_bal| bal_thresh| balanced| #> |:--|:--------|--------:|----------:|:---------|----------:|----------:|--------:| #> |1  |A        |        1|          0|C         | -0.1995888|        0.1|        0| #> |3  |A        |        2|          1|A.1:B.1   |  0.1497721|        0.1|        0| #> |5  |A        |        2|          0|C         | -0.1383044|        0.1|        0| #> |6  |A        |        3|          2|A.2       | -0.1206741|        0.1|        0| #> |7  |A        |        3|          2|B.2       | -0.1530434|        0.1|        0| #> |8  |A        |        3|          0|C         |  0.1883296|        0.1|        0| #>  b <- assessBalance(data = test,                    exposure = \"A\",                    exposure_time_pts = c(1, 2, 3),                    outcome = \"D.3\",                    type = \"weighted\",                    weights = w,                    formulas = f,                    balance_thresh = 0.2,                    save.out = FALSE) #> USER ALERT: The following statistics display covariate imbalance at each exposure time point following IPTW weighting, using short formulas. #>     #> No covariates remain imbalanced using cbps and short formulas.  #>  #>  #> USER ALERT: For exposure A using the short formulas and cbps : #> The median absolute value relation between exposure and confounder is 0.14 (range = -0.2 -0.19).  #> There are no imbalanced covariates.  #> There are no imbalanced covariates. b <- assessBalance(data = test,                    exposure = \"A\",                    exposure_time_pts = c(1, 2, 3),                    outcome = \"D.3\",                    type = \"weighted\",                    weights = w,                    formulas = f,                    balance_thresh = c(0.1, 0.2),                    imp_conf = \"B.1\",                    save.out = FALSE) #> USER ALERT: The following statistics display covariate imbalance at each exposure time point following IPTW weighting, using short formulas. #>     #> No covariates remain imbalanced using cbps and short formulas.  #>  #>  #> USER ALERT: For exposure A using the short formulas and cbps : #> The median absolute value relation between exposure and confounder is 0.14 (range = -0.2 -0.19).  #> There are no imbalanced covariates.  #> There are no imbalanced covariates."},{"path":"https://istallworthy.github.io/devMSMs/reference/calcBalStats.html","id":null,"dir":"Reference","previous_headings":"","what":"Calculate balance stats based on Jackson paper — calcBalStats","title":"Calculate balance stats based on Jackson paper — calcBalStats","text":"Calculate weighted unweighted standardized balance statistics given exposure time point, using relevant confounders. Draws Jackson, 2016 approaches assessing balance time-varying exposures weighting statistics based sample distribution exposure histories.","code":""},{"path":"https://istallworthy.github.io/devMSMs/reference/calcBalStats.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Calculate balance stats based on Jackson paper — calcBalStats","text":"","code":"calcBalStats(   data,   formulas,   exposure,   exposure_time_pts,   outcome,   balance_thresh,   k = 0,   weights = NULL,   imp_conf = NULL,   home_dir = NULL,   verbose = TRUE,   save.out = TRUE )"},{"path":"https://istallworthy.github.io/devMSMs/reference/calcBalStats.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Calculate balance stats based on Jackson paper — calcBalStats","text":"data data wide format : data frame, path folder imputed .csv files, mids object formulas list balancing formulas time point output createFormulas() exposure name exposure variable exposure_time_pts list integers weights created/assessed correspond time points exposure wass measured outcome name outcome variable \".timepoint\" suffix balance_thresh (optional) one two numbers 0 1 indicating single balancingn threshold thresholds less important confounders, respectively k (optional) imputation number weights (optional) list IPTW weights output createWeights imp_conf (optional) list variable names reflecting important confounders (required two balance thresholds provided) home_dir (optional) path home directory (required save.= TRUE) verbose (optional) TRUE FALSE indicator user output (default TRUE) save.(optional) TRUE FALSE indicator save output intermediary output locally","code":""},{"path":"https://istallworthy.github.io/devMSMs/reference/calcBalStats.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Calculate balance stats based on Jackson paper — calcBalStats","text":"data frame balance statistics","code":""},{"path":"https://istallworthy.github.io/devMSMs/reference/calcBalStats.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Calculate balance stats based on Jackson paper — calcBalStats","text":"","code":"test <- data.frame(ID = 1:50,                    A.1 = rnorm(n = 50),                    A.2 = rnorm(n = 50),                    A.3 = rnorm(n = 50),                    B.1 = rnorm(n = 50),                    B.2 = rnorm(n = 50),                    B.3 = rnorm(n = 50),                    C = rnorm(n = 50),                    D.3 = rnorm(n = 50)) test[, c(\"A.1\", \"A.2\", \"A.3\")] <- lapply(test[, c(\"A.1\", \"A.2\", \"A.3\")], as.numeric)  f <- createFormulas(exposure = \"A\",                     exposure_time_pts = c(1, 2, 3),                     outcome = \"D.3\",                     tv_confounders = c(\"A.1\", \"A.2\", \"A.3\", \"B.1\", \"B.2\", \"B.3\"),                     ti_confounders = \"C\",                     type = \"full\",                     save.out = FALSE) #> USER ALERT: Please manually inspect the full balancing formula below: #> The full formula for A - D.3 at A time point 1 is:  #> A.1 ~ C #> <environment: 0x563d10e7f2e8> #>  #> USER ALERT: Please manually inspect the full balancing formula below: #> The full formula for A - D.3 at A time point 2 is:  #> A.2 ~ A.1 + B.1 + C #> <environment: 0x563d10e7f2e8> #>  #> USER ALERT: Please manually inspect the full balancing formula below: #> The full formula for A - D.3 at A time point 3 is:  #> A.3 ~ A.1 + A.2 + B.1 + B.2 + C #> <environment: 0x563d10e7f2e8> #>   w <- createWeights(data = test,                    exposure = \"A\",                    outcome = \"D.3\",                    formulas = f,                    save.out = FALSE) #> For the cbps weighting method, the median weight value is 1.04 (SD = 0.88; range = 0.32-6).  #>    c <- calcBalStats(data = test,                   formulas = f,                   exposure = \"A\",                   exposure_time_pts = c(1, 2, 3),                   outcome = \"D.3\",                   balance_thresh = 0.1,                   save.out = FALSE)    #> As shown below, 4 out of 9 (44%) covariates across time points, corresponding to 3 out of 3 domains, remain imbalanced with a remaining median absolute value correlation/std mean difference of 0.14 (range= -0.13-0.17): #>  #> Table: Imbalanced covariates using no weights and full formulas #>  #> | exp_time| balanced_n| imbalanced_n|  n| #> |--------:|----------:|------------:|--:| #> |        1|          1|            0|  1| #> |        2|          1|            2|  3| #> |        3|          3|            2|  5| #>  #>  c <- calcBalStats(data = test,                   formulas = f,                   exposure = \"A\",                   exposure_time_pts = c(1, 2, 3),                   outcome = \"D.3\",                   balance_thresh = c(0.05, 0.1),                   imp_conf = \"B2\",                   save.out = FALSE)    #> As shown below, 4 out of 9 (44%) covariates across time points, corresponding to 3 out of 3 domains, remain imbalanced with a remaining median absolute value correlation/std mean difference of 0.14 (range= -0.13-0.17): #>  #> Table: Imbalanced covariates using no weights and full formulas #>  #> | exp_time| balanced_n| imbalanced_n|  n| #> |--------:|----------:|------------:|--:| #> |        1|          1|            0|  1| #> |        2|          1|            2|  3| #> |        3|          3|            2|  5| #>  #>  c <- calcBalStats(data = test,                   formulas = f,                   exposure = \"A\",                   exposure_time_pts = c(1, 2, 3),                   outcome = \"D.3\",                   balance_thresh = 0.1,                   weights = w[[1]],                   save.out = FALSE)    #> As shown below, 2 out of 9 (22%) covariates across time points, corresponding to 2 out of 3 domains, remain imbalanced with a remaining median absolute value correlation/std mean difference of 0.12 (range= 0.12-0.13): #>  #> Table: Imbalanced covariates using cbps and full formulas #>  #> | exp_time| balanced_n| imbalanced_n|  n| #> |--------:|----------:|------------:|--:| #> |        1|          1|            0|  1| #> |        2|          1|            2|  3| #> |        3|          5|            0|  5| #>  #>"},{"path":"https://istallworthy.github.io/devMSMs/reference/compareHistories.html","id":null,"dir":"Reference","previous_headings":"","what":"Estimate, compare, and visualize exposure histories — compareHistories","title":"Estimate, compare, and visualize exposure histories — compareHistories","text":"Takes fitted model output created predicted values user-specified histories (pooling imputed data), conducting contrast comparisons (pooling imputed data), correcting multiple comparisons, plotting results.","code":""},{"path":"https://istallworthy.github.io/devMSMs/reference/compareHistories.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Estimate, compare, and visualize exposure histories — compareHistories","text":"","code":"compareHistories(   home_dir,   exposure,   exposure_time_pts,   outcome,   model,   epochs = NULL,   hi_lo_cut = NULL,   reference = NULL,   comparison = NULL,   mc_comp_method = NA,   dose_level = NA,   exp_lab = NA,   out_lab = NA,   colors = NULL,   verbose = TRUE,   save.out = TRUE )"},{"path":"https://istallworthy.github.io/devMSMs/reference/compareHistories.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Estimate, compare, and visualize exposure histories — compareHistories","text":"home_dir path home directory (required 'save.' = TRUE) exposure name exposure variable exposure_time_pts list integers weights created/assessed correspond time points exposure wass measured outcome name outcome variable \".timepoint\" suffix model list model outputs fitModel() epochs (optional) data frame exposure epoch labels values hi_lo_cut (optional) list two numbers indicating quantile values reflect high low values, respectively, continuous exposure (default median split) reference (optional) list sof one strings \"-\"-separated \"l\" \"h\" values indicative reference exposure history compare comparison, required comparison supplied comparison (optional) list one strings \"-\"-separated \"l\" \"h\" values indicative comparison history/histories compare reference, required reference supplied mc_comp_method (optional) character abbreviation multiple comparison correction method stats::p.adjust, default Benjamini-Hochburg (\"BH\") dose_level (optional) \"l\" \"h\" indicating whether low high doses tallied tables plots (default high \"h\") exp_lab (optional) character label exposure variable plots (default variable name) out_lab (optional) character label outcome variable plots (default variable name) colors (optional) character specifying Brewer palette list colors (n(epochs)+1) plotting (default \"Dark2\" palette) verbose (optional) TRUE FALSE indicator user output (default TRUE) save.(optional) TRUE FALSE indicator save output intermediary output locally (default TRUE)","code":""},{"path":"https://istallworthy.github.io/devMSMs/reference/compareHistories.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Estimate, compare, and visualize exposure histories — compareHistories","text":"data frame history comparisons","code":""},{"path":[]},{"path":"https://istallworthy.github.io/devMSMs/reference/compareHistories.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Estimate, compare, and visualize exposure histories — compareHistories","text":"","code":"f <- createFormulas(exposure = \"A\",                     exposure_time_pts = c(1, 2, 3),                     outcome = \"D.3\",                     tv_confounders = c(\"A.1\", \"A.2\", \"A.3\", \"B.1\", \"B.2\", \"B.3\"),                     ti_confounders = \"C\",                     type = \"full\",                     save.out = FALSE) #> USER ALERT: Please manually inspect the full balancing formula below: #> The full formula for A - D.3 at A time point 1 is:  #> A.1 ~ C #> <environment: 0x563d160ebf00> #>  #> USER ALERT: Please manually inspect the full balancing formula below: #> The full formula for A - D.3 at A time point 2 is:  #> A.2 ~ A.1 + B.1 + C #> <environment: 0x563d160ebf00> #>  #> USER ALERT: Please manually inspect the full balancing formula below: #> The full formula for A - D.3 at A time point 3 is:  #> A.3 ~ A.1 + A.2 + B.1 + B.2 + C #> <environment: 0x563d160ebf00> #>   test <- data.frame(ID = 1:50,                    A.1 = rnorm(n = 50),                    A.2 = rnorm(n = 50),                    A.3 = rnorm(n = 50),                    B.1 = rnorm(n = 50),                    B.2 = rnorm(n = 50),                    B.3 = rnorm(n = 50),                    C = rnorm(n = 50),                    D.3 = rnorm(n = 50)) test[, c(\"A.1\", \"A.2\", \"A.3\")] <- lapply(test[, c(\"A.1\", \"A.2\", \"A.3\")], as.numeric)  w <- createWeights(data = test,                    exposure = \"A\",                    outcome = \"D.3\",                    formulas = f,                    save.out = FALSE) #> For the cbps weighting method, the median weight value is 1.08 (SD = 0.38; range = 0.45-2).  #>    m <- fitModel(data = test,               weights = w,               exposure = \"A\",               exposure_time_pts = c(1, 2, 3),               outcome = \"D.3\",               model = \"m0\",               save.out = FALSE) #> Please inspect the following likelihood ratio test to determine if the exposures collective predict significant variation in the outcome compared to a model without exposure terms. #>  #> We strongly suggest not conducting history comparisons if the likelihood ratio test is non-significant. #>  #> Working (Rao-Scott+F) LRT for A.1 A.2 A.3 #>  in svyglm(formula = as.formula(f), design = s, family = fam) #> Working 2logLR =  3.97067 p= 0.27109  #> (scale factors:  1.4 1.1 0.53 );  denominator df= 46 #>  #> The marginal model, m0, is summarized below:  r <- compareHistories(exposure = \"A\",                       exposure_time_pts = c(1, 2, 3),                       outcome = \"D.3\",                       model = m,                       save.out = FALSE) #> Summary of Exposure Main Effects:  #>  #> USER ALERT: Out of the total of 50 individuals in the sample, below is the distribution of the 50 (100%) individuals that fall into 8 out of the 8 total user-defined exposure histories created from median split values for low and high levels of exposure A, respectively, across 1, 2, 3.  #> USER ALERT: Please inspect the distribution of the sample across the following exposure histories and ensure there is sufficient spread to avoid extrapolation and low precision:  #>  #> Table: Summary of user-specified exposure A histories based on exposure main effects 1, 2, 3 containing time points 1, 2, 3: #>  #> |history |  n| #> |:-------|--:| #> |h-h-h   |  6| #> |h-h-l   |  7| #> |h-l-h   |  9| #> |h-l-l   |  3| #> |l-h-h   |  7| #> |l-h-l   |  5| #> |l-l-h   |  3| #> |l-l-l   | 10| #>  #>  #> Below are the average predictions by user-specified history:  #> |    A.1|    A.2|    A.3| estimate| std.error| statistic| p.value| s.value| conf.low| conf.high|history | dose_count| #> |------:|------:|------:|--------:|---------:|---------:|-------:|-------:|--------:|---------:|:-------|----------:| #> | -0.162| 0.1415| 0.4793|   0.0528|    0.1551|    0.3404|  0.7336|  0.4470|  -0.2512|    0.3568|l-l-l   |          0| #> | -0.162| 0.1415| 0.4813|   0.0528|    0.1552|    0.3399|  0.7340|  0.4462|  -0.2515|    0.3570|l-l-h   |          1| #> | -0.162| 0.1435| 0.4793|   0.0522|    0.1552|    0.3366|  0.7364|  0.4414|  -0.2519|    0.3563|l-h-l   |          1| #> | -0.162| 0.1435| 0.4813|   0.0522|    0.1553|    0.3361|  0.7368|  0.4406|  -0.2521|    0.3565|l-h-h   |          2| #> | -0.160| 0.1415| 0.4793|   0.0527|    0.1551|    0.3401|  0.7338|  0.4465|  -0.2513|    0.3568|h-l-l   |          1| #> | -0.160| 0.1415| 0.4813|   0.0527|    0.1552|    0.3396|  0.7342|  0.4458|  -0.2515|    0.3569|h-l-h   |          2| #> | -0.160| 0.1435| 0.4793|   0.0522|    0.1552|    0.3363|  0.7367|  0.4409|  -0.2519|    0.3563|h-h-l   |          2| #> | -0.160| 0.1435| 0.4813|   0.0521|    0.1553|    0.3358|  0.7370|  0.4402|  -0.2522|    0.3564|h-h-h   |          3| #>  #>  #> Conducting multiple comparison correction for all pairings between comparison histories and each refernece history using the BH method.  #>  #>  #> USER ALERT: please inspect the following comparisons:  #> |term                                                | estimate| std.error| statistic| p.value| s.value| conf.low| conf.high|history        |dose   | p.value_corr| #> |:---------------------------------------------------|--------:|---------:|---------:|-------:|-------:|--------:|---------:|:--------------|:------|------------:| #> |(-0.162, 0.1415, 0.4793) - (-0.162, 0.1415, 0.4813) |        0|         0|      0.17|    0.87|    0.21|        0|         0|l-l-l vs l-l-h |0 vs 1 |         0.94| #> |(-0.162, 0.1415, 0.4793) - (-0.162, 0.1435, 0.4793) |        0|         0|      1.85|    0.06|    3.95|        0|         0|l-l-l vs l-h-l |0 vs 1 |         0.42| #> |(-0.162, 0.1415, 0.4793) - (-0.162, 0.1435, 0.4813) |        0|         0|      1.42|    0.16|    2.67|        0|         0|l-l-l vs l-h-h |0 vs 2 |         0.42| #> |(-0.162, 0.1415, 0.4793) - (-0.16, 0.1415, 0.4793)  |        0|         0|      0.15|    0.88|    0.19|        0|         0|l-l-l vs h-l-l |0 vs 1 |         0.94| #> |(-0.162, 0.1415, 0.4793) - (-0.16, 0.1415, 0.4813)  |        0|         0|      0.29|    0.77|    0.38|        0|         0|l-l-l vs h-l-h |0 vs 2 |         0.94| #> |(-0.162, 0.1415, 0.4793) - (-0.16, 0.1435, 0.4793)  |        0|         0|      1.37|    0.17|    2.56|        0|         0|l-l-l vs h-h-l |0 vs 2 |         0.42| #> |(-0.162, 0.1415, 0.4793) - (-0.16, 0.1435, 0.4813)  |        0|         0|      1.37|    0.17|    2.55|        0|         0|l-l-l vs h-h-h |0 vs 3 |         0.42| #> |(-0.162, 0.1415, 0.4813) - (-0.162, 0.1435, 0.4793) |        0|         0|      1.54|    0.12|    3.03|        0|         0|l-l-h vs l-h-l |1 vs 1 |         0.42| #> |(-0.162, 0.1415, 0.4813) - (-0.162, 0.1435, 0.4813) |        0|         0|      1.85|    0.06|    3.95|        0|         0|l-l-h vs l-h-h |1 vs 2 |         0.42| #> |(-0.162, 0.1415, 0.4813) - (-0.16, 0.1415, 0.4793)  |        0|         0|      0.02|    0.99|    0.02|        0|         0|l-l-h vs h-l-l |1 vs 1 |         0.99| #> |(-0.162, 0.1415, 0.4813) - (-0.16, 0.1415, 0.4813)  |        0|         0|      0.15|    0.88|    0.19|        0|         0|l-l-h vs h-l-h |1 vs 2 |         0.94| #> |(-0.162, 0.1415, 0.4813) - (-0.16, 0.1435, 0.4793)  |        0|         0|      1.08|    0.28|    1.83|        0|         0|l-l-h vs h-h-l |1 vs 2 |         0.52| #> |(-0.162, 0.1415, 0.4813) - (-0.16, 0.1435, 0.4813)  |        0|         0|      1.37|    0.17|    2.56|        0|         0|l-l-h vs h-h-h |1 vs 3 |         0.42| #> |(-0.162, 0.1435, 0.4793) - (-0.162, 0.1435, 0.4813) |        0|         0|      0.17|    0.87|    0.21|        0|         0|l-h-l vs l-h-h |1 vs 2 |         0.94| #> |(-0.162, 0.1435, 0.4793) - (-0.16, 0.1415, 0.4793)  |        0|         0|     -1.25|    0.21|    2.23|        0|         0|l-h-l vs h-l-l |1 vs 1 |         0.42| #> |(-0.162, 0.1435, 0.4793) - (-0.16, 0.1415, 0.4813)  |        0|         0|     -1.31|    0.19|    2.39|        0|         0|l-h-l vs h-l-h |1 vs 2 |         0.42| #> |(-0.162, 0.1435, 0.4793) - (-0.16, 0.1435, 0.4793)  |        0|         0|      0.15|    0.88|    0.19|        0|         0|l-h-l vs h-h-l |1 vs 2 |         0.94| #> |(-0.162, 0.1435, 0.4793) - (-0.16, 0.1435, 0.4813)  |        0|         0|      0.29|    0.77|    0.38|        0|         0|l-h-l vs h-h-h |1 vs 3 |         0.94| #> |(-0.162, 0.1435, 0.4813) - (-0.16, 0.1415, 0.4793)  |        0|         0|     -0.98|    0.33|    1.61|        0|         0|l-h-h vs h-l-l |2 vs 1 |         0.57| #> |(-0.162, 0.1435, 0.4813) - (-0.16, 0.1415, 0.4813)  |        0|         0|     -1.25|    0.21|    2.23|        0|         0|l-h-h vs h-l-h |2 vs 2 |         0.42| #> |(-0.162, 0.1435, 0.4813) - (-0.16, 0.1435, 0.4793)  |        0|         0|      0.02|    0.99|    0.02|        0|         0|l-h-h vs h-h-l |2 vs 2 |         0.99| #> |(-0.162, 0.1435, 0.4813) - (-0.16, 0.1435, 0.4813)  |        0|         0|      0.15|    0.88|    0.19|        0|         0|l-h-h vs h-h-h |2 vs 3 |         0.94| #> |(-0.16, 0.1415, 0.4793) - (-0.16, 0.1415, 0.4813)   |        0|         0|      0.17|    0.87|    0.21|        0|         0|h-l-l vs h-l-h |1 vs 2 |         0.94| #> |(-0.16, 0.1415, 0.4793) - (-0.16, 0.1435, 0.4793)   |        0|         0|      1.85|    0.06|    3.95|        0|         0|h-l-l vs h-h-l |1 vs 2 |         0.42| #> |(-0.16, 0.1415, 0.4793) - (-0.16, 0.1435, 0.4813)   |        0|         0|      1.42|    0.16|    2.67|        0|         0|h-l-l vs h-h-h |1 vs 3 |         0.42| #> |(-0.16, 0.1415, 0.4813) - (-0.16, 0.1435, 0.4793)   |        0|         0|      1.54|    0.12|    3.03|        0|         0|h-l-h vs h-h-l |2 vs 2 |         0.42| #> |(-0.16, 0.1415, 0.4813) - (-0.16, 0.1435, 0.4813)   |        0|         0|      1.85|    0.06|    3.95|        0|         0|h-l-h vs h-h-h |2 vs 3 |         0.42| #> |(-0.16, 0.1435, 0.4793) - (-0.16, 0.1435, 0.4813)   |        0|         0|      0.17|    0.87|    0.21|        0|         0|h-h-l vs h-h-h |2 vs 3 |         0.94| #>  #>   r <- compareHistories(exposure = \"A\",                       exposure_time_pts = c(1, 2, 3),                       outcome = \"D.3\",                       model = m,                       reference = \"l-l-l\",                       comparison = \"h-h-h\",                       save.out = FALSE) #> Summary of Exposure Main Effects:  #>  #> USER ALERT: Out of the total of 50 individuals in the sample, below is the distribution of the 16 (32%) individuals that fall into 2 out of the 2 total user-defined exposure histories created from median split values for low and high levels of exposure A, respectively, across 1, 2, 3.  #> USER ALERT: Please inspect the distribution of the sample across the following exposure histories and ensure there is sufficient spread to avoid extrapolation and low precision:  #>  #> Table: Summary of user-specified exposure A histories based on exposure main effects 1, 2, 3 containing time points 1, 2, 3: #>  #> |history |  n| #> |:-------|--:| #> |h-h-h   |  6| #> |l-l-l   | 10| #>  #>  #> Below are the average predictions by user-specified history:  #> |   |    A.1|    A.2|    A.3| estimate| std.error| statistic| p.value| s.value| conf.low| conf.high|history | dose_count| #> |:--|------:|------:|------:|--------:|---------:|---------:|-------:|-------:|--------:|---------:|:-------|----------:| #> |1  | -0.162| 0.1415| 0.4793|   0.0528|    0.1551|    0.3404|  0.7336|  0.4470|  -0.2512|    0.3568|l-l-l   |          0| #> |8  | -0.160| 0.1435| 0.4813|   0.0521|    0.1553|    0.3358|  0.7370|  0.4402|  -0.2522|    0.3564|h-h-h   |          3| #>  #>  #> Conducting multiple comparison correction for all pairings between comparison histories and each refernece history using the BH method.  #>  #>  #> USER ALERT: please inspect the following comparisons:  #> |term                                               | estimate| std.error| statistic| p.value| s.value| conf.low| conf.high|history        |dose   | p.value_corr| #> |:--------------------------------------------------|--------:|---------:|---------:|-------:|-------:|--------:|---------:|:--------------|:------|------------:| #> |(-0.162, 0.1415, 0.4793) - (-0.16, 0.1435, 0.4813) |        0|         0|     -1.37|    0.17|    2.55|        0|         0|l-l-l vs h-h-h |0 vs 3 |         0.17| #>  #>   r <- compareHistories(exposure = \"A\",                       exposure_time_pts = c(1, 2, 3),                       outcome = \"D.3\",                       model = m,                       reference = \"l-l-l\",                       comparison = c(\"h-h-h\", \"h-l-l\"),                       save.out = FALSE) #> Summary of Exposure Main Effects:  #>  #> USER ALERT: Out of the total of 50 individuals in the sample, below is the distribution of the 19 (38%) individuals that fall into 3 out of the 3 total user-defined exposure histories created from median split values for low and high levels of exposure A, respectively, across 1, 2, 3.  #> USER ALERT: Please inspect the distribution of the sample across the following exposure histories and ensure there is sufficient spread to avoid extrapolation and low precision:  #>  #> Table: Summary of user-specified exposure A histories based on exposure main effects 1, 2, 3 containing time points 1, 2, 3: #>  #> |history |  n| #> |:-------|--:| #> |h-h-h   |  6| #> |h-l-l   |  3| #> |l-l-l   | 10| #>  #>  #> Below are the average predictions by user-specified history:  #> |   |    A.1|    A.2|    A.3| estimate| std.error| statistic| p.value| s.value| conf.low| conf.high|history | dose_count| #> |:--|------:|------:|------:|--------:|---------:|---------:|-------:|-------:|--------:|---------:|:-------|----------:| #> |1  | -0.162| 0.1415| 0.4793|   0.0528|    0.1551|    0.3404|  0.7336|  0.4470|  -0.2512|    0.3568|l-l-l   |          0| #> |5  | -0.160| 0.1415| 0.4793|   0.0527|    0.1551|    0.3401|  0.7338|  0.4465|  -0.2513|    0.3568|h-l-l   |          1| #> |8  | -0.160| 0.1435| 0.4813|   0.0521|    0.1553|    0.3358|  0.7370|  0.4402|  -0.2522|    0.3564|h-h-h   |          3| #>  #>  #> Conducting multiple comparison correction for all pairings between comparison histories and each refernece history using the BH method.  #>  #>  #> USER ALERT: please inspect the following comparisons:  #> |term                                               | estimate| std.error| statistic| p.value| s.value| conf.low| conf.high|history        |dose   | p.value_corr| #> |:--------------------------------------------------|--------:|---------:|---------:|-------:|-------:|--------:|---------:|:--------------|:------|------------:| #> |(-0.162, 0.1415, 0.4793) - (-0.16, 0.1435, 0.4813) |        0|         0|     -1.37|    0.17|    2.55|        0|         0|l-l-l vs h-h-h |0 vs 3 |         0.34| #> |(-0.162, 0.1415, 0.4793) - (-0.16, 0.1415, 0.4793) |        0|         0|     -0.15|    0.88|    0.19|        0|         0|l-l-l vs h-l-l |0 vs 1 |         0.88| #>  #>   r <- compareHistories(exposure = \"A\",                       exposure_time_pts = c(1, 2, 3),                       outcome = \"D.3\",                       model = m,                       reference = c(\"l-l-l\", \"l-h-h\"),                       comparison = c(\"h-h-h\"),                       save.out = FALSE) #> Summary of Exposure Main Effects:  #>  #> USER ALERT: Out of the total of 50 individuals in the sample, below is the distribution of the 23 (46%) individuals that fall into 3 out of the 3 total user-defined exposure histories created from median split values for low and high levels of exposure A, respectively, across 1, 2, 3.  #> USER ALERT: Please inspect the distribution of the sample across the following exposure histories and ensure there is sufficient spread to avoid extrapolation and low precision:  #>  #> Table: Summary of user-specified exposure A histories based on exposure main effects 1, 2, 3 containing time points 1, 2, 3: #>  #> |history |  n| #> |:-------|--:| #> |h-h-h   |  6| #> |l-h-h   |  7| #> |l-l-l   | 10| #>  #>  #> Below are the average predictions by user-specified history:  #> |   |    A.1|    A.2|    A.3| estimate| std.error| statistic| p.value| s.value| conf.low| conf.high|history | dose_count| #> |:--|------:|------:|------:|--------:|---------:|---------:|-------:|-------:|--------:|---------:|:-------|----------:| #> |1  | -0.162| 0.1415| 0.4793|   0.0528|    0.1551|    0.3404|  0.7336|  0.4470|  -0.2512|    0.3568|l-l-l   |          0| #> |4  | -0.162| 0.1435| 0.4813|   0.0522|    0.1553|    0.3361|  0.7368|  0.4406|  -0.2521|    0.3565|l-h-h   |          2| #> |8  | -0.160| 0.1435| 0.4813|   0.0521|    0.1553|    0.3358|  0.7370|  0.4402|  -0.2522|    0.3564|h-h-h   |          3| #>  #>  #> Conducting multiple comparison correction for all pairings between comparison histories and each refernece history using the BH method.  #>  #>  #> USER ALERT: please inspect the following comparisons:  #> |term                                               | estimate| std.error| statistic| p.value| s.value| conf.low| conf.high|term.1                                                                                                              | estimate.1| std.error.1| statistic.1| p.value.1| s.value.1| conf.low.1| conf.high.1|history        |dose   | p.value_corr| #> |:--------------------------------------------------|--------:|---------:|---------:|-------:|-------:|--------:|---------:|:-------------------------------------------------------------------------------------------------------------------|----------:|-----------:|-----------:|---------:|---------:|----------:|-----------:|:--------------|:------|------------:| #> |(-0.162, 0.1415, 0.4793) - (-0.16, 0.1435, 0.4813) |        0|         0|     -1.37|    0.17|    2.55|        0|         0|(-0.162033051374158,0.143465246390714,0.481342728689661) - (-0.160033051374158,0.143465246390714,0.481342728689661) |          0|           0|       -0.15|      0.88|      0.19|          0|           0|l-l-l vs h-h-h |0 vs 3 |         0.17| #>  #>   r <- compareHistories(exposure = \"A\",                       exposure_time_pts = c(1, 2, 3),                       outcome = \"D.3\",                       model = m,                       reference = c(\"l-l-l\", \"l-h-h\"),                       comparison = c(\"h-h-h\", \"l-l-h\"),                       save.out = FALSE) #> Summary of Exposure Main Effects:  #>  #> USER ALERT: Out of the total of 50 individuals in the sample, below is the distribution of the 26 (52%) individuals that fall into 4 out of the 4 total user-defined exposure histories created from median split values for low and high levels of exposure A, respectively, across 1, 2, 3.  #> USER ALERT: Please inspect the distribution of the sample across the following exposure histories and ensure there is sufficient spread to avoid extrapolation and low precision:  #>  #> Table: Summary of user-specified exposure A histories based on exposure main effects 1, 2, 3 containing time points 1, 2, 3: #>  #> |history |  n| #> |:-------|--:| #> |h-h-h   |  6| #> |l-h-h   |  7| #> |l-l-h   |  3| #> |l-l-l   | 10| #>  #>  #> Below are the average predictions by user-specified history:  #> |   |    A.1|    A.2|    A.3| estimate| std.error| statistic| p.value| s.value| conf.low| conf.high|history | dose_count| #> |:--|------:|------:|------:|--------:|---------:|---------:|-------:|-------:|--------:|---------:|:-------|----------:| #> |1  | -0.162| 0.1415| 0.4793|   0.0528|    0.1551|    0.3404|  0.7336|  0.4470|  -0.2512|    0.3568|l-l-l   |          0| #> |2  | -0.162| 0.1415| 0.4813|   0.0528|    0.1552|    0.3399|  0.7340|  0.4462|  -0.2515|    0.3570|l-l-h   |          1| #> |4  | -0.162| 0.1435| 0.4813|   0.0522|    0.1553|    0.3361|  0.7368|  0.4406|  -0.2521|    0.3565|l-h-h   |          2| #> |8  | -0.160| 0.1435| 0.4813|   0.0521|    0.1553|    0.3358|  0.7370|  0.4402|  -0.2522|    0.3564|h-h-h   |          3| #>  #>  #> Conducting multiple comparison correction for all pairings between comparison histories and each refernece history using the BH method.  #>  #>  #> USER ALERT: please inspect the following comparisons:  #> |term                                                | estimate| std.error| statistic| p.value| s.value| conf.low| conf.high|term.1                                                                                                              | estimate.1| std.error.1| statistic.1| p.value.1| s.value.1| conf.low.1| conf.high.1|history        |dose   | p.value_corr| #> |:---------------------------------------------------|--------:|---------:|---------:|-------:|-------:|--------:|---------:|:-------------------------------------------------------------------------------------------------------------------|----------:|-----------:|-----------:|---------:|---------:|----------:|-----------:|:--------------|:------|------------:| #> |(-0.162, 0.1415, 0.4793) - (-0.16, 0.1435, 0.4813)  |        0|         0|     -1.37|    0.17|    2.55|        0|         0|(-0.162033051374158,0.143465246390714,0.481342728689661) - (-0.160033051374158,0.143465246390714,0.481342728689661) |          0|           0|       -0.15|      0.88|      0.19|          0|           0|l-l-l vs h-h-h |0 vs 3 |         0.34| #> |(-0.162, 0.1415, 0.4793) - (-0.162, 0.1415, 0.4813) |        0|         0|     -0.17|    0.87|    0.21|        0|         0|(-0.162033051374158,0.143465246390714,0.481342728689661) - (-0.162033051374158,0.141465246390714,0.481342728689661) |          0|           0|        1.85|      0.06|      3.95|          0|           0|l-l-l vs l-l-h |0 vs 1 |         0.87| #>  #>   r <- compareHistories(exposure = \"A\",                       exposure_time_pts = c(1, 2, 3),                       outcome = \"D.3\",                       model = m,                       reference = c(\"l-l-l\", \"l-h-h\"),                       comparison = c(\"h-h-h\", \"l-l-h\"),                       hi_lo_cut = c(0.60, 0.30),                       mc_comp_method = \"BH\",                       dose_level = \"l\",                       exp_lab = \"Hello\",                       out_lab = \"Goodbye\",                       colors = \"Set1\",                       save.out = FALSE) #> Summary of Exposure Main Effects:  #>  #> USER ALERT: Out of the total of 50 individuals in the sample, below is the distribution of the 7 (14%) individuals that fall into 3 out of the 4 the total user-defined exposure histories created from 30th and 60th percentile values for low and high levels of exposure A, respectively, across 1, 2, 3.  #> USER ALERT: Please inspect the distribution of the sample across the following exposure histories and ensure there is sufficient spread to avoid extrapolation and low precision:  #> Warning: USER ALERT: There are no individuals in your sample that fall into l-l-h exposure history/histories. You may wish to consider different high/low cutoffs (for continuous exposures), alternative epochs, or choose a different measure to avoid extrapolation. #>  #>  #> Table: Summary of user-specified exposure A histories based on exposure main effects 1, 2, 3 containing time points 1, 2, 3: #>  #> |history |  n| #> |:-------|--:| #> |h-h-h   |  3| #> |l-h-h   |  2| #> |l-l-l   |  2| #>  #>  #> Below are the average predictions by user-specified history:  #> |   |     A.1|     A.2|     A.3| estimate| std.error| statistic| p.value| s.value| conf.low| conf.high|history | dose_count| #> |:--|-------:|-------:|-------:|--------:|---------:|---------:|-------:|-------:|--------:|---------:|:-------|----------:| #> |1  | -0.4265| -0.4250| -0.5381|   0.2417|    0.1721|    1.4047|  0.1601|  2.6430|  -0.0955|    0.5790|l-l-l   |          3| #> |2  | -0.4265| -0.4250|  0.6523|   0.2180|    0.1832|    1.1896|  0.2342|  2.0941|  -0.1412|    0.5771|l-l-h   |          2| #> |4  | -0.4265|  0.2092|  0.6523|   0.0362|    0.1741|    0.2081|  0.8352|  0.2598|  -0.3049|    0.3773|l-h-h   |          1| #> |8  | -0.0658|  0.2092|  0.6523|   0.0276|    0.1669|    0.1655|  0.8685|  0.2034|  -0.2995|    0.3547|h-h-h   |          0| #>  #>  #> Conducting multiple comparison correction for all pairings between comparison histories and each refernece history using the BH method.  #>  #>  #> USER ALERT: please inspect the following comparisons:  #> |term                                                   | estimate| std.error| statistic| p.value| s.value| conf.low| conf.high|term.1                                                                                                             | estimate.1| std.error.1| statistic.1| p.value.1| s.value.1| conf.low.1| conf.high.1|history        |dose   | p.value_corr| #> |:------------------------------------------------------|--------:|---------:|---------:|-------:|-------:|--------:|---------:|:------------------------------------------------------------------------------------------------------------------|----------:|-----------:|-----------:|---------:|---------:|----------:|-----------:|:--------------|:------|------------:| #> |(-0.4265, -0.425, -0.5381) - (-0.0658, 0.2092, 0.6523) |    -0.21|      0.18|     -1.17|    0.24|    2.05|    -0.57|      0.14|(-0.426475068919447,0.2092431790206,0.652313151318036) - (-0.0657840726599269,0.2092431790206,0.652313151318036)   |      -0.01|        0.06|       -0.15|      0.88|      0.19|      -0.12|        0.10|l-l-l vs h-h-h |3 vs 0 |         0.48| #> |(-0.4265, -0.425, -0.5381) - (-0.4265, -0.425, 0.6523) |    -0.02|      0.14|     -0.17|    0.87|    0.21|    -0.30|      0.26|(-0.426475068919447,0.2092431790206,0.652313151318036) - (-0.426475068919447,-0.425002677465878,0.652313151318036) |       0.18|        0.10|        1.85|      0.06|      3.95|      -0.01|        0.37|l-l-l vs l-l-h |3 vs 2 |         0.87| #>  #>"},{"path":"https://istallworthy.github.io/devMSMs/reference/createFormulas.html","id":null,"dir":"Reference","previous_headings":"","what":"Create balancing formulas — createFormulas","title":"Create balancing formulas — createFormulas","text":"Creates balancing formulas relating exposure relevant time-varying time invariant confounders exposure time point used create IPTW weights.","code":""},{"path":"https://istallworthy.github.io/devMSMs/reference/createFormulas.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create balancing formulas — createFormulas","text":"","code":"createFormulas(   exposure,   exposure_time_pts,   outcome,   type,   ti_confounders,   tv_confounders,   bal_stats = NULL,   concur_conf = NULL,   keep_conf = NULL,   home_dir = NULL,   custom = NULL,   verbose = TRUE,   save.out = TRUE )"},{"path":"https://istallworthy.github.io/devMSMs/reference/createFormulas.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create balancing formulas — createFormulas","text":"exposure name exposure variable exposure_time_pts list integers weights created/assessed correspond time points exposure wass measured outcome name outcome variable \".timepoint\" suffix type type formula create 'full' (includes lagged time-varying confounders), 'short' (includes time-varying confounders t-1 lag ), 'update' (adds 'short' formulas imbalanced time-varying confounders lags great t-1) ti_confounders list time invariant confounders (least one required) tv_confounders list time-varying confounders \".timepoint\" suffix, include exposure outcome variables (least time-varying exposure variables required ) bal_stats list balance statistics assessBalance(), required 'update' type concur_conf (optional) list variable names reflecting time-varying confounders retain formulas contemporaneously (default none) keep_conf (optional) list variable names reflecting confounders always retain formulas (default depends type) home_dir path home directory (required 'save.' = TRUE) custom (optional) custom list formulas exposure time point (default create automatically according type) verbose (optional) TRUE FALSE indicator user output (default TRUE) save.(optional) TRUE FALSE indicator save output intermediary output locally (default TRUE)","code":""},{"path":"https://istallworthy.github.io/devMSMs/reference/createFormulas.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create balancing formulas — createFormulas","text":"list balancing formulas exposure time point","code":""},{"path":"https://istallworthy.github.io/devMSMs/reference/createFormulas.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Create balancing formulas — createFormulas","text":"","code":"#Full Formulas f <- createFormulas(exposure = \"A\",                     exposure_time_pts = c(1, 2, 3),                     outcome = \"D.3\",                     tv_confounders = c(\"A.1\", \"A.2\", \"A.3\"),                     ti_confounders = \"C\",                     type = \"full\",                     save.out = FALSE) #> USER ALERT: Please manually inspect the full balancing formula below: #> The full formula for A - D.3 at A time point 1 is:  #> A.1 ~ C #> <environment: 0x563d18725fe0> #>  #> USER ALERT: Please manually inspect the full balancing formula below: #> The full formula for A - D.3 at A time point 2 is:  #> A.2 ~ A.1 + C #> <environment: 0x563d18725fe0> #>  #> USER ALERT: Please manually inspect the full balancing formula below: #> The full formula for A - D.3 at A time point 3 is:  #> A.3 ~ A.1 + A.2 + C #> <environment: 0x563d18725fe0> #>   f <- createFormulas(exposure = \"A\",                     exposure_time_pts = c(1, 2, 3),                     outcome = \"D.3\",                     tv_confounders = c(\"A.1\", \"A.2\", \"A.3\", \"B.1\", \"B.2\", \"B.3\"),                     ti_confounders = \"C\",                     type = \"full\",                     save.out = FALSE) #> USER ALERT: Please manually inspect the full balancing formula below: #> The full formula for A - D.3 at A time point 1 is:  #> A.1 ~ C #> <environment: 0x563d15db0940> #>  #> USER ALERT: Please manually inspect the full balancing formula below: #> The full formula for A - D.3 at A time point 2 is:  #> A.2 ~ A.1 + B.1 + C #> <environment: 0x563d15db0940> #>  #> USER ALERT: Please manually inspect the full balancing formula below: #> The full formula for A - D.3 at A time point 3 is:  #> A.3 ~ A.1 + A.2 + B.1 + B.2 + C #> <environment: 0x563d15db0940> #>   #Short Formulas f <- createFormulas(exposure = \"A\",                     exposure_time_pts = c(1, 2, 3),                     outcome = \"D.3\",                     tv_confounders = c(\"A.1\", \"A.2\", \"A.3\"),                     ti_confounders = \"C\",                     type = \"short\",                     save.out = FALSE) #> USER ALERT: Please manually inspect the short balancing formula below that includes time-varying confounders at t-1 only: #> The short formula for A - D.3 at A time point 1 is:  #> A.1 ~ C #> <environment: 0x563d13cc3480> #>  #> USER ALERT: Please manually inspect the short balancing formula below that includes time-varying confounders at t-1 only: #> The short formula for A - D.3 at A time point 2 is:  #> A.2 ~ A.1 + C #> <environment: 0x563d13cc3480> #>  #> USER ALERT: Please manually inspect the short balancing formula below that includes time-varying confounders at t-1 only: #> The short formula for A - D.3 at A time point 3 is:  #> A.3 ~ A.2 + C #> <environment: 0x563d13cc3480> #>  f <- createFormulas(exposure = \"A\",                     exposure_time_pts = c(1, 2, 3),                     outcome = \"D.3\",                     tv_confounders = c(\"A.1\", \"A.2\", \"A.3\", \"B.1\", \"B.2\", \"B.3\"),                     ti_confounders = \"C\",                     type = \"short\",                     save.out = FALSE) #> USER ALERT: Please manually inspect the short balancing formula below that includes time-varying confounders at t-1 only: #> The short formula for A - D.3 at A time point 1 is:  #> A.1 ~ C #> <environment: 0x563d12bc9678> #>  #> USER ALERT: Please manually inspect the short balancing formula below that includes time-varying confounders at t-1 only: #> The short formula for A - D.3 at A time point 2 is:  #> A.2 ~ A.1 + B.1 + C #> <environment: 0x563d12bc9678> #>  #> USER ALERT: Please manually inspect the short balancing formula below that includes time-varying confounders at t-1 only: #> The short formula for A - D.3 at A time point 3 is:  #> A.3 ~ A.2 + B.2 + C #> <environment: 0x563d12bc9678> #>   c <- list(\"short_form-1\" = as.formula(A.1 ~ C),           \"short_form-2\" = as.formula(A.2 ~ A.1 + B.1 + C),           \"short_form-3\" = as.formula(A.3 ~ A.2 + B.2 + C))  f <- createFormulas(exposure = \"A\",                     exposure_time_pts = c(1, 2, 3),                     outcome = \"D.3\",                     tv_confounders = c(\"A.1\", \"A.2\", \"A.3\", \"B.1\", \"B.2\", \"B.3\"),                     ti_confounders = \"C\",                     type = \"short\",                     custom = c,                     save.out = FALSE)  #Update Formulas test <- data.frame(ID = 1:50,                    A.1 = rnorm(n = 50),                    A.2 = rnorm(n = 50),                    A.3 = rnorm(n = 50),                    B.1 = rnorm(n = 50),                    B.2 = rnorm(n = 50),                    B.3 = rnorm(n = 50),                    C = rnorm(n = 50),                    D.3 = rnorm(n = 50)) test[, c(\"A.1\", \"A.2\", \"A.3\")] <- lapply(test[, c(\"A.1\", \"A.2\", \"A.3\")], as.numeric)  w <- createWeights(data = test,                    exposure = \"A\",                    outcome = \"D.3\",                    formulas = f,                    save.out = FALSE) #> For the cbps weighting method, the median weight value is 0.95 (SD = 0.63; range = 0.3-4).  #>    b <- assessBalance(data = test,                    exposure = \"A\",                    exposure_time_pts = c(1, 2, 3),                    outcome = \"D.3\",                    type = \"weighted\",                    weights = w,                    formulas = f,                    save.out = FALSE) #> USER ALERT: The following statistics display covariate imbalance at each exposure time point following IPTW weighting, using short formulas. #>     #> As shown below, 1 out of 7 (14%) covariates across time points, corresponding to 1 out of 2 domains, remain imbalanced with a remaining median absolute value correlation/std mean difference of 0.18 (range= 0.18-0.18): #>  #> Table: Imbalanced covariates using cbps and short formulas #>  #> | exp_time| balanced_n| imbalanced_n|  n| #> |--------:|----------:|------------:|--:| #> |        1|          1|            0|  1| #> |        2|          2|            1|  3| #> |        3|          3|            0|  3| #>  #>  #> USER ALERT: For exposure A using the short formulas and cbps : #> The median absolute value relation between exposure and confounder is 0.03 (range = -0.08 -0.18).  #> As shown below, the following 1 covariates across time points out of 7 total (14.29%) spanning 1 domains out of 3 (33.33%) are imbalanced with a remaining median absolute value correlation/std mean difference in relation to A of 0.18 (range=0.18-0.18) : #>  #>  #> Table: Imbalanced Covariates #>  #> |   |exposure | exp_time| covar_time|covariate |   avg_bal| bal_thresh| balanced| #> |:--|:--------|--------:|----------:|:---------|---------:|----------:|--------:| #> |2  |A        |        2|          1|A.1       | 0.1805469|        0.1|        0| #>  f <- createFormulas(exposure = \"A\",                     exposure_time_pts = c(1, 2, 3),                     outcome = \"D.3\",                     tv_confounders = c(\"A.1\", \"A.2\", \"A.3\"),                     ti_confounders = \"C\",                     type = \"update\",                     bal_stats = b,                     save.out = FALSE) #> USER ALERT: Please manually inspect the updated balancing formula below that includes time-varying confounders at t-1 and those greater at further lags that remained imbalanced: #> The update formula for A - D.3 at A time point 1 is:  #> A.1 ~ C #> <environment: 0x563d1be830b0> #>  #> USER ALERT: Please manually inspect the updated balancing formula below that includes time-varying confounders at t-1 and those greater at further lags that remained imbalanced: #> For A at exposure time point 2 no time-varying confounders at additional lags were added.  #>  #> The update formula for A - D.3 at A time point 2 is:  #> A.2 ~ A.1 + C #> <environment: 0x563d1be830b0> #>  #> USER ALERT: Please manually inspect the updated balancing formula below that includes time-varying confounders at t-1 and those greater at further lags that remained imbalanced: #> For A at exposure time point 3 no time-varying confounders at additional lags were added.  #>  #> The update formula for A - D.3 at A time point 3 is:  #> A.3 ~ A.2 + C #> <environment: 0x563d1be830b0> #>  f <- createFormulas(exposure = \"A\",                     exposure_time_pts = c(1, 2, 3),                     outcome = \"D.3\",                     tv_confounders = c(\"A.1\", \"A.2\", \"A.3\", \"B.1\", \"B.2\", \"B.3\"),                     ti_confounders = \"C\",                     type = \"update\",                     bal_stats = b,                     save.out = FALSE) #> USER ALERT: Please manually inspect the updated balancing formula below that includes time-varying confounders at t-1 and those greater at further lags that remained imbalanced: #> The update formula for A - D.3 at A time point 1 is:  #> A.1 ~ C #> <environment: 0x563d1bf8d290> #>  #> USER ALERT: Please manually inspect the updated balancing formula below that includes time-varying confounders at t-1 and those greater at further lags that remained imbalanced: #> For A at exposure time point 2 no time-varying confounders at additional lags were added.  #>  #> The update formula for A - D.3 at A time point 2 is:  #> A.2 ~ A.1 + B.1 + C #> <environment: 0x563d1bf8d290> #>  #> USER ALERT: Please manually inspect the updated balancing formula below that includes time-varying confounders at t-1 and those greater at further lags that remained imbalanced: #> For A at exposure time point 3 no time-varying confounders at additional lags were added.  #>  #> The update formula for A - D.3 at A time point 3 is:  #> A.3 ~ A.2 + B.2 + C #> <environment: 0x563d1bf8d290> #>"},{"path":"https://istallworthy.github.io/devMSMs/reference/createWeights.html","id":null,"dir":"Reference","previous_headings":"","what":"Creates IPTW balancing weights — createWeights","title":"Creates IPTW balancing weights — createWeights","text":"Creates IPTW balancing weights user-specified exposure time point using balancing formulas relate exposure time point relevant confounders.","code":""},{"path":"https://istallworthy.github.io/devMSMs/reference/createWeights.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Creates IPTW balancing weights — createWeights","text":"","code":"createWeights(   data,   exposure,   outcome,   formulas,   method = \"cbps\",   SL.library = \"SL.glm\",   criterion = NA,   home_dir = NULL,   read_in_from_file = FALSE,   verbose = TRUE,   save.out = TRUE,   ... )"},{"path":"https://istallworthy.github.io/devMSMs/reference/createWeights.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Creates IPTW balancing weights — createWeights","text":"data data wide format : data frame, list imputed data frames, mids object exposure name exposure variable outcome name outcome variable \".timepoint\" suffix formulas list balancing formulas time point output createFormulas() method (optional) character string weightitMSM() balancing method abbreviation (default Covariate Balancing Propensity Score \"cbps\") SL.library required superLearner weighting method (\"super\"); see SuperLearner::listWrappers() options criterion (optional) criterion used select best weights (default \"p.mean\" minimizing avg Pearson correlation continuous exposures \"smd.mean\" binary exposures) (requird \"gbm\" method) home_dir path home directory (required 'save.' = TRUE) read_in_from_file (optional) TRUE FALSE indicator read weights previously run saved locally (default FALSE) verbose (optional) TRUE FALSE indicator user output (default TRUE) save.(optional) TRUE FALSE indicator save output intermediary output locally (default TRUE) ... inputs weightitMSM()","code":""},{"path":"https://istallworthy.github.io/devMSMs/reference/createWeights.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Creates IPTW balancing weights — createWeights","text":"list IPTW balancing weights","code":""},{"path":[]},{"path":"https://istallworthy.github.io/devMSMs/reference/createWeights.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Creates IPTW balancing weights — createWeights","text":"","code":"test <- data.frame(ID = 1:50,                    A.1 = rnorm(n = 50),                    A.2 = rnorm(n = 50),                    A.3 = rnorm(n = 50),                    B.1 = rnorm(n = 50),                    B.2 = rnorm(n = 50),                    B.3 = rnorm(n = 50),                    C = rnorm(n = 50),                    D.3 = rnorm(n = 50)) test[, c(\"A.1\", \"A.2\", \"A.3\")] <- lapply(test[, c(\"A.1\", \"A.2\", \"A.3\")], as.numeric)  f <- createFormulas(exposure = \"A\",                     exposure_time_pts = c(1, 2, 3),                     outcome = \"D.3\",                     tv_confounders = c(\"A.1\", \"A.2\", \"A.3\", \"B.1\", \"B.2\", \"B.3\"),                     ti_confounders = \"C\",                     type = \"short\",                     save.out = FALSE) #> USER ALERT: Please manually inspect the short balancing formula below that includes time-varying confounders at t-1 only: #> The short formula for A - D.3 at A time point 1 is:  #> A.1 ~ C #> <environment: 0x563d1a30db00> #>  #> USER ALERT: Please manually inspect the short balancing formula below that includes time-varying confounders at t-1 only: #> The short formula for A - D.3 at A time point 2 is:  #> A.2 ~ A.1 + B.1 + C #> <environment: 0x563d1a30db00> #>  #> USER ALERT: Please manually inspect the short balancing formula below that includes time-varying confounders at t-1 only: #> The short formula for A - D.3 at A time point 3 is:  #> A.3 ~ A.2 + B.2 + C #> <environment: 0x563d1a30db00> #>  w <- createWeights(data = test,                    exposure = \"A\",                    outcome = \"D.3\",                    formulas = f,                    save.out = FALSE) #> For the cbps weighting method, the median weight value is 1 (SD = 0.38; range = 0.37-2).  #>                       f <- createFormulas(exposure = \"A\",                     exposure_time_pts = c(1, 2, 3),                     outcome = \"D.3\",                     tv_confounders = c(\"A.1\", \"A.2\", \"A.3\", \"B.1\", \"B.2\", \"B.3\", \"A.1:B.1\"),                     ti_confounders = \"C\",                     type = \"short\",                     save.out = FALSE) #> USER ALERT: Please manually inspect the short balancing formula below that includes time-varying confounders at t-1 only: #> The short formula for A - D.3 at A time point 1 is:  #> A.1 ~ C #> <environment: 0x563d14f11888> #>  #> USER ALERT: Please manually inspect the short balancing formula below that includes time-varying confounders at t-1 only: #> The short formula for A - D.3 at A time point 2 is:  #> A.2 ~ A.1 + A.1:B.1 + B.1 + C #> <environment: 0x563d14f11888> #>  #> USER ALERT: Please manually inspect the short balancing formula below that includes time-varying confounders at t-1 only: #> The short formula for A - D.3 at A time point 3 is:  #> A.3 ~ A.2 + B.2 + C #> <environment: 0x563d14f11888> #>  w <- createWeights(data = test,                    exposure = \"A\",                    outcome = \"D.3\",                    formulas = f,                    save.out = FALSE) #> For the cbps weighting method, the median weight value is 1.11 (SD = 0.41; range = 0.36-2).  #>                       w <- createWeights(data = test,                    exposure = \"A\",                    outcome = \"D.3\",                    formulas = f,                    method = \"cbps\",                    save.out = FALSE) #> For the cbps weighting method, the median weight value is 1.11 (SD = 0.41; range = 0.36-2).  #>   w <- createWeights(data = test,                    exposure = \"A\",                    outcome = \"D.3\",                    formulas = f,                    method = \"cbps\",                    save.out = FALSE) #> For the cbps weighting method, the median weight value is 1.11 (SD = 0.41; range = 0.36-2).  #>   w <- createWeights(data = test,                    exposure = \"A\",                    outcome = \"D.3\",                    formulas = f,                    method = \"gbm\",                    save.out = FALSE)                     #> For the gbm weighting method, the median weight value is 0.92 (SD = 0.21; range = 0.52-1).  #>   w <- createWeights(data = test,                    exposure = \"A\",                    outcome = \"D.3\",                    formulas = f,                    method = \"bart\",                    save.out = FALSE) #> For the bart weighting method, the median weight value is 0.67 (SD = 0.24; range = 0.25-1).  #>   w <- createWeights(data = test,                    exposure = \"A\",                    outcome = \"D.3\",                    formulas = f,                    method = \"super\",                    save.out = FALSE)    #> Loading required package: nnls #> Warning: All algorithms have zero weight #> Warning: All metalearner coefficients are zero, predictions will all be equal to 0 #> For the super weighting method, the median weight value is 1.03 (SD = 0.27; range = 0.48-2).  #>"},{"path":"https://istallworthy.github.io/devMSMs/reference/create_custom_comparisons.html","id":null,"dir":"Reference","previous_headings":"","what":"Creates custom comparisons — create_custom_comparisons","title":"Creates custom comparisons — create_custom_comparisons","text":"Creates custom comparisons","code":""},{"path":"https://istallworthy.github.io/devMSMs/reference/create_custom_comparisons.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Creates custom comparisons — create_custom_comparisons","text":"","code":"create_custom_comparisons(preds, ref_vals, comp_vals, exposure)"},{"path":"https://istallworthy.github.io/devMSMs/reference/create_custom_comparisons.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Creates custom comparisons — create_custom_comparisons","text":"preds custom output marginaleffects::average_predictions() ref_vals reference values comp_vals comparison values exposure name exposure variable","code":""},{"path":"https://istallworthy.github.io/devMSMs/reference/create_custom_comparisons.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Creates custom comparisons — create_custom_comparisons","text":"custom comparisons","code":""},{"path":"https://istallworthy.github.io/devMSMs/reference/create_custom_contrasts.html","id":null,"dir":"Reference","previous_headings":"","what":"Create custom contrasts — create_custom_contrasts","title":"Create custom contrasts — create_custom_contrasts","text":"Create custom contrasts","code":""},{"path":"https://istallworthy.github.io/devMSMs/reference/create_custom_contrasts.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create custom contrasts — create_custom_contrasts","text":"","code":"create_custom_contrasts(d, reference, comp_histories, exposure, preds)"},{"path":"https://istallworthy.github.io/devMSMs/reference/create_custom_contrasts.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create custom contrasts — create_custom_contrasts","text":"d data frame high low values per exposure main effect reference reference sequence \"h\" /\"l\" (e.g., \"h-h-h\") comp_histories comparison sequence(s) \"h\" /\"l\" (e.g., \"h-h-h\") exposure name exposure variable preds custom output marginaleffects::average_predictions()","code":""},{"path":"https://istallworthy.github.io/devMSMs/reference/create_custom_contrasts.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create custom contrasts — create_custom_contrasts","text":"contrasts","code":""},{"path":"https://istallworthy.github.io/devMSMs/reference/devMSMs-package.html","id":null,"dir":"Reference","previous_headings":"","what":"devMSMs: Tools for Conducting Marginal Structural Models with Developmental Data — devMSMs-package","title":"devMSMs: Tools for Conducting Marginal Structural Models with Developmental Data — devMSMs-package","text":"Functions preparing, assessing, implementing MSMS.","code":""},{"path":[]},{"path":"https://istallworthy.github.io/devMSMs/reference/devMSMs-package.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"devMSMs: Tools for Conducting Marginal Structural Models with Developmental Data — devMSMs-package","text":"Maintainer: Isabella Stallworthy istall@seas.upenn.edu Authors: Noah Greifer ngreifer@iq.harvard.edu [contributor] Meriah DeJoseph meriahd@stanford.edu Emily Padrutt padru004@umn.edu Daniel Berry dberry@umn.edu","code":""},{"path":"https://istallworthy.github.io/devMSMs/reference/eval_hist.html","id":null,"dir":"Reference","previous_headings":"","what":"Visualize distribution of sample across exposure histories — eval_hist","title":"Visualize distribution of sample across exposure histories — eval_hist","text":"Create customized, user-specified exposure histories tables displaying sample distribution across user inspection.","code":""},{"path":"https://istallworthy.github.io/devMSMs/reference/eval_hist.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Visualize distribution of sample across exposure histories — eval_hist","text":"","code":"eval_hist(   data,   exposure,   time_pts,   epochs = NULL,   hi_lo_cut = NULL,   ref = NULL,   comps = NULL )"},{"path":"https://istallworthy.github.io/devMSMs/reference/eval_hist.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Visualize distribution of sample across exposure histories — eval_hist","text":"data data wide format : data frame, list imputed data frames, mids object exposure name exposure variable time_pts list integers weights created/assessed correspond time points exposure measured epochs (optional) data frame exposure epoch labels values hi_lo_cut list two numbers indicating quantile values reflect high low values, respectively, continuous exposure ref (optional) list one strings \"-\"-separated \"l\" \"h\" values indicative reference exposure history compare comparison, required comparison supplied comps (optional) list one strings \"-\"-separated \"l\" \"h\" values indicative comparison history/histories compare reference, required reference supplied","code":""},{"path":"https://istallworthy.github.io/devMSMs/reference/eval_hist.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Visualize distribution of sample across exposure histories — eval_hist","text":"none","code":""},{"path":"https://istallworthy.github.io/devMSMs/reference/eval_hist.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Visualize distribution of sample across exposure histories — eval_hist","text":"","code":"test <- data.frame(ID = 1:50,                    A.1 = rnorm(n = 50),                    A.2 = rnorm(n = 50),                    A.3 = rnorm(n = 50),                    B.1 = rnorm(n = 50),                    B.2 = rnorm(n = 50),                    B.3 = rnorm(n = 50),                    C = rnorm(n = 50),                    D.3 = rnorm(n = 50)) test[, c(\"A.1\", \"A.2\", \"A.3\")] <- lapply(test[, c(\"A.1\", \"A.2\", \"A.3\")], as.numeric)  h <- eval_hist(data = test,                exposure = \"A\",                time_pts = c(1, 2, 3)) #> Summary of Exposure Main Effects:  #>  #> USER ALERT: Out of the total of 50 individuals in the sample, below is the distribution of the 50 (100%) individuals that fall into 8 out of the 8 total user-defined exposure histories created from median split values for low and high levels of exposure A, respectively, across 1, 2, 3.  #> USER ALERT: Please inspect the distribution of the sample across the following exposure histories and ensure there is sufficient spread to avoid extrapolation and low precision:  #>  #> Table: Summary of user-specified exposure A histories based on exposure main effects 1, 2, 3 containing time points 1, 2, 3: #>  #> |history |  n| #> |:-------|--:| #> |h-h-h   |  9| #> |h-h-l   |  6| #> |h-l-h   |  3| #> |h-l-l   |  7| #> |l-h-h   |  5| #> |l-h-l   |  5| #> |l-l-h   |  8| #> |l-l-l   |  7| #>  h <- eval_hist(data = test,                exposure = \"A\",                time_pts = c(1, 2, 3),                epochs = data.frame(epochs = c(\"Infancy\", \"Toddlerhood\"),                                    values = I(list(c(1, 2), c(3))))) #> Summary of Exposure Main Effects:  #>  #> USER ALERT: Out of the total of 50 individuals in the sample, below is the distribution of the 50 (100%) individuals that fall into 4 out of the 4 total user-defined exposure histories created from median split values for low and high levels of exposure A, respectively, across Infancy, Toddlerhood.  #> USER ALERT: Please inspect the distribution of the sample across the following exposure histories and ensure there is sufficient spread to avoid extrapolation and low precision:  #>  #> Table: Summary of user-specified exposure A histories based on exposure main effects Infancy, Toddlerhood containing time points c(1, 2), 3: #>  #> |history |  n| #> |:-------|--:| #> |h-h     | 12| #> |h-l     | 13| #> |l-h     | 13| #> |l-l     | 12| #>  h <- eval_hist(data = test,                exposure = \"A\",                time_pts = c(1, 2, 3),                hi_lo_cut = c(0.6, 0.3)) #> Summary of Exposure Main Effects:  #>  #> USER ALERT: Out of the total of 50 individuals in the sample, below is the distribution of the 19 (38%) individuals that fall into 7 out of the 8 the total user-defined exposure histories created from 30th and 60th percentile values for low and high levels of exposure A, respectively, across 1, 2, 3.  #> USER ALERT: Please inspect the distribution of the sample across the following exposure histories and ensure there is sufficient spread to avoid extrapolation and low precision:  #> Warning: USER ALERT: There are no individuals in your sample that fall into l-h-h exposure history/histories. You may wish to consider different high/low cutoffs (for continuous exposures), alternative epochs, or choose a different measure to avoid extrapolation. #>  #>  #> Table: Summary of user-specified exposure A histories based on exposure main effects 1, 2, 3 containing time points 1, 2, 3: #>  #> |history |  n| #> |:-------|--:| #> |h-h-h   |  4| #> |h-h-l   |  3| #> |h-l-h   |  1| #> |h-l-l   |  3| #> |l-h-l   |  1| #> |l-l-h   |  3| #> |l-l-l   |  4| #>  h <- eval_hist(data = test,                exposure = \"A\",                time_pts = c(1, 2, 3),                hi_lo_cut = c(0.6, 0.3),                ref = \"l-l-l\",                comps = \"h-h-h\") #> Summary of Exposure Main Effects:  #>  #> USER ALERT: Out of the total of 50 individuals in the sample, below is the distribution of the 8 (16%) individuals that fall into 2 out of the 2 the total user-defined exposure histories created from 30th and 60th percentile values for low and high levels of exposure A, respectively, across 1, 2, 3.  #> USER ALERT: Please inspect the distribution of the sample across the following exposure histories and ensure there is sufficient spread to avoid extrapolation and low precision:  #>  #> Table: Summary of user-specified exposure A histories based on exposure main effects 1, 2, 3 containing time points 1, 2, 3: #>  #> |history |  n| #> |:-------|--:| #> |h-h-h   |  4| #> |l-l-l   |  4| #>"},{"path":"https://istallworthy.github.io/devMSMs/reference/fitModel.html","id":null,"dir":"Reference","previous_headings":"","what":"Fit outcome model — fitModel","title":"Fit outcome model — fitModel","text":"Fits weighted marginal outcome model generalized linear model user's choosing, relating exposure main effects outcome using IPTW weights.","code":""},{"path":"https://istallworthy.github.io/devMSMs/reference/fitModel.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Fit outcome model — fitModel","text":"","code":"fitModel(   data,   weights,   exposure,   exposure_time_pts,   outcome,   model,   family = NULL,   link = NA,   int_order = NA,   covariates = NULL,   epochs = NULL,   home_dir = NULL,   verbose = TRUE,   save.out = TRUE )"},{"path":"https://istallworthy.github.io/devMSMs/reference/fitModel.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Fit outcome model — fitModel","text":"data data wide format : data frame, list imputed data frames, mids object weights list IPTW weights output createWeights() exposure name exposure variable exposure_time_pts list integers weights created/assessed correspond time points exposure measured outcome name outcome variable \".timepoint\" suffix model character indicating one following outcome models: \"m0\" (exposure main effects) \"m1\" (exposure main effects & covariates) \"m2\" (exposure main effects & interactions) \"m3\" (exposure main effects, interactions, & covariates) family (optional) family function specification svyglm model link (optional) character link function specification svyglm model int_order integer specification highest order exposure main effects interaction, required interaction models (\"m2\", \"m3\") covariates list characters reflecting variable names covariates, required covariate models (\"m1\", \"m3\") epochs (optional) data frame exposure epoch labels values home_dir path home directory (required 'save.' = TRUE) verbose (optional) TRUE FALSE indicator user output (default TRUE) save.(optional) TRUE FALSE indicator save output intermediary output locally (default TRUE)","code":""},{"path":"https://istallworthy.github.io/devMSMs/reference/fitModel.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Fit outcome model — fitModel","text":"list svyglm model output","code":""},{"path":[]},{"path":"https://istallworthy.github.io/devMSMs/reference/fitModel.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Fit outcome model — fitModel","text":"","code":"f <- createFormulas(exposure = \"A\",                     exposure_time_pts = c(1, 2, 3),                     outcome = \"D.3\",                     tv_confounders = c(\"A.1\", \"A.2\", \"A.3\", \"B.1\", \"B.2\", \"B.3\"),                     ti_confounders = \"C\",                     type = \"full\",                     save.out = FALSE) #> USER ALERT: Please manually inspect the full balancing formula below: #> The full formula for A - D.3 at A time point 1 is:  #> A.1 ~ C #> <environment: 0x563d1318f3a8> #>  #> USER ALERT: Please manually inspect the full balancing formula below: #> The full formula for A - D.3 at A time point 2 is:  #> A.2 ~ A.1 + B.1 + C #> <environment: 0x563d1318f3a8> #>  #> USER ALERT: Please manually inspect the full balancing formula below: #> The full formula for A - D.3 at A time point 3 is:  #> A.3 ~ A.1 + A.2 + B.1 + B.2 + C #> <environment: 0x563d1318f3a8> #>   test <- data.frame(ID = 1:50,                    A.1 = rnorm(n = 50),                    A.2 = rnorm(n = 50),                    A.3 = rnorm(n = 50),                    B.1 = rnorm(n = 50),                    B.2 = rnorm(n = 50),                    B.3 = rnorm(n = 50),                    C = rnorm(n = 50),                    D.3 = rnorm(n = 50)) test[, c(\"A.1\", \"A.2\", \"A.3\")] <- lapply(test[, c(\"A.1\", \"A.2\", \"A.3\")], as.numeric)  w <- createWeights(data = test,                    exposure = \"A\",                    outcome = \"D.3\",                    formulas = f,                    save.out = FALSE) #> For the cbps weighting method, the median weight value is 0.98 (SD = 0.43; range = 0.32-3).  #>    m <- fitModel(data = test,               weights = w,               exposure = \"A\",               exposure_time_pts = c(1, 2, 3),               outcome = \"D.3\",               model = \"m0\",               save.out = FALSE) #> Please inspect the following likelihood ratio test to determine if the exposures collective predict significant variation in the outcome compared to a model without exposure terms. #>  #> We strongly suggest not conducting history comparisons if the likelihood ratio test is non-significant. #>  #> Working (Rao-Scott+F) LRT for A.1 A.2 A.3 #>  in svyglm(formula = as.formula(f), design = s, family = fam) #> Working 2logLR =  2.607591 p= 0.44653  #> (scale factors:  1.4 1.2 0.47 );  denominator df= 46 #>  #> The marginal model, m0, is summarized below: m <- fitModel(data = test,               weights = w,               exposure = \"A\",               exposure_time_pts = c(1, 2, 3),               outcome = \"D.3\",               model = \"m0\",               family = gaussian,               link = \"identity\",               epochs = data.frame(epochs = c(\"Infancy\", \"Toddlerhood\"),                                   values = I(list(c(1, 2), c(3)))),               save.out = FALSE) #> Please inspect the following likelihood ratio test to determine if the exposures collective predict significant variation in the outcome compared to a model without exposure terms. #>  #> We strongly suggest not conducting history comparisons if the likelihood ratio test is non-significant. #>  #> Working (Rao-Scott+F) LRT for A.Infancy A.Toddlerhood #>  in svyglm(formula = as.formula(f), design = s, family = fam) #> Working 2logLR =  2.850197 p= 0.2377  #> (scale factors:  1.4 0.58 );  denominator df= 47 #>  #> The marginal model, m0, is summarized below: m <- fitModel(data = test,               weights = w,               exposure = \"A\",               exposure_time_pts = c(1, 2, 3),               outcome = \"D.3\",               model = \"m1\",               covariates = \"C\",               save.out = FALSE) #> Please inspect the following likelihood ratio test to determine if the exposures collective predict significant variation in the outcome compared to a model without exposure terms. #>  #> We strongly suggest not conducting history comparisons if the likelihood ratio test is non-significant. #>  #> Working (Rao-Scott+F) LRT for A.1 A.2 A.3 #>  in svyglm(formula = as.formula(f), design = s, family = fam) #> Working 2logLR =  2.372983 p= 0.48692  #> (scale factors:  1.4 1.1 0.49 );  denominator df= 45 #>  #> The marginal model, m1, is summarized below: m <- fitModel(data = test,               weights = w,               exposure = \"A\",               exposure_time_pts = c(1, 2, 3),               outcome = \"D.3\",               model = \"m2\",               int_order = 3,               save.out = FALSE) #> Please inspect the following likelihood ratio test to determine if the exposures collective predict significant variation in the outcome compared to a model without exposure terms. #>  #> We strongly suggest not conducting history comparisons if the likelihood ratio test is non-significant. #>  #> Working (Rao-Scott+F) LRT for A.1 A.2 A.3 A.1:A.2 A.1:A.3 A.2:A.3 A.1:A.2:A.3 #>  in svyglm(formula = as.formula(f), design = s, family = fam) #> Working 2logLR =  11.95235 p= 0.14986  #> (scale factors:  2 1.7 1.3 0.92 0.62 0.24 0.15 );  denominator df= 42 #>  #> The marginal model, m2, is summarized below: m <- fitModel(data = test,               weights = w,               exposure = \"A\",               exposure_time_pts = c(1, 2, 3),               outcome = \"D.3\",               model = \"m3\",               int_order = 3,               covariates = \"C\",               save.out = FALSE) #> Please inspect the following likelihood ratio test to determine if the exposures collective predict significant variation in the outcome compared to a model without exposure terms. #>  #> We strongly suggest not conducting history comparisons if the likelihood ratio test is non-significant. #>  #> Working (Rao-Scott+F) LRT for A.1 A.2 A.3 A.1:A.2 A.1:A.3 A.2:A.3 A.1:A.2:A.3 #>  in svyglm(formula = as.formula(f), design = s, family = fam) #> Working 2logLR =  9.699737 p= 0.24085  #> (scale factors:  2.1 1.7 1.3 0.86 0.67 0.24 0.15 );  denominator df= 41 #>  #> The marginal model, m3, is summarized below:"},{"path":"https://istallworthy.github.io/devMSMs/reference/getModel.html","id":null,"dir":"Reference","previous_headings":"","what":"Fits outcome model — getModel","title":"Fits outcome model — getModel","text":"Fits outcome model","code":""},{"path":"https://istallworthy.github.io/devMSMs/reference/getModel.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Fits outcome model — getModel","text":"","code":"getModel(   d,   exposure,   exposure_time_pts,   outcome,   exp_epochs,   int_order,   model,   fam,   covariates,   verbose,   epochs = NULL )"},{"path":"https://istallworthy.github.io/devMSMs/reference/getModel.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Fits outcome model — getModel","text":"d wide data frame exposure name exposure variable exposure_time_pts list integers weights created/assessed correspond time points exposure measured outcome name outcome variable \".timepoint\" suffix exp_epochs list exposure epochs int_order integer specification highest order exposure main effects interaction interaction models model character indicating one following outcome models: \"m0\" (exposure main effects) \"m1\" (exposure main effects & covariates) \"m2\" (exposure main effects & interactions) \"m3\" (exposure main effects, interactions, & covariates) \"covs\" (covariate model) \"int\" (intercept model) fam function specification svyglm model covariates list characters reflecting variable names covariates covariate models verbose TRUE FALSE indicator user output (default TRUE) epochs data frame exposure epoch labels values","code":""},{"path":"https://istallworthy.github.io/devMSMs/reference/getModel.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Fits outcome model — getModel","text":"list fitted model(s)","code":""},{"path":"https://istallworthy.github.io/devMSMs/reference/getModel.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Fits outcome model — getModel","text":"","code":"test <- data.frame(ID = 1:50,                    A.1 = rnorm(n = 50),                    A.2 = rnorm(n = 50),                    A.3 = rnorm(n = 50),                    B.1 = rnorm(n = 50),                    B.2 = rnorm(n = 50),                    B.3 = rnorm(n = 50),                    C = rnorm(n = 50),                    D.3 = rnorm(n = 50)) test[, c(\"A.1\", \"A.2\", \"A.3\")] <- lapply(test[, c(\"A.1\", \"A.2\", \"A.3\")], as.numeric)  f <- createFormulas(exposure = \"A\",                     exposure_time_pts = c(1, 2, 3),                     outcome = \"D.3\",                     tv_confounders = c(\"A.1\", \"A.2\", \"A.3\", \"B.1\", \"B.2\", \"B.3\"),                     ti_confounders = \"C\",                     type = \"full\",                     save.out = FALSE) #> USER ALERT: Please manually inspect the full balancing formula below: #> The full formula for A - D.3 at A time point 1 is:  #> A.1 ~ C #> <environment: 0x563d12eb7090> #>  #> USER ALERT: Please manually inspect the full balancing formula below: #> The full formula for A - D.3 at A time point 2 is:  #> A.2 ~ A.1 + B.1 + C #> <environment: 0x563d12eb7090> #>  #> USER ALERT: Please manually inspect the full balancing formula below: #> The full formula for A - D.3 at A time point 3 is:  #> A.3 ~ A.1 + A.2 + B.1 + B.2 + C #> <environment: 0x563d12eb7090> #>   w <- createWeights(data = test,                    exposure = \"A\",                    outcome = \"D.3\",                    formulas = f,                    save.out = FALSE) #> For the cbps weighting method, the median weight value is 0.98 (SD = 0.63; range = 0.41-4).  #>    epochs = data.frame(epochs = c(\"Infancy\", \"Toddlerhood\"),                     values = I(list(c(1, 2), c(3)))) e <- apply(expand.grid(\"A\", as.character(epochs[, 1])), 1,            paste, sep = \"\", collapse = \".\") test$weights <- w[[1]]$weights  g <- getModel(d = test,               exposure = \"A\",               exposure_time_pts = c(1, 2, 3),               outcome = \"D.3\",               epochs = epochs,               exp_epochs = e,               fam = gaussian,               model = \"m0\")"},{"path":"https://istallworthy.github.io/devMSMs/reference/get_comparison_values.html","id":null,"dir":"Reference","previous_headings":"","what":"Finds custom comparison values — get_comparison_values","title":"Finds custom comparison values — get_comparison_values","text":"Finds custom comparison values","code":""},{"path":"https://istallworthy.github.io/devMSMs/reference/get_comparison_values.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Finds custom comparison values — get_comparison_values","text":"","code":"get_comparison_values(d, comp_histories)"},{"path":"https://istallworthy.github.io/devMSMs/reference/get_comparison_values.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Finds custom comparison values — get_comparison_values","text":"d data frame high low values per exposure main effect comp_histories comparison sequence(s) \"h\" /\"l\" (e.g., \"h-h-h\")","code":""},{"path":"https://istallworthy.github.io/devMSMs/reference/get_comparison_values.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Finds custom comparison values — get_comparison_values","text":"comparison values","code":""},{"path":"https://istallworthy.github.io/devMSMs/reference/get_comparison_values.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Finds custom comparison values — get_comparison_values","text":"","code":"d <- data.frame(e = c(\"A.1\", \"A.2\", \"A.3\"),                l = c(0, 0, 0),                h = c(1, 1, 1)) r <- get_comparison_values(d = d,                           comp_histories = \"l-l-l\" ) r <- get_comparison_values(d = d,                           comp_histories = \"h-h-h\" ) r <- get_comparison_values(d = d,                          comp_histories = c(\"h-h-h\", \"h-h-l\"))"},{"path":"https://istallworthy.github.io/devMSMs/reference/get_reference_values.html","id":null,"dir":"Reference","previous_headings":"","what":"Finds custom reference values — get_reference_values","title":"Finds custom reference values — get_reference_values","text":"Finds custom reference values","code":""},{"path":"https://istallworthy.github.io/devMSMs/reference/get_reference_values.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Finds custom reference values — get_reference_values","text":"","code":"get_reference_values(d, reference)"},{"path":"https://istallworthy.github.io/devMSMs/reference/get_reference_values.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Finds custom reference values — get_reference_values","text":"d data frame high low values per exposure main effect reference reference sequence \"h\" /\"l\" (e.g., \"h-h-h\")","code":""},{"path":"https://istallworthy.github.io/devMSMs/reference/get_reference_values.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Finds custom reference values — get_reference_values","text":"reference values","code":""},{"path":"https://istallworthy.github.io/devMSMs/reference/get_reference_values.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Finds custom reference values — get_reference_values","text":"","code":"d <- data.frame(e = c(\"A.1\", \"A.2\", \"A.3\"),                l = c(0, 0, 0),                h = c(1, 1, 1)) r <- get_reference_values(d = d,                           reference = \"l-l-l\" ) r <- get_reference_values(d = d,                           reference = \"h-h-h\" )"},{"path":"https://istallworthy.github.io/devMSMs/reference/make_love_plot.html","id":null,"dir":"Reference","previous_headings":"","what":"Create love plots showing balancing statistics — make_love_plot","title":"Create love plots showing balancing statistics — make_love_plot","text":"Create love plots showing balancing statistics","code":""},{"path":"https://istallworthy.github.io/devMSMs/reference/make_love_plot.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create love plots showing balancing statistics — make_love_plot","text":"","code":"make_love_plot(   balance_stats,   exposure,   exposure_time_pt,   exposure_type,   k = 0,   form_name,   data_type,   balance_thresh,   weights_method,   imp_conf,   save.out = FALSE,   home_dir = NULL,   folder = NULL,   verbose = TRUE )"},{"path":"https://istallworthy.github.io/devMSMs/reference/make_love_plot.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create love plots showing balancing statistics — make_love_plot","text":"balance_stats data frame balance statistics exposure name exposure variable exposure_time_pt exposure time point integer exposure_type character indicating binary continuous exposure type k imputation number form_name formula name data_type single imputed data type balance_thresh one two numbers 0 1 indicating single balancing threshold thresholds less important confounders, respectively weights_method method character string WeightItMSM() balancing method abbreviation imp_conf list variable names reflecting important confounders save.TRUE FALSE indicator save output intermediary output locally home_dir path home directory (required save.= TRUE) folder folder path saving verbose (optional) TRUE FALSE indicator user output (default TRUE)","code":""},{"path":"https://istallworthy.github.io/devMSMs/reference/make_love_plot.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create love plots showing balancing statistics — make_love_plot","text":"none","code":""},{"path":"https://istallworthy.github.io/devMSMs/reference/make_love_plot.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Create love plots showing balancing statistics — make_love_plot","text":"","code":"f <- createFormulas(exposure = \"A\",                     exposure_time_pts = c(1, 2, 3),                     outcome = \"D.3\",                     tv_confounders = c(\"A.1\", \"A.2\", \"A.3\", \"B.1\", \"B.2\", \"B.3\"),                     ti_confounders = \"C\",                     type = \"full\",                     save.out = FALSE) #> USER ALERT: Please manually inspect the full balancing formula below: #> The full formula for A - D.3 at A time point 1 is:  #> A.1 ~ C #> <environment: 0x563d157750b8> #>  #> USER ALERT: Please manually inspect the full balancing formula below: #> The full formula for A - D.3 at A time point 2 is:  #> A.2 ~ A.1 + B.1 + C #> <environment: 0x563d157750b8> #>  #> USER ALERT: Please manually inspect the full balancing formula below: #> The full formula for A - D.3 at A time point 3 is:  #> A.3 ~ A.1 + A.2 + B.1 + B.2 + C #> <environment: 0x563d157750b8> #>   test <- data.frame(ID = 1:50,                    A.1 = rnorm(n = 50),                    A.2 = rnorm(n = 50),                    A.3 = rnorm(n = 50),                    B.1 = rnorm(n = 50),                    B.2 = rnorm(n = 50),                    B.3 = rnorm(n = 50),                    C = rnorm(n = 50),                    D.3 = rnorm(n = 50)) test[, c(\"A.1\", \"A.2\", \"A.3\")] <- lapply(test[, c(\"A.1\", \"A.2\", \"A.3\")], as.numeric)  w <- createWeights(data = test,                    exposure = \"A\",                    outcome = \"D.3\",                    formulas = f,                    save.out = FALSE) #> For the cbps weighting method, the median weight value is 1 (SD = 0.46; range = 0.45-3).  #>    b <- assessBalance(data = test,                    exposure = \"A\",                    exposure_time_pts = c(1, 2, 3),                    outcome = \"D.3\",                    type = \"weighted\",                    weights = w,                    formulas = f,                    save.out = FALSE) #> USER ALERT: The following statistics display covariate imbalance at each exposure time point following IPTW weighting, using full formulas. #>     #> As shown below, 3 out of 9 (33%) covariates across time points, corresponding to 2 out of 3 domains, remain imbalanced with a remaining median absolute value correlation/std mean difference of 0.22 (range= 0.12-0.22): #>  #> Table: Imbalanced covariates using cbps and full formulas #>  #> | exp_time| balanced_n| imbalanced_n|  n| #> |--------:|----------:|------------:|--:| #> |        1|          0|            1|  1| #> |        2|          2|            1|  3| #> |        3|          4|            1|  5| #>  #>  #> USER ALERT: For exposure A using the full formulas and cbps : #> The median absolute value relation between exposure and confounder is 0.05 (range = -0.07 -0.22).  #> As shown below, the following 3 covariates across time points out of 9 total (33.33%) spanning 2 domains out of 3 (66.67%) are imbalanced with a remaining median absolute value correlation/std mean difference in relation to A of 0.22 (range=0.12-0.22) : #>  #>  #> Table: Imbalanced Covariates #>  #> |   |exposure | exp_time| covar_time|covariate |   avg_bal| bal_thresh| balanced| #> |:--|:--------|--------:|----------:|:---------|---------:|----------:|--------:| #> |1  |A        |        1|          0|C         | 0.2210566|        0.1|        0| #> |2  |A        |        2|          1|A.1       | 0.2234768|        0.1|        0| #> |6  |A        |        3|          2|A.2       | 0.1161124|        0.1|        0| #>   make_love_plot(balance_stats = b,                exposure = \"A\",                exposure_time_pt = 1,                exposure_type = \"continuous\",                form_name = \"form_name\",                data_type = \"single\",                balance_thresh = 0.1,                imp_conf = NULL,                weights_method = w[[1]]$method,                save.out = FALSE,                folder = \"prebalance/\")   make_love_plot(balance_stats = b,                exposure = \"A\",                exposure_time_pt = 2,                exposure_type = \"continuous\",                form_name = \"form_name\",                data_type = \"single\",                balance_thresh = c(0.05, 0.1),                imp_conf = \"A.2\",                weights_method = w[[1]]$method,                save.out = FALSE,                folder = \"weighted/\")"},{"path":"https://istallworthy.github.io/devMSMs/reference/perform_multiple_comparison_correction.html","id":null,"dir":"Reference","previous_headings":"","what":"Conduct multiple comparison correction — perform_multiple_comparison_correction","title":"Conduct multiple comparison correction — perform_multiple_comparison_correction","text":"Conduct multiple comparison correction","code":""},{"path":"https://istallworthy.github.io/devMSMs/reference/perform_multiple_comparison_correction.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Conduct multiple comparison correction — perform_multiple_comparison_correction","text":"","code":"perform_multiple_comparison_correction(   comps,   reference,   comp_histories,   method,   verbose = TRUE )"},{"path":"https://istallworthy.github.io/devMSMs/reference/perform_multiple_comparison_correction.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Conduct multiple comparison correction — perform_multiple_comparison_correction","text":"comps table reference reference sequence \"h\" /\"l\" (e.g., \"h-h-h\") comp_histories comparison sequence(s) \"h\" /\"l\" (e.g., \"h-h-h\") method character abbreviation multiple comparison correction method verbose (optional) TRUE FALSE indicator user output (default TRUE)","code":""},{"path":"https://istallworthy.github.io/devMSMs/reference/perform_multiple_comparison_correction.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Conduct multiple comparison correction — perform_multiple_comparison_correction","text":"comparison table corrected p-values","code":""},{"path":"https://istallworthy.github.io/devMSMs/reference/trimWeights.html","id":null,"dir":"Reference","previous_headings":"","what":"Trim IPTW balancing weights — trimWeights","title":"Trim IPTW balancing weights — trimWeights","text":"Trims IPTW balancing weights heavy right tails populating weight values given quantile weight value quantile.","code":""},{"path":"https://istallworthy.github.io/devMSMs/reference/trimWeights.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Trim IPTW balancing weights — trimWeights","text":"","code":"trimWeights(   exposure,   outcome,   weights,   quantile = NA,   home_dir = NULL,   verbose = TRUE,   save.out = TRUE )"},{"path":"https://istallworthy.github.io/devMSMs/reference/trimWeights.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Trim IPTW balancing weights — trimWeights","text":"exposure name exposure variable outcome name outcome variable \".timepoint\" suffix weights list IPTW weights output createWeights() quantile (optional) numeric value 0 1 quantile value trim weights (default 0.95) home_dir path home directory (required save.= TRUE) verbose (optional) TRUE FALSE indicator user output (default TRUE) save.(optional) TRUE FALSE indicator save output intermediary output locally (default TRUE)","code":""},{"path":"https://istallworthy.github.io/devMSMs/reference/trimWeights.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Trim IPTW balancing weights — trimWeights","text":"list model output trimmed weights","code":""},{"path":[]},{"path":"https://istallworthy.github.io/devMSMs/reference/trimWeights.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Trim IPTW balancing weights — trimWeights","text":"","code":"f <- createFormulas(exposure = \"A\",                     exposure_time_pts = c(1, 2, 3),                     outcome = \"D.3\",                     tv_confounders = c(\"A.1\", \"A.2\", \"A.3\", \"B.1\", \"B.2\", \"B.3\"),                     ti_confounders = \"C\",                     type = \"full\",                     save.out = FALSE) #> USER ALERT: Please manually inspect the full balancing formula below: #> The full formula for A - D.3 at A time point 1 is:  #> A.1 ~ C #> <environment: 0x563d11c5fc78> #>  #> USER ALERT: Please manually inspect the full balancing formula below: #> The full formula for A - D.3 at A time point 2 is:  #> A.2 ~ A.1 + B.1 + C #> <environment: 0x563d11c5fc78> #>  #> USER ALERT: Please manually inspect the full balancing formula below: #> The full formula for A - D.3 at A time point 3 is:  #> A.3 ~ A.1 + A.2 + B.1 + B.2 + C #> <environment: 0x563d11c5fc78> #>   test <- data.frame(ID = 1:50,                    A.1 = rnorm(n = 50),                    A.2 = rnorm(n = 50),                    A.3 = rnorm(n = 50),                    B.1 = rnorm(n = 50),                    B.2 = rnorm(n = 50),                    B.3 = rnorm(n = 50),                    C = rnorm(n = 50),                    D.3 = rnorm(n = 50))  w <- createWeights(data = test,                    exposure = \"A\",                    outcome = \"D.3\",                    formulas = f,                    save.out = FALSE) #> For the cbps weighting method, the median weight value is 0.91 (SD = 0.5; range = 0.19-3).  #>    t <- trimWeights(exposure = \"A\",                  outcome = \"D.3\",                  weights = w,                  save.out = FALSE) #> Trimming weights to 95%. #>  #> For the A-D.3 relation, following trimming at the 0.95 quantile, the median weight value is 0.91 (SD= 0.47; range= 0.19-2).  #>   t <- trimWeights(exposure = \"A\",                  outcome = \"D.3\",                  weights = w,                  quantile = 0.75,                  save.out = FALSE) #> Trimming weights to 75%. #>  #> For the A-D.3 relation, following trimming at the 0.75 quantile, the median weight value is 0.91 (SD= 0.28; range= 0.19-1).  #>"}]
