[{"path":"https://istallworthy.github.io/devMSMs/articles/Data_Requirements.html","id":"references","dir":"Articles","previous_headings":"","what":"References","title":"Data Requirements","text":"Burchinal, M., Howes, C., Pianta, R., Bryant, D., Early, D., Clifford, R., & Barbarin, O. (2008). Predicting Child Outcomes End Kindergarten Quality Pre-Kindergarten Teacher–Child Interactions Instruction. Applied Developmental Science, 12(3), 140–153. https://doi.org/10.1080/10888690802199418 Kainz, K., Greifer, N., Givens, ., Swietek, K., Lombardi, B. M., Zietz, S., & Kohn, J. L. (2017). Improving Causal Inference: Recommendations Covariate Selection Balance Propensity Score Methods. Journal Society Social Work Research, 8(2), 279–303. https://doi.org/10.1086/691464 Vernon-Feagans, L., Cox, M., Willoughby, M., Burchinal, M., Garrett-Peters, P., Mills-Koonce, R., Garrett-Peiers, P., Conger, R. D., & Bauer, P. J. (2013). Family Life Project: Epidemiological Developmental Study Young Children Living Poor Rural Communities. Monographs Society Research Child Development, 78(5), –150.","code":""},{"path":"https://istallworthy.github.io/devMSMs/articles/Preliminary_Steps.html","id":"core-inputs","dir":"Articles","previous_headings":"","what":"Core inputs","title":"Preliminary Steps","text":"Please see Specifying Core Inputs vignette detail following core inputs. , use ESETA1, measure economic strain experienced family, exposure StrDif_Tot, behavior problems measured SDQ, outcome.  helper functions optional arguments suppress saving output locally (save.= FALSE) printing console ( verbose = FALSE). defaults arguments TRUE. Users must supply path home directory save.= TRUE.  Users several options reading data. can begin workflow following options: * long data missingness can can formatted converted wide data (P1a) imputation (P2) wide missingness can formatted (P1b) imputing (P2) data already imputed wide format can read list (P2). data missingness (P3)","code":"set.seed(1234)  home_dir <- NA # home_dir <- '/Users/isabella/Library/CloudStorage/Box-Box/BSL General/MSMs/testing/isa' #note: no / after  exposure <- \"ESETA1\"  exposure_time_pts <- c(6, 15, 24, 35, 58)  outcome <- \"StrDif_Tot.58\"  tv_confounders <- c(\"SAAmylase.6\",\"SAAmylase.15\", \"SAAmylase.24\",                     \"MDI.6\", \"MDI.15\",                                                                 \"RHasSO.6\", \"RHasSO.15\", \"RHasSO.24\",\"RHasSO.35\", \"RHasSO.58\",                                                              \"WndNbrhood.6\",\"WndNbrhood.24\", \"WndNbrhood.35\", \"WndNbrhood.58\",                                                            \"IBRAttn.6\", \"IBRAttn.15\", \"IBRAttn.24\",                                                        \"B18Raw.6\", \"B18Raw.15\", \"B18Raw.24\", \"B18Raw.58\",                                                                \"HOMEETA1.6\", \"HOMEETA1.15\", \"HOMEETA1.24\", \"HOMEETA1.35\", \"HOMEETA1.58\",                                                    \"InRatioCor.6\", \"InRatioCor.15\", \"InRatioCor.24\", \"InRatioCor.35\", \"InRatioCor.58\",                                              \"ESETA1.6\", \"ESETA1.15\", \"ESETA1.24\", \"ESETA1.35\", \"ESETA1.58\",                                    \"CORTB.6\", \"CORTB.15\", \"CORTB.24\",                                                                                       \"EARS_TJo.24\", \"EARS_TJo.35\",                                                             \"LESMnPos.24\", \"LESMnPos.35\",                                                       \"LESMnNeg.24\", \"LESMnNeg.35\",                            \"StrDif_Tot.35\", \"StrDif_Tot.58\",                         \"fscore.35\", \"fscore.58\" )   #required ti_confounders <- c(\"state\", \"BioDadInHH2\", \"PmAge2\", \"PmBlac2\", \"TcBlac2\", \"PmMrSt2\", \"PmEd2\", \"KFASTScr\",                     \"RMomAgeU\", \"RHealth\", \"HomeOwnd\", \"SWghtLB\", \"SurpPreg\", \"SmokTotl\", \"DrnkFreq\",                     \"peri_health\", \"caregiv_health\", \"gov_assist\"                     #, \"state:SmokTotl\", \"PmAge2:PmBlac2\", \"PmAge2:PmEd2\" #testing interaction terms ) save.out = FALSE  verbose = TRUE"},{"path":"https://istallworthy.github.io/devMSMs/articles/Preliminary_Steps.html","id":"p1--data-with-missingness","dir":"Articles","previous_headings":"","what":"P1. Data with Missingness","title":"Preliminary Steps","text":"data humans degree missing data.","code":""},{"path":"https://istallworthy.github.io/devMSMs/articles/Preliminary_Steps.html","id":"p1a--a-single-data-frame-of-long-data-with-missingness","dir":"Articles","previous_headings":"P1. Data with Missingness","what":"P1a. A single data frame of long data with missingness","title":"Preliminary Steps","text":"Users beginning single data frame long format (missingness) can utilize helper function formatLongData() summarize exposure outcome data convert required variable names. First, load simulated longitudinal data long format (missingness) accompanies devMSMs. data simulated based data Family Life Project (FLP), longitudinal study following 1,292 families representative two geographic areas (three counties North Carolina three counties Pennsylvania) high rural child poverty (Vernon-Feagans et al., 2013; Burchinal et al., 2008).  formatLongData() takes dataset long format. allows users supply existing variables time (time_var), ID (id_var), missing data (missing) re-naming according required package. also allows user submit variables factors integers, function classes factor confounders (factor_confounders) factors, integer confounders (integer_confounders) integers data, others numeric. , format simulated long FLP data. get descriptive statistics summary exposure, ESETA1, outcome, StrDif_Tot.58, visual inspections.  Users correctly formatted data long format option using following code transform data wide format, proceed using package (missing data) imputing (< 20% missing data MAR). transform newly formatted long data wide format, specifying idvar “ID”, timevar “WAVE”, supplying time points (encompassing exposure, confounder, outcome time points) data 6, 15, 24, 35, 58 times.","code":"data(\"sim_data_long_miss\", package = \"devMSMs\")  data_long <- sim_data_long_miss  head(data_long, n = c(5, 10)) #>   ID state BioDadInHH2 PmAge2 PmBlac2 TcBlac2 PmMrSt2 PmEd2 KFASTScr RMomAgeU #> 1  1     0           1 27.245       0       0       1    15       24       29 #> 2  1     0           1 27.245       0       0       1    15       24       29 #> 3  1     0           1 27.245       0       0       1    15       24       29 #> 4  1     0           1 27.245       0       0       1    15       24       29 #> 5  1     0           1 27.245       0       0       1    15       24       29 factor_confounders = c(\"state\", \"TcBlac2\",\"BioDadInHH2\",\"HomeOwnd\", \"PmBlac2\",                               \"PmMrSt2\", \"SurpPreg\", \"RHealth\", \"SmokTotl\", \"DrnkFreq\",                        \"RHasSO\")  integer_confounders = c(\"KFASTScr\", \"PmEd2\", \"RMomAgeU\", \"SWghtLB\", \"peri_health\", \"caregiv_health\" ,                          \"gov_assist\", \"B18Raw\", \"EARS_TJo\", \"MDI\")  data_long_f <- formatLongData(data = data_long, exposure = exposure,                                exposure_time_pts = exposure_time_pts, outcome = outcome,                                time_var = \"WAVE\",                                id_var = \"ID\",                                                               missing = NA,                               factor_confounders = factor_confounders,                                   integer_confounders = integer_confounders,                                home_dir = home_dir,                                save.out = save.out)  #> Table: Summary of ESETA1 Exposure Information #>  #> |WAVE |      mean|        sd|    min|   max| #> |:----|---------:|---------:|------:|-----:| #> |15   | 0.2983433| 0.9261390| -2.699| 3.474| #> |24   | 0.1585387| 0.9575181| -2.858| 3.284| #> |35   | 0.1388395| 0.9475905| -3.046| 3.014| #> |58   | 0.0996006| 0.9924516| -2.478| 3.173| #> |6    | 0.3337979| 0.9298080| -2.809| 4.035| #>  #> Table: Summary of Outcome StrDif_Tot.58 Information #>  #> |WAVE |      mean|        sd|    min|   max| #> |:----|---------:|---------:|------:|-----:| #> |35   | 0.6009797| 0.2830620| -0.230| 1.536| #> |58   | 0.5029778| 0.2931918| -0.281| 1.448| #> Warning in formatLongData(data = data_long, exposure = exposure, #> exposure_time_pts = exposure_time_pts, : The following variables are #> characters. Please change them to integers and re-run: WAVE  head(data_long_f, n = c(5, 10)) #>   ID state BioDadInHH2 PmAge2 PmBlac2 TcBlac2 PmMrSt2 PmEd2 KFASTScr RMomAgeU #> 1  1     0           1 27.245       0       0       1    15       24       29 #> 2  1     0           1 27.245       0       0       1    15       24       29 #> 3  1     0           1 27.245       0       0       1    15       24       29 #> 4  1     0           1 27.245       0       0       1    15       24       29 #> 5  1     0           1 27.245       0       0       1    15       24       29 require(\"stats\", quietly = TRUE)  v <- sapply(strsplit(tv_confounders[!grepl(\"\\\\:\", tv_confounders)], \"\\\\.\"), \"[\", 1) v <- v[!duplicated(v)]  data_wide <- stats::reshape(data = data_long_f,                              idvar = \"ID\",                             v.names = v,                              timevar = \"WAVE\",                             times = c(6, 15, 24, 35, 58),                              direction = \"wide\")  data_wide <- data_wide[, colSums(is.na(data_wide)) < nrow(data_wide)]  head(data_wide, n = c(5, 10)) #>      ID state BioDadInHH2 PmAge2 PmBlac2 TcBlac2 PmMrSt2 PmEd2 KFASTScr #> 1     1     0           1 27.245       0       0       1    15       24 #> 6    10     1           0 16.014       0       1       0    13       18 #> 11  100     1           0 31.042       1       1       1    14       15 #> 16 1000     1           0 23.597       1       1       1    10       14 #> 21 1001     1           0 25.592       1       1       1    13       23 #>    RMomAgeU #> 1        29 #> 6        30 #> 11       25 #> 16       31 #> 21       27"},{"path":"https://istallworthy.github.io/devMSMs/articles/Preliminary_Steps.html","id":"p1b--a-single-data-frame-of-wide-data-with-missingness","dir":"Articles","previous_headings":"P1. Data with Missingness","what":"P1b. A single data frame of wide data with missingness","title":"Preliminary Steps","text":"Alternatively, start single data frame wide data missingness already formatted, read simulated wide FLP data missingness. Users beginning single data frame long format (missingness) can utilize helper function formatWideData() summarize exposure outcome data convert required variable names. formatWideData() allows users supply existing variables ID (id_var) missing data (missing) re-naming according required package. also allows user submit variables factors integers, function classes factor confounders (factor_confounders) factors, integer confounders (integer_confounders) integers data, others numeric. , format simulated wide FLP data.","code":"data(\"sim_data_wide_miss\", package = \"devMSMs\")  data_wide <- sim_data_wide_miss  head(data_wide,  n = c(5, 10)) #>   ID state TcBlac2 BioDadInHH2 HomeOwnd KFASTScr PmBlac2 PmEd2 PmMrSt2 PmAge2 #> 1  1     0       0           1        1       24       0    15       1 27.245 #> 2  2     1       1           0        2       27       1    17       0 32.292 #> 3  3     0       0           0        3       15       1    13       1 25.588 #> 4  4     1       0           0        2       17       0    14       0 22.664 #> 5  5     0       0           1        1       25       0    20       1 41.153 factor_confounders <- c(\"state\", \"TcBlac2\",\"BioDadInHH2\",\"HomeOwnd\", \"PmBlac2\",                                \"PmMrSt2\", \"SurpPreg\", \"RHealth\", \"SmokTotl\", \"DrnkFreq\",                         \"RHasSO.6\", \"RHasSO.15\", \"RHasSO.24\", \"RHasSO.35\", \"RHasSO.58\") #list factor variables in wide format here  integer_confounders = c(\"KFASTScr\", \"PmEd2\", \"RMomAgeU\", \"SWghtLB\", \"peri_health\", \"caregiv_health\" ,                          \"gov_assist\", \"B18Raw.6\", \"B18Raw.15\", \"B18Raw.24\", \"B18Raw.58\",                          \"EARS_TJo.24\", \"EARS_TJo.35\", \"MDI.6\", \"MDI.15\") #list any integer variables in wide format here  data_wide_f <- formatWideData(data = data_wide, exposure = exposure, exposure_time_pts = exposure_time_pts, outcome = outcome,                                id_var = \"ID\", #list original id variable here if it's not \"ID\"                               missing = NA, #list missing value here                               factor_confounders = factor_confounders,                               integer_confounders = integer_confounders,                               home_dir = home_dir, save.out = save.out)  #> Your outcome variable(s) have the following type(s): data.frame  head(data_wide_f, n = c(5, 10)) #>   ID state TcBlac2 BioDadInHH2 HomeOwnd KFASTScr PmBlac2 PmEd2 PmMrSt2 PmAge2 #> 1  1     0       0           1        1       24       0    15       1 27.245 #> 2  2     1       1           0        2       27       1    17       0 32.292 #> 3  3     0       0           0        3       15       1    13       1 25.588 #> 4  4     1       0           0        2       17       0    14       0 22.664 #> 5  5     0       0           1        1       25       0    20       1 41.153"},{"path":"https://istallworthy.github.io/devMSMs/articles/Preliminary_Steps.html","id":"p2--impute-missing-data-in-wide-format","dir":"Articles","previous_headings":"","what":"P2. Impute Missing Data in Wide Format","title":"Preliminary Steps","text":"functions devMSMs package accept data form single data frame missing values m imputed datasets form either mids object (output mice package via imputeData()) list imputed datasets. developmental data humans amount missing data. Given creation IPTW balancing weights requires complete data, recommend imputing data. Imputation assumes missing data mechanism missing random (MAR) 20% missing data total (Leyrat et al., 2021). Given existing work demonstrating superiority, devMSMS implements ‘within’ approach imputed data, conducting steps imputed dataset pooling estimates using Rubin’s rules create final average predictions contrast comparisons Worfklows vignettes Step 5 (Leyrat et al, 2021; Granger et al., 2019). shown , users can use helper function impute wide data impute elsewhere read imputed data list use devMSMs.","code":""},{"path":"https://istallworthy.github.io/devMSMs/articles/Preliminary_Steps.html","id":"p2a--multiply-impute-single-wide-formatted-data-frame-using-mice","dir":"Articles","previous_headings":"P2. Impute Missing Data in Wide Format","what":"P2a. Multiply impute single wide, formatted data frame using mice","title":"Preliminary Steps","text":"Users option using helper imputeData() function impute correctly formatted wide data. step can take run. user can specify many imputed datasets create (default m = 5). imputeData() draws mice() function mice package (van Buuren & Oudshoorn, 2011) conduct multiple imputation chained equations (mice). variables present dataset used impute missing data column. user can specify imputation method method field drawing following list: “pmm” (predictive mean matching), “midastouch” (weighted predictive mean matching), “sample” (random sample observed values), “rf” (random forest) “cart” (classification regression trees). Random forest imputation default given evidence efficiency superior performance (Shah et al., 2014). Please review mice documentation details. Additionally, users can specify integer value seed order offset random number generator mice() make reproducible imputations. parameter read_imps_from_file allow read already imputed data local storage (TRUE) re-run imputation code multiple times (FALSE; default). Users may use parameter supply mids object imputed data mice package (title ‘all_imp.rds’). sure inspect console warnings well resulting imputed datasets. variables missing data following imputation may need removed due high collinearity /low variability. required inputs function data frame wide format (formatted according pre-requirements listed ), m number imputed datasets create, path home directory (save.= TRUE), exposure (e.g., “variable”), outcome (e.g., “variable.t”). home directory path, exposure, outcome already defined user completed Specifying Core Inputs vignette. optional inputs follows. user can specify imputation method compatible mice() (see ). Additionally, user can specify maxit number interactions mice::mice() conduct (default 5). user can also specify para_proc, logical indicator indicating whether speed imputing using parallel processing (default = TRUE). draws 2 cores using functions parallel, doRNG, doParallel packages. user may also specify additional inputs accepted mice::mice() advise consulting [mice documentation] information. user can also indicate already created imputed datasets function wish read (read_imps_from_file = TRUE rather recreate (default). example, create 5 imputed datasets using default random forest method 0 iterations (just illustrative purposes), set seed reproducibility, assign output data use devMSMs. code takes time run. (Note: given challenges imputing data .rda files, set maxit = 0 just illustrative purposes. recommend setting maxit = 5 (mice default) running data.) inspect output console warnings mice(). mice object can now assigned data use deveMSMs package (see Workflows vignettes).","code":"s <- 1234  m <- 5  method <- \"rf\"   maxit <- 0  imputed_data <- imputeData(data = data_wide, exposure = exposure, outcome = outcome,                             m = m, method = method, maxit = maxit, para_proc = FALSE,                             seed = s, read_imps_from_file = FALSE,                             home_dir = home_dir, save.out = save.out) #> Creating 5 imputed datasets using the rf imputation method in mice::mice(). This may take some time to run.  #>  #>  #> USER ALERT: Please view any logged events from the imputation below:  #> Table: Logged Events from mice::mice  head(mice::complete(imputed_data, 1), n = c(5, 10)) #>   ALI_Le.35 B18Raw.15 B18Raw.24 B18Raw.58 B18Raw.6 BioDadInHH2 caregiv_health #> 1         3         1         1        13        7           1              3 #> 2         2         5        -7         7        0           0              0 #> 3         3         6         5        20       -1           0              3 #> 4         4        24        25        17       11           0              3 #> 5         3        -8        31         0        1           1              2 #>   CORTB.15 CORTB.24 CORTB.6 #> 1   -0.227   -0.652   0.742 #> 2   -0.039   -0.513   0.018 #> 3    1.145    0.033  -0.379 #> 4    0.301   -0.501   0.000 #> 5   -0.247    0.084   0.153  data <- imputed_data"},{"path":"https://istallworthy.github.io/devMSMs/articles/Preliminary_Steps.html","id":"p2b--read-in-as-a-list-of-wide-imputed-data-saved-locally","dir":"Articles","previous_headings":"P2. Impute Missing Data in Wide Format","what":"P2b. Read in as a list of wide imputed data saved locally","title":"Preliminary Steps","text":"Alternatively, user imputed datasets already created using program mice, can read , list, files saved locally .csv files (labeled “1”:m) single folder. list can assigned data use deveMSMs package (see Workflows vignettes). , load list imputed data simulated FLP, example.","code":"# folder <- \"/Users/isabella/Library/CloudStorage/Box-Box/BSL General/MSMs/testing/testing data/continuous outcome/continuous exposure/imputations/\" #  # files <- list.files(folder, full.names = TRUE, pattern = \"\\\\.csv\") #make sure pattern matches suffix of your data #  # data <- lapply(files, function(file) { #   imp_data <- read.csv(file) #   imp_data # })  data(\"sim_data_imp_list\", package = \"devMSMs\")  data <- sim_data_imp_list  head(data[[1]],  n = c(5, 10)) #>   X.1 X ID state TcBlac2 BioDadInHH2 HomeOwnd KFASTScr PmBlac2 PmEd2 #> 1   1 1  1     0       0           1        1       24       0    15 #> 2   2 2  2     1       1           0        2       27       1    17 #> 3   3 3  3     0       0           0        3       15       1    13 #> 4   4 4  4     1       0           0        2       17       0    14 #> 5   5 5  5     0       0           1        1       25       0    20"},{"path":"https://istallworthy.github.io/devMSMs/articles/Preliminary_Steps.html","id":"p3--data-with-no-missingness","dir":"Articles","previous_headings":"","what":"P3. Data with no Missingness","title":"Preliminary Steps","text":"Users missing data can refer Step P1a format long data transform wide Step P1b format wide data use devMSMs. , load single wide data frame simulated FLP example.","code":"data(\"sim_data_wide\", package = \"devMSMs\")  data_wide <- sim_data_wide  head(data_wide,  n = c(5, 10)) #>   ID state TcBlac2 BioDadInHH2 HomeOwnd KFASTScr PmBlac2 PmEd2 PmMrSt2 PmAge2 #> 1  1     0       0           1        1       24       0    15       1 27.245 #> 2  2     1       1           0        2       27       1    17       0 32.292 #> 3  3     0       0           0        3       15       1    13       1 25.588 #> 4  4     1       0           0        2       17       0    14       0 22.664 #> 5  5     0       0           1        1       25       0    20       1 41.153  data <- data_wide"},{"path":"https://istallworthy.github.io/devMSMs/articles/Preliminary_Steps.html","id":"p4--optional-idenitfy-exposure-epochs","dir":"Articles","previous_headings":"","what":"P4. Optional: Idenitfy Exposure Epochs","title":"Preliminary Steps","text":"Users option specify exposure epochs, meaningful periods developmental time many encompass time points exposure measured. user option draw theory structure data specify developmental epochs exposure differ time points exposure collected. specify epochs, users utilize optional epochs argument providing data frame contains two variables: epochs: provide, quotations, list user-created names epoch; values: list, named epoch, provide single integer list integers (exposure time points) constitute epoch. named epoch must corresponding value (values epoch can differ number entries, shown ). user ensure epoch values included exposure_time_pts field. exposure epochs arguments fitModel() compareHistories() devMSMs functions (see Workflows vignettes) specification kept consistent throughout use package vignettes. constitute main effects variables modeling relation exposure outcome (Workflows vignettes Step 5a) form basis estimating comparing exposure histories (Workflows vignettes Step 5b). epochs specified, exposure time points used aforementioned steps. , specify Infancy, Toddlerhood, Childhood epochs correspond 6 15; 24 35; 58 months, respectively.","code":"epochs <- data.frame(epochs = c(\"Infancy\",                                  \"Toddlerhood\",                                  \"Childhood\"),                       values = I(list(c(6, 15),                                       c(24, 35),                                       c(58)                      )))  epochs #>        epochs values #> 1     Infancy  6, 15 #> 2 Toddlerhood 24, 35 #> 3   Childhood     58"},{"path":"https://istallworthy.github.io/devMSMs/articles/Preliminary_Steps.html","id":"p5--recommended-specify-inspect-exposure-histories","dir":"Articles","previous_headings":"","what":"P5. Recommended: Specify & Inspect Exposure Histories","title":"Preliminary Steps","text":"Exposure histories units users test substantive hypotheses, construction determined theoretical practical reasoning. strongly recommend users verify inspect exposure histories priori relation data hypotheses.","code":""},{"path":"https://istallworthy.github.io/devMSMs/articles/Preliminary_Steps.html","id":"p5a--create-high-and-low-cutoff-values-for-continuous-exposures","dir":"Articles","previous_headings":"","what":"P5a. Create high and low cutoff values (for continuous exposures)","title":"Preliminary Steps","text":"First, continuously distributed exposures (regardless whether exposure epochs specified), recommend users indicate high low cutoff values optional input compareHistories()) devMSMs function (see Workflows vignettes). , specify hi_lo_cut, list, quantile value (0-1) considered high levels exposure, followed quantile value (0-1) considered low levels exposure (default median split). values may revised following inspection sample distribution across resulting exposure histories subsequent steps. final values used creating exposure histories Step 5 Workflows vignettes. , specify 60th 30th percentiles demarcate high low levels economic strain exposure, respectively.","code":"hi_lo_cut <- c(0.6, 0.3)"},{"path":"https://istallworthy.github.io/devMSMs/articles/Preliminary_Steps.html","id":"p5b--specify-hypotheses-relevant-exposure-histories","dir":"Articles","previous_headings":"","what":"P5b. Specify hypotheses-relevant exposure histories","title":"Preliminary Steps","text":"strongly recommend users selective histories, developmental sequences high low exposure (exposure time points epochs), vital testing hypotheses. recommend user estimates compares subset possible exposure histories using reference comparison fields (rather comparing possible exposure histories). user can specify custom subset exposure histories using reference comparison fields optional inputs compareHistories() devMSMs function (see Workflows vignettes). conduct customized comparisons, users must provide least one unique valid history (e.g., “l-l-l”) reference , quotations, provide string (list strings) lowercase l’s h’s (separated -), corresponding exposure epoch (time point), signify sequence exposure levels (“low” “high”, respectively). supply reference history, comparisons provide least one unique valid history comparison , quotations, providing string (list strings) l’s h’s (separated “-”), corresponding exposure epoch, signify sequence exposure levels (“low” “high”, respectively) constitutes comparison exposure history/histories compared reference Step 5b Workflows vignettes. supply one comparisons, least one reference must specified. reference exposure history compared comparison history comparisons supplied multiple comparison correction. reference comparison specified, histories compared Step 5b Workflows vignettes. final reference comparison values established step used estimating comparing exposure histories Step 5b Workflows vignettes. 4 exposure main effects (either epochs exposure time points), user required select subset history comparisons (Step 5b Workflows vignettes), given base code (see hypotheses() function marginaleffects package) accommodate pairwise history comparisons 5 time points). , specify low economic strain epochs (“l-l-l”) reference event comparison high levels epochs (“h-h-h”) well histories contain 1 dose exposure high economic strain different epochs.","code":"reference <- c(\"l-l-l\")  comparison <- c(\"h-h-h\", \"l-l-h\", \"h-l-l\", \"l-h-l\")"},{"path":"https://istallworthy.github.io/devMSMs/articles/Preliminary_Steps.html","id":"p5c--inspect-exposure-histories-and-data","dir":"Articles","previous_headings":"","what":"P5c. Inspect exposure histories and data","title":"Preliminary Steps","text":"users, highly recommend use helper inspectData() function (complete dataset long wide format imputed data case missingness) summarize exposure, outcome, confounders inspect sample distribution among exposure histories. Based user-specified exposure epochs high low quantile values (continuous exposures), function outputs table showing sample distribution across histories. strongly suggest visually inspecting table revising designation epochs /high low quantile values (continuous exposures) history contains reasonable number participants. gold standard required number per history cell, users guard extrapolation beyond scope data. example, data, using 75th 25th percentile cutoffs, histories represented less two cases thus re-evaluated cutoffs. Users may wish revise epoch designation high low cutoff values, applicable. function conducts summaries history distribution inspection imputed dataset imputed data supplied.  required inputs inspectData() : complete data (data frame wide long format, list imputed data frames wide format, mids object), exposure (e.g., “variable”), outcome (e.g., “variable.t”). Optional inputs home directory (save.= TRUE), epochs, high/low cutoff values continuous exposures, specification reference comparison histories. helper inspectData() function outputs following files home directory: correlation plot variables dataset, tables exposure outcome descriptive statistics, two summary tables confounders considered time point. , see summaries data types well reasonable cell counts specified histories, imputed dataset.","code":"inspectData(data = data, exposure = exposure, exposure_time_pts = exposure_time_pts, outcome = outcome, # required input             ti_confounders = ti_confounders, tv_confounders = tv_confounders, # required input             epochs = epochs, hi_lo_cut = hi_lo_cut, reference = reference, comparison = comparison, #optional input             home_dir = home_dir, verbose = verbose, save.out = save.out) #optional input #> Using github PAT from envvar GITHUB_PAT #> Skipping install of 'devMSMs' from a github remote, the SHA1 (3c6a4d53) has not changed since last install. #>   Use `force = TRUE` to force installation #> USER ALERT: Below are the 67 variables spanning 33 unique domains that will be treated as confounding variables for the relation between ESETA1 and StrDif_Tot.58. #> Please inspect this list carefully. It should include all time-varying covariates, time invariant covariates, as well as lagged levels of exposure and outcome variables if they were collected at time points earlier than the outcome time point. #>  [1] \"B18Raw.15\"      \"B18Raw.24\"      \"B18Raw.58\"      \"B18Raw.6\"       #>  [5] \"BioDadInHH2\"    \"caregiv_health\" \"CORTB.15\"       \"CORTB.24\"       #>  [9] \"CORTB.6\"        \"DrnkFreq\"       \"EARS_TJo.24\"    \"EARS_TJo.35\"    #> [13] \"ESETA1.15\"      \"ESETA1.24\"      \"ESETA1.35\"      \"ESETA1.58\"      #> [17] \"ESETA1.6\"       \"fscore.35\"      \"fscore.58\"      \"gov_assist\"     #> [21] \"HOMEETA1.15\"    \"HOMEETA1.24\"    \"HOMEETA1.35\"    \"HOMEETA1.58\"    #> [25] \"HOMEETA1.6\"     \"HomeOwnd\"       \"IBRAttn.15\"     \"IBRAttn.24\"     #> [29] \"IBRAttn.6\"      \"InRatioCor.15\"  \"InRatioCor.24\"  \"InRatioCor.35\"  #> [33] \"InRatioCor.58\"  \"InRatioCor.6\"   \"KFASTScr\"       \"LESMnNeg.24\"    #> [37] \"LESMnNeg.35\"    \"LESMnPos.24\"    \"LESMnPos.35\"    \"MDI.15\"         #> [41] \"MDI.6\"          \"peri_health\"    \"PmAge2\"         \"PmBlac2\"        #> [45] \"PmEd2\"          \"PmMrSt2\"        \"RHasSO.15\"      \"RHasSO.24\"      #> [49] \"RHasSO.35\"      \"RHasSO.58\"      \"RHasSO.6\"       \"RHealth\"        #> [53] \"RMomAgeU\"       \"SAAmylase.15\"   \"SAAmylase.24\"   \"SAAmylase.6\"    #> [57] \"SmokTotl\"       \"state\"          \"StrDif_Tot.35\"  \"StrDif_Tot.58\"  #> [61] \"SurpPreg\"       \"SWghtLB\"        \"TcBlac2\"        \"WndNbrhood.24\"  #> [65] \"WndNbrhood.35\"  \"WndNbrhood.58\"  \"WndNbrhood.6\"   #>  #> The following variables are designated as numeric:  #> [1] \"PmAge2, ALI_Le.35, CORTB.15, CORTB.24, CORTB.6, ESETA1.15, ESETA1.24, ESETA1.35, ESETA1.58, ESETA1.6, fscore.35, fscore.58, HOMEETA1.15, HOMEETA1.24, HOMEETA1.35, HOMEETA1.58, HOMEETA1.6, IBRAttn.15, IBRAttn.24, IBRAttn.6, InRatioCor.15, InRatioCor.24, InRatioCor.35, InRatioCor.58, InRatioCor.6, LESMnNeg.24, LESMnNeg.35, LESMnPos.24, LESMnPos.35, SAAmylase.15, SAAmylase.24, SAAmylase.6, StrDif_Tot.35, StrDif_Tot.58, WndNbrhood.24, WndNbrhood.35, WndNbrhood.58, WndNbrhood.6\" #>  #> The following variables are designated as factors:  #> [1] \"ID, state, TcBlac2, BioDadInHH2, HomeOwnd, PmBlac2, PmMrSt2, SurpPreg, DrnkFreq, RHealth, SmokTotl, RHasSO.15, RHasSO.24, RHasSO.35, RHasSO.58, RHasSO.6\" #>  #> Table: Other variable types #>  #> |               |variable       |type    | #> |:--------------|:--------------|:-------| #> |KFASTScr       |KFASTScr       |integer | #> |PmEd2          |PmEd2          |integer | #> |RMomAgeU       |RMomAgeU       |integer | #> |SWghtLB        |SWghtLB        |integer | #> |peri_health    |peri_health    |integer | #> |caregiv_health |caregiv_health |integer | #> |gov_assist     |gov_assist     |integer | #> |B18Raw.15      |B18Raw.15      |integer | #> |B18Raw.24      |B18Raw.24      |integer | #> |B18Raw.58      |B18Raw.58      |integer | #> |B18Raw.6       |B18Raw.6       |integer | #> |EARS_TJo.24    |EARS_TJo.24    |integer | #> |EARS_TJo.35    |EARS_TJo.35    |integer | #> |MDI.15         |MDI.15         |integer | #> |MDI.6          |MDI.6          |integer | #>  #> Summary of Exposure Main Effects:  #>  #> USER ALERT: Out of the total of 1292 individuals in the sample, below is the distribution of the 437 (33.82%) individuals that fall into 5 out of the 5 the total user-defined exposure histories created from 30th and 60th percentile values for low and high levels of exposure ESETA1, respectively, across Infancy, Toddlerhood, Childhood.  #> USER ALERT: Please inspect the distribution of the sample across the following exposure histories and ensure there is sufficient spread to avoid extrapolation and low precision:  #>  #> Table: Summary of user-specified exposure ESETA1 histories based on exposure main effects Infancy, Toddlerhood, Childhood containing time points c(6, 15), c(24, 35), 58: #>  #> |history |   n| #> |:-------|---:| #> |h-h-h   | 229| #> |h-l-l   |  16| #> |l-h-l   |  10| #> |l-l-h   |  31| #> |l-l-l   | 151| #>  #> Your outcome variable(s) have the following type(s): data.frame"},{"path":"https://istallworthy.github.io/devMSMs/articles/Preliminary_Steps.html","id":"references","dir":"Articles","previous_headings":"","what":"References","title":"Preliminary Steps","text":"Arel-Bundock, Vincent. 2023. marginaleffects: Predictions, Comparisons, Slopes, Marginal Means, Hypothesis Tests. https://CRAN.R-project.org/package=marginaleffects. Burchinal, M., Howes, C., Pianta, R., Bryant, D., Early, D., Clifford, R., & Barbarin, O. (2008). Predicting Child Outcomes End Kindergarten Quality Pre-Kindergarten Teacher–Child Interactions Instruction. Applied Developmental Science, 12(3), 140–153. https://doi.org/10.1080/10888690802199418 Granger, E., Sergeant, J. C., & Lunt, M. (2019). Avoiding pitfalls combining multiple imputation propensity scores. Statistics Medicine, 38(26), 5120–5132. https://doi.org/10.1002/sim.8355 Leyrat, C., Carpenter, J. R., Bailly, S., & Williamson, E. J. (2021). Common Methods Handling Missing Data Marginal Structural Models: Works . American Journal Epidemiology, 190(4), 663–672. https://doi.org/10.1093/aje/kwaa225 Shah, . D., Bartlett, J. W., Carpenter, J., Nicholas, O., & Hemingway, H. (2014). Comparison Random Forest Parametric Imputation Models Imputing Missing Data Using MICE: CALIBER Study. American Journal Epidemiology, 179(6), 764–774. https://doi.org/10.1093/aje/kwt312 Vernon-Feagans, L., Cox, M., Willoughby, M., Burchinal, M., Garrett-Peters, P., Mills-Koonce, R., Garrett-Peiers, P., Conger, R. D., & Bauer, P. J. (2013). Family Life Project: Epidemiological Developmental Study Young Children Living Poor Rural Communities. Monographs Society Research Child Development, 78(5), –150. van Buuren, Stef, Karin Groothuis-Oudshoorn. 2011. “mice: Multivariate Imputation Chained Equations r.” Journal Statistical Software 45 (3): 1–67. https://doi.org/10.18637/jss.v045.i03.","code":""},{"path":"https://istallworthy.github.io/devMSMs/articles/Specify_Core_Inputs.html","id":"home-directory","dir":"Articles","previous_headings":"","what":"Home Directory","title":"Specify Core Inputs","text":"Users required specify home directory, quotations, path designated folder output package, plan save intermediary final outputs package (default) setting save.= TRUE functions. sub directories created within home directory devMSMs functions automatically save.’ = TRUE.","code":"home_dir <- NA home_dir <- '/Users/isabella/Library/CloudStorage/Box-Box/BSL General/MSMs/testing/isa' #note: no / after"},{"path":"https://istallworthy.github.io/devMSMs/articles/Specify_Core_Inputs.html","id":"exposure-variable","dir":"Articles","previous_headings":"","what":"Exposure Variable","title":"Specify Core Inputs","text":"Users required specify exposure variable input functions devMSMs. user must specify exposure, variable name exposure quotations, without time information appended (e.g., “variable”). Note dataset, exposure variables wide format labeled “.time” suffix (e.g., “variable.t”).","code":"exposure <- \"ESETA1\""},{"path":"https://istallworthy.github.io/devMSMs/articles/Specify_Core_Inputs.html","id":"exposure-time-points","dir":"Articles","previous_headings":"","what":"Exposure Time Points","title":"Specify Core Inputs","text":"Next, users required provide information time points exposure assessed exposure_time_pts, required input createFormulas(), assessBalance(), fitModel(), compareHistories() devMSMs functions (see Workflows vignettes). user two options specifying exposure time points select option best serves theory regarding developmental timing practical constraints data modeling process. First, may specify time points exposure measured data. means balancing formulas created (Steps 1a, 2a, 3b Workflows vignettes) IPTW weights created (Steps 2b, 3c Workflows vignettes) assessed (Steps 2c, 3a, 4 Workflows vignettes) time points. case, epochs specified, time points included exposure main effects final substantive model history comparison (Step 5 Workflows vignettes). Second, may specify subset theoretically important time points exposure measured data. means balancing formulas created IPTW weights created assessed time points. , epochs specified, subsetted time points included exposure main effects final substantive models. Importantly, exposure variables time points exposure assessed included time-varying confounders balancing purposes . specification exposure epochs kept consistent throughout use devMSMs package. user intends specify exposure epochs (Preliminary Steps vignette Step P4), user include time points encompassed epochs exposure_time_pts. user intend specify exposure epochs, exposure_time_pts constitute exposure main effects final outcome model form basis histories used history comparison. case, user specifies 4 exposure time points, required conduct subset history comparisons (Step 5b Workflows vignettes), given base code (see hypotheses() function marginaleffects package) accommodate pairwise history comparisons 5 time points. elected create epochs infancy (6 15 months), toddlerhood (24 35 months), early childhood (58 months). Thus, input 6, 15, 24, 35, 58 exposure_time_pts.","code":"exposure_time_pts <- c(6, 15, 24, 35, 58)"},{"path":"https://istallworthy.github.io/devMSMs/articles/Specify_Core_Inputs.html","id":"outcome-variable","dir":"Articles","previous_headings":"","what":"Outcome Variable","title":"Specify Core Inputs","text":"Users also required specify outcome variable designated final time point, required input functions devMSMs package. final time point equal (, ideally greater ) final exposure time point. Note instances outcome variable measured prior time points included time-varying confounders balancing purposes. Specifying outcome, variable name outcome time point collected appended following period (e.g., “variable.t”) corresponding variable name wide data, required package. Outcome variables dataset wide format labeled “.time” suffix.","code":"outcome <- \"StrDif_Tot.58\""},{"path":[]},{"path":"https://istallworthy.github.io/devMSMs/articles/Specify_Core_Inputs.html","id":"time-invariant-confounders","dir":"Articles","previous_headings":"Confounders","what":"Time invariant confounders","title":"Specify Core Inputs","text":"Specifying least one time invariant confounder required use package required input createFormulas() function. Time invariant confounders include core demographic birth characteristics (e.g., sex, racial group membership, birth complications) might cause either exposure outcome, either directly proxy, suggested theory /evidenced strong associations existing literature. , user can also include interaction terms time invariant variables (e.g., “variable:variable”) inclusion balancing formula. Keep mind interactions include factor variables decomposed interactions factor level. ti_confounders, list, quotations, provide names confounders (e.g., “variable”, “variable:variable”) dataset time invariant.","code":"ti_confounders <- c(\"state\", \"BioDadInHH2\", \"PmAge2\", \"PmBlac2\", \"TcBlac2\", \"PmMrSt2\", \"PmEd2\", \"KFASTScr\",                     \"RMomAgeU\", \"RHealth\", \"HomeOwnd\", \"SWghtLB\", \"SurpPreg\", \"SmokTotl\", \"DrnkFreq\",                     \"peri_health\", \"caregiv_health\", \"gov_assist\" )"},{"path":"https://istallworthy.github.io/devMSMs/articles/Specify_Core_Inputs.html","id":"time-varying-confounders","dir":"Articles","previous_headings":"Confounders","what":"Time-varying confounders","title":"Specify Core Inputs","text":"Specifying least time-varying exposures time-varying confounders required use package required input createFormulas() devMSMs function (see Workflows vignettes). tv_confounders list, quotations, provide names variables wide format (e.g., “variable.t”) dataset time-varying (including time-varying confounders, exposures, outcomes). include time-varying exposure variables outcome variables present dataset (e.g., “variable.t”). Note time-varying confounders also include confounders measured repeatedly time points (e.g., InRatioCor) collected one several specific time points, missing time points, time invariant. , user can also include interaction terms time-varying variables (e.g., “variable.t:variable.t”) time invariant time-varying variables (e.g., “variable.t:variable”) inclusion balancing formula. Keep mind interactions include factor variables decomposed interactions factor level.","code":"tv_confounders <- c(\"SAAmylase.6\",\"SAAmylase.15\", \"SAAmylase.24\",                     \"MDI.6\", \"MDI.15\",                                                                 \"RHasSO.6\", \"RHasSO.15\", \"RHasSO.24\",\"RHasSO.35\", \"RHasSO.58\",                                                              \"WndNbrhood.6\",\"WndNbrhood.24\", \"WndNbrhood.35\", \"WndNbrhood.58\",                                                            \"IBRAttn.6\", \"IBRAttn.15\", \"IBRAttn.24\",                                                        \"B18Raw.6\", \"B18Raw.15\", \"B18Raw.24\", \"B18Raw.58\",                                                                \"HOMEETA1.6\", \"HOMEETA1.15\", \"HOMEETA1.24\", \"HOMEETA1.35\", \"HOMEETA1.58\",                                                    \"InRatioCor.6\", \"InRatioCor.15\", \"InRatioCor.24\", \"InRatioCor.35\", \"InRatioCor.58\",                                              \"ESETA1.6\", \"ESETA1.15\", \"ESETA1.24\", \"ESETA1.35\", \"ESETA1.58\",  #exposure variables required                                    \"CORTB.6\", \"CORTB.15\", \"CORTB.24\",                                                                                       \"EARS_TJo.24\", \"EARS_TJo.35\",                                                             \"LESMnPos.24\", \"LESMnPos.35\",                                                       \"LESMnNeg.24\", \"LESMnNeg.35\",                            \"StrDif_Tot.35\", \"StrDif_Tot.58\",                         \"fscore.35\", \"fscore.58\" )"},{"path":"https://istallworthy.github.io/devMSMs/articles/Specify_Core_Inputs.html","id":"references","dir":"Articles","previous_headings":"","what":"References","title":"Specify Core Inputs","text":"Arel-Bundock, Vincent. 2023. marginaleffects: Predictions, Comparisons, Slopes, Marginal Means, Hypothesis Tests. https://CRAN.R-project.org/package=marginaleffects.","code":""},{"path":"https://istallworthy.github.io/devMSMs/articles/Workflow_Continuous_Exposure.html","id":"load-data","dir":"Articles","previous_headings":"","what":"Load data","title":"Workflow: Continuous Exposure","text":"first load data frame complete data. data simulated based data Family Life Project (FLP), longitudinal study following 1,292 families representative two geographic areas (three counties North Carolina three counties Pennsylvania) high rural child poverty (Vernon-Feagans et al., 2013; Burchinal et al., 2008). (See Preliminary Steps vignette beginning data types, including missing data).","code":"# data(\"sim_data_wide\", package = \"devMSMs\") #  # data <- sim_data_wide  data(\"sim_data_mice\", package = \"devMSMs\")  data <- sim_data_mice  # head(data,n = c(5, 5)) head(mice::complete(data, 1), n = c(5, 10)) #>   X ID state TcBlac2 BioDadInHH2 HomeOwnd KFASTScr PmBlac2 PmEd2 PmMrSt2 #> 1 1  1     0       0           1        1       24       0    15       1 #> 2 2  2     1       1           0        2       27       1    17       0 #> 3 3  3     0       0           0        3       15       1    13       1 #> 4 4  4     1       0           0        2       17       0    14       0 #> 5 5  5     0       0           1        1       25       0    20       1"},{"path":"https://istallworthy.github.io/devMSMs/articles/Workflow_Continuous_Exposure.html","id":"core-inputs","dir":"Articles","previous_headings":"","what":"Core inputs","title":"Workflow: Continuous Exposure","text":"Please see Specifying Core Inputs vignette detail following core inputs.","code":"set.seed(1234)  home_dir <- NA # home_dir <- '/Users/isabella/Library/CloudStorage/Box-Box/BSL General/MSMs/testing/isa' #note: no / after  exposure <- \"ESETA1\"  exposure_time_pts <- c(6, 15, 24, 35, 58)  outcome <- \"StrDif_Tot.58\"  tv_confounders <- c(\"SAAmylase.6\",\"SAAmylase.15\", \"SAAmylase.24\",                     \"MDI.6\", \"MDI.15\",                                                                 \"RHasSO.6\", \"RHasSO.15\", \"RHasSO.24\",\"RHasSO.35\", \"RHasSO.58\",                                                              \"WndNbrhood.6\",\"WndNbrhood.24\", \"WndNbrhood.35\", \"WndNbrhood.58\",                                                            \"IBRAttn.6\", \"IBRAttn.15\", \"IBRAttn.24\",                                                        \"B18Raw.6\", \"B18Raw.15\", \"B18Raw.24\", \"B18Raw.58\",                                                                \"HOMEETA1.6\", \"HOMEETA1.15\", \"HOMEETA1.24\", \"HOMEETA1.35\", \"HOMEETA1.58\",                                                    \"InRatioCor.6\", \"InRatioCor.15\", \"InRatioCor.24\", \"InRatioCor.35\", \"InRatioCor.58\",                                              \"ESETA1.6\", \"ESETA1.15\", \"ESETA1.24\", \"ESETA1.35\", \"ESETA1.58\",                                   \"CORTB.6\", \"CORTB.15\", \"CORTB.24\",                                                                                       \"EARS_TJo.24\", \"EARS_TJo.35\",                                                             \"LESMnPos.24\", \"LESMnPos.35\",                                                       \"LESMnNeg.24\", \"LESMnNeg.35\",                            \"StrDif_Tot.35\", \"StrDif_Tot.58\",                         \"fscore.35\", \"fscore.58\" )   ti_confounders <- c(\"state\", \"BioDadInHH2\", \"PmAge2\", \"PmBlac2\", \"TcBlac2\", \"PmMrSt2\", \"PmEd2\", \"KFASTScr\",                     \"RMomAgeU\", \"RHealth\", \"HomeOwnd\", \"SWghtLB\", \"SurpPreg\", \"SmokTotl\", \"DrnkFreq\",                     \"peri_health\", \"caregiv_health\", \"gov_assist\" )"},{"path":"https://istallworthy.github.io/devMSMs/articles/Workflow_Continuous_Exposure.html","id":"phase-1-confounder-adjustment","dir":"Articles","previous_headings":"","what":"Phase 1: Confounder Adjustment","title":"Workflow: Continuous Exposure","text":"goal first phase minimize associations confounders exposure using IPTW balancing weights. strongly advise user carefully inspect balancing formula ensure weights created evaluated appropriately step.","code":""},{"path":[]},{"path":"https://istallworthy.github.io/devMSMs/articles/Workflow_Continuous_Exposure.html","id":"step-1a--create-full-balancing-formulas-conduct-pre-balance-checking","dir":"Articles","previous_headings":"Phase 1: Confounder Adjustment > Step 1. Create Full Balancing Formulas & Conduct Pre-Balance Checking","what":"Step 1a. Create Full Balancing Formulas & Conduct Pre-Balance Checking","title":"Workflow: Continuous Exposure","text":"first create comprehensive, full balancing formulas relating exposure confounders time point using createFormulas() function (type = “full”). step creates full formulas containing measured confounding variables exposure time point, including time-invariant confounders, lagged time-varying confounders, well past levels exposure outcome (make sure listed time-varying confounders). code automatically excludes time-varying confounders contemporaneous time point given decisively differentiated mediators balanced (Thoemmes & Ong, 2016), although can modified user strong reason believe concurrent variable mediator (see ). include interactions covariates balancing formulas, please list composed time invariant covariates (e.g., “variable:variable”) time invariant confounders, composed time-varying covariates (e.g., “variable.t:variable” “variable.t:variable.t”) time-varying confounders list. Interactions containing time-varying covariates treated time-varying confounders measured highest measurement time point constituent time points. note, interactions factor variables multiple levels can produce large number additional variables balancing formulas. required input create full balancing formulas using createFormulas() function : exposure (e.g., “variable”), exposure time points, outcome (e.g., “variable.time”), list time-varying confounders (e.g. “variable.time”), list time invariant confounders (e.g., “variable”), setting type = “full”. Optional inputs create full balancing formulas using createFormulas() function follows. concur_conf: list, provide names time-varying confounders (e.g., “variable.time”) wish included concurrently balancing formulas (overriding default include lagged confounders). choose specify concurrent confounders, reliably distinguish mediators data. user may also specify list custom formulas specifying custom list formulas, one exposure time point (e.g., “exposure.time ~ variable.time + variable +…”) formula format, entry named formula type exposure time point (e.g., “full_form-6”). abridged example shown . recommend first running createFormulas() function without custom formulas (custom = NULL) using output model required format custom formulas. createFormulas() function automatically check custom formulas ensure correctly formatted formula exposure time point exposure dependent variable. However, user responsible ensuring custom formulas contain appropriate confounders formula type generating. chose create custom formulas use createFormulas() make . createFormulas() function saves .csv .rds files containing balancing formulas exposure time point specified type (“full”) ‘formulas/full/’ folder. function returns list formulas labeled type, exposure, outcome, exposure time point. shown , createFormulas() creates balancing formula exposure time point. full formula contains time invariant confounders well lagged time-varying confounders time point. inspect formulas ensure accurate creating IPTW balancing weights.","code":"# concur_conf <- \"B18Raw.15\"  concur_conf <- NULL # custom <- list(\"full_form-6\" = as.formula(\"ESETA1.6 ~ BioDadInHH2 + DrnkFreq + gov_assist\"), #                \"full_form-15\" = as.formula(\"ESETA1.15 ~ BioDadInHH2 + DrnkFreq + gov_assist\") # )   custom <- NULL type <- \"full\"  full_formulas <- createFormulas(exposure = exposure, exposure_time_pts = exposure_time_pts, outcome = outcome, #required                                 type = type, ti_confounders = ti_confounders, tv_confounders = tv_confounders, #required                                 concur_conf = concur_conf, custom = custom, #optional                                 home_dir = home_dir, verbose = verbose, save.out = save.out) #optional #> USER ALERT: Please manually inspect the full balancing formula below: #> The full formula for ESETA1 - StrDif_Tot.58 at ESETA1 time point 6 is:  #> ESETA1.6 ~ BioDadInHH2 + caregiv_health + DrnkFreq + gov_assist +  #>     HomeOwnd + KFASTScr + peri_health + PmAge2 + PmBlac2 + PmEd2 +  #>     PmMrSt2 + RHealth + RMomAgeU + SmokTotl + state + SurpPreg +  #>     SWghtLB + TcBlac2 #> <environment: 0x555e8d8377d0> #> USER ALERT: Please manually inspect the full balancing formula below: #> The full formula for ESETA1 - StrDif_Tot.58 at ESETA1 time point 15 is:  #> ESETA1.15 ~ B18Raw.6 + BioDadInHH2 + caregiv_health + CORTB.6 +  #>     DrnkFreq + ESETA1.6 + gov_assist + HOMEETA1.6 + HomeOwnd +  #>     IBRAttn.6 + InRatioCor.6 + KFASTScr + MDI.6 + peri_health +  #>     PmAge2 + PmBlac2 + PmEd2 + PmMrSt2 + RHasSO.6 + RHealth +  #>     RMomAgeU + SAAmylase.6 + SmokTotl + state + SurpPreg + SWghtLB +  #>     TcBlac2 + WndNbrhood.6 #> <environment: 0x555e8d8377d0> #> USER ALERT: Please manually inspect the full balancing formula below: #> The full formula for ESETA1 - StrDif_Tot.58 at ESETA1 time point 24 is:  #> ESETA1.24 ~ B18Raw.15 + B18Raw.6 + BioDadInHH2 + caregiv_health +  #>     CORTB.15 + CORTB.6 + DrnkFreq + ESETA1.15 + ESETA1.6 + gov_assist +  #>     HOMEETA1.15 + HOMEETA1.6 + HomeOwnd + IBRAttn.15 + IBRAttn.6 +  #>     InRatioCor.15 + InRatioCor.6 + KFASTScr + MDI.15 + MDI.6 +  #>     peri_health + PmAge2 + PmBlac2 + PmEd2 + PmMrSt2 + RHasSO.15 +  #>     RHasSO.6 + RHealth + RMomAgeU + SAAmylase.15 + SAAmylase.6 +  #>     SmokTotl + state + SurpPreg + SWghtLB + TcBlac2 + WndNbrhood.6 #> <environment: 0x555e8d8377d0> #> USER ALERT: Please manually inspect the full balancing formula below: #> The full formula for ESETA1 - StrDif_Tot.58 at ESETA1 time point 35 is:  #> ESETA1.35 ~ B18Raw.15 + B18Raw.24 + B18Raw.6 + BioDadInHH2 +  #>     caregiv_health + CORTB.15 + CORTB.24 + CORTB.6 + DrnkFreq +  #>     EARS_TJo.24 + ESETA1.15 + ESETA1.24 + ESETA1.6 + gov_assist +  #>     HOMEETA1.15 + HOMEETA1.24 + HOMEETA1.6 + HomeOwnd + IBRAttn.15 +  #>     IBRAttn.24 + IBRAttn.6 + InRatioCor.15 + InRatioCor.24 +  #>     InRatioCor.6 + KFASTScr + LESMnNeg.24 + LESMnPos.24 + MDI.15 +  #>     MDI.6 + peri_health + PmAge2 + PmBlac2 + PmEd2 + PmMrSt2 +  #>     RHasSO.15 + RHasSO.24 + RHasSO.6 + RHealth + RMomAgeU + SAAmylase.15 +  #>     SAAmylase.24 + SAAmylase.6 + SmokTotl + state + SurpPreg +  #>     SWghtLB + TcBlac2 + WndNbrhood.24 + WndNbrhood.6 #> <environment: 0x555e8d8377d0> #> USER ALERT: Please manually inspect the full balancing formula below: #> The full formula for ESETA1 - StrDif_Tot.58 at ESETA1 time point 58 is:  #> ESETA1.58 ~ B18Raw.15 + B18Raw.24 + B18Raw.6 + BioDadInHH2 +  #>     caregiv_health + CORTB.15 + CORTB.24 + CORTB.6 + DrnkFreq +  #>     EARS_TJo.24 + EARS_TJo.35 + ESETA1.15 + ESETA1.24 + ESETA1.35 +  #>     ESETA1.6 + fscore.35 + gov_assist + HOMEETA1.15 + HOMEETA1.24 +  #>     HOMEETA1.35 + HOMEETA1.6 + HomeOwnd + IBRAttn.15 + IBRAttn.24 +  #>     IBRAttn.6 + InRatioCor.15 + InRatioCor.24 + InRatioCor.35 +  #>     InRatioCor.6 + KFASTScr + LESMnNeg.24 + LESMnNeg.35 + LESMnPos.24 +  #>     LESMnPos.35 + MDI.15 + MDI.6 + peri_health + PmAge2 + PmBlac2 +  #>     PmEd2 + PmMrSt2 + RHasSO.15 + RHasSO.24 + RHasSO.35 + RHasSO.6 +  #>     RHealth + RMomAgeU + SAAmylase.15 + SAAmylase.24 + SAAmylase.6 +  #>     SmokTotl + state + StrDif_Tot.35 + SurpPreg + SWghtLB + TcBlac2 +  #>     WndNbrhood.24 + WndNbrhood.35 + WndNbrhood.6 #> <environment: 0x555e8d8377d0>"},{"path":"https://istallworthy.github.io/devMSMs/articles/Workflow_Continuous_Exposure.html","id":"step-1b--conduct-exploratory-pre-balance-assessment","dir":"Articles","previous_headings":"Phase 1: Confounder Adjustment > Step 1. Create Full Balancing Formulas & Conduct Pre-Balance Checking","what":"Step 1b. Conduct Exploratory Pre-Balance Assessment","title":"Workflow: Continuous Exposure","text":"next step examines initial imbalance, strongly exposure relates confounder time point, measured confounders prior weighting using assessBalance() function (type = “prebalance”). function draws calcBalStats() function (see Assessing Balance Time-Varying Exposure section accompanying manuscript). assessBalance() function outputs balance statistics (correlations continuous exposures standardized mean differences binary exposures) relating exposure time point confounders table well plots. function also provides summary balance statistics averaging across time points (imputed datasets supplied). required inputs using assessBalance() function conduct pre-balance testing : complete data (data frame, mids object, list imputed datasets dataframes wide format), exposure (e.g., “variable”), exposure time points, outcome (e.g., “variable.time”), full formulas (see Step 1a), setting type = “prebalance”. optional inputs follows. user may specify balance_thresh, threshold(s) determining confounder balance, one two ways. First, can provide single number value (0-1) absolute value standardized balance statistic (either correlation continuous exposures standardized group mean difference binary exposures) exposure confounders confounders considered balanced considered imbalanced (default 0.1; Stuart, 2010). Second, users may make priori assertion confounders important others based theory existing research. case, can provide two numbers represent balance thresholds important less important confounders, respectively. user supplies two balance thresholds, must also supply list important confounders (time-varying: “variable.t”, time invariant: “variable”) imp_conf field. balance threshold specification kept consistent throughout use workflow. recommended, provide two balancing thresholds identify income parent education important confounders relation economic strain behavior problems. assessBalance() function saves following .csv .html files ‘balance/prebalance/’ folder: tables balance statistics confounders, tables balance statistics covariates imbalanced (respect respective balance thresholds), overall balance summary table (averaged across imputed datasets). Within ‘balance/prebalance/plots/’ folder, function outputs .jpeg files summary love plots depicting confounder balance exposure time point. function returns data frame (list) balance statistics, balance thresholds, binary balanced tag confounder relevant exposure time point.       output shows initial imbalance confounders exposure tables plots. 55 confounders imbalanced (labeled red font love plots) respect economic strain exposure respective balance threshold. love plots depict standardized associations confounder exposure exposure time point, vertical red dashed lines indicating balance thresholds. .","code":"balance_thresh <- c(0.05, 0.1)   imp_conf <- c(\"InRatioCor.6\", \"InRatioCor.15\", \"InRatioCor.24\", \"InRatioCor.35\", \"InRatioCor.58\", \"PmEd2\") type <- \"prebalance\"  formulas <- full_formulas  prebalance_stats <- assessBalance(data = data, exposure = exposure, exposure_time_pts = exposure_time_pts,                                    outcome = outcome, type = type, formulas = formulas, #required                                   balance_thresh = balance_thresh, imp_conf = imp_conf, #optional                                   home_dir = home_dir, verbose = verbose, save.out = save.out) #optional #> USER ALERT: The following statistics display covariate imbalance at each exposure time point prior to weighting, using full formulas. #>  #> **Imputation 1** #> USER ALERT: For exposure ESETA1 imputation 1 using no weights and full formulas:  #> The median absolute value relation between exposure and confounder is 0.07 (range = -0.25 - 0.31). #>  #>  #> As shown below, 62 out of 191 (32%) covariates across time points, corresponding to 21 out of 33 domains, remain imbalanced with a remaining median absolute value correlation/std mean difference of 0.13 (range= -0.25-0.31): #> Table: Imbalanced Covariates for imputation 1 using no weights and full formulas #>  #> | exp_time| balanced_n| imbalanced_n|  n| #> |--------:|----------:|------------:|--:| #> |        6|          5|           13| 18| #> |       15|         16|           12| 28| #> |       24|         26|           11| 37| #> |       35|         36|           13| 49| #> |       58|         46|           13| 59| #>  #>  #> **Imputation 2** #> USER ALERT: For exposure ESETA1 imputation 2 using no weights and full formulas:  #> The median absolute value relation between exposure and confounder is 0.06 (range = -0.26 - 0.31). #>  #>  #> As shown below, 61 out of 191 (32%) covariates across time points, corresponding to 20 out of 33 domains, remain imbalanced with a remaining median absolute value correlation/std mean difference of 0.13 (range= -0.26-0.31): #> Table: Imbalanced Covariates for imputation 2 using no weights and full formulas #>  #> | exp_time| balanced_n| imbalanced_n|  n| #> |--------:|----------:|------------:|--:| #> |        6|          5|           13| 18| #> |       15|         15|           13| 28| #> |       24|         26|           11| 37| #> |       35|         36|           13| 49| #> |       58|         48|           11| 59| #>  #>  #> **Imputation 3** #> USER ALERT: For exposure ESETA1 imputation 3 using no weights and full formulas:  #> The median absolute value relation between exposure and confounder is 0.07 (range = -0.27 - 0.32). #>  #>  #> As shown below, 57 out of 191 (30%) covariates across time points, corresponding to 20 out of 33 domains, remain imbalanced with a remaining median absolute value correlation/std mean difference of 0.13 (range= -0.27-0.32): #> Table: Imbalanced Covariates for imputation 3 using no weights and full formulas #>  #> | exp_time| balanced_n| imbalanced_n|  n| #> |--------:|----------:|------------:|--:| #> |        6|          4|           14| 18| #> |       15|         17|           11| 28| #> |       24|         26|           11| 37| #> |       35|         37|           12| 49| #> |       58|         50|            9| 59| #>  #>  #> **Imputation 4** #> USER ALERT: For exposure ESETA1 imputation 4 using no weights and full formulas:  #> The median absolute value relation between exposure and confounder is 0.06 (range = -0.24 - 0.29). #>  #>  #> As shown below, 58 out of 191 (30%) covariates across time points, corresponding to 20 out of 33 domains, remain imbalanced with a remaining median absolute value correlation/std mean difference of 0.14 (range= -0.24-0.29): #> Table: Imbalanced Covariates for imputation 4 using no weights and full formulas #>  #> | exp_time| balanced_n| imbalanced_n|  n| #> |--------:|----------:|------------:|--:| #> |        6|          5|           13| 18| #> |       15|         16|           12| 28| #> |       24|         25|           12| 37| #> |       35|         36|           13| 49| #> |       58|         51|            8| 59| #>  #>  #> **Imputation 5** #> USER ALERT: For exposure ESETA1 imputation 5 using no weights and full formulas:  #> The median absolute value relation between exposure and confounder is 0.06 (range = -0.25 - 0.3). #>  #>  #> As shown below, 63 out of 191 (33%) covariates across time points, corresponding to 20 out of 33 domains, remain imbalanced with a remaining median absolute value correlation/std mean difference of 0.13 (range= -0.25-0.3): #> Table: Imbalanced Covariates for imputation 5 using no weights and full formulas #>  #> | exp_time| balanced_n| imbalanced_n|  n| #> |--------:|----------:|------------:|--:| #> |        6|          5|           13| 18| #> |       15|         14|           14| 28| #> |       24|         26|           11| 37| #> |       35|         36|           13| 49| #> |       58|         47|           12| 59| #>  #>  #>  #> *** Averaging Across All Imputations *** #> USER ALERT: Averaging across all imputed datasets for exposure ESETA1 using the full formulas and no weights : #> The median absolute value relation between exposure and confounder is 0.07 (range = -0.26-0.31). #>  #> As shown below, the following 59 covariates across time points out of 191 total (30.89%) spanning 20 domains out of 33 (60.61%) are imbalanced with a remaining median absolute value correlation/std mean difference in relation to ESETA1 of 0.13 (range=-0.26-0.31) : #>  #> Table: Imbalanced Covariates #>  #> |    |exposure | exp_time| covar_time|covariate      |    avg_bal| bal_thresh| balanced| #> |:---|:--------|--------:|----------:|:--------------|----------:|----------:|--------:| #> |1   |ESETA1   |        6|          0|BioDadInHH2    | -0.1252969|       0.10|        0| #> |2   |ESETA1   |        6|          0|caregiv_health |  0.1642030|       0.10|        0| #> |4   |ESETA1   |        6|          0|gov_assist     |  0.3060139|       0.10|        0| #> |5   |ESETA1   |        6|          0|HomeOwnd       |  0.2186198|       0.10|        0| #> |6   |ESETA1   |        6|          0|KFASTScr       | -0.1723122|       0.10|        0| #> |9   |ESETA1   |        6|          0|PmBlac2        |  0.1820840|       0.10|        0| #> |10  |ESETA1   |        6|          0|PmEd2          | -0.2342220|       0.05|        0| #> |11  |ESETA1   |        6|          0|PmMrSt2        | -0.1174377|       0.10|        0| #> |12  |ESETA1   |        6|          0|RHealth        |  0.1670935|       0.10|        0| #> |13  |ESETA1   |        6|          0|RMomAgeU       | -0.1103266|       0.10|        0| #> |15  |ESETA1   |        6|          0|state          |  0.1199621|       0.10|        0| #> |16  |ESETA1   |        6|          0|SurpPreg       |  0.1141301|       0.10|        0| #> |18  |ESETA1   |        6|          0|TcBlac2        |  0.2024678|       0.10|        0| #> |19  |ESETA1   |       15|          6|B18Raw.6       |  0.1535538|       0.10|        0| #> |20  |ESETA1   |       15|          0|BioDadInHH2    | -0.1035560|       0.10|        0| #> |21  |ESETA1   |       15|          0|caregiv_health |  0.1071988|       0.10|        0| #> |24  |ESETA1   |       15|          6|ESETA1.6       |  0.1857927|       0.10|        0| #> |25  |ESETA1   |       15|          0|gov_assist     |  0.1892464|       0.10|        0| #> |26  |ESETA1   |       15|          6|HOMEETA1.6     | -0.1557050|       0.10|        0| #> |27  |ESETA1   |       15|          0|HomeOwnd       |  0.1282867|       0.10|        0| #> |29  |ESETA1   |       15|          6|InRatioCor.6   | -0.2550225|       0.05|        0| #> |30  |ESETA1   |       15|          0|KFASTScr       | -0.1004187|       0.10|        0| #> |34  |ESETA1   |       15|          0|PmBlac2        |  0.1299468|       0.10|        0| #> |35  |ESETA1   |       15|          0|PmEd2          | -0.1509074|       0.05|        0| #> |42  |ESETA1   |       15|          0|state          |  0.1022097|       0.10|        0| #> |45  |ESETA1   |       15|          0|TcBlac2        |  0.1320021|       0.10|        0| #> |46  |ESETA1   |       15|          6|WndNbrhood.6   | -0.1114363|       0.10|        0| #> |47  |ESETA1   |       24|         15|B18Raw.15      |  0.1319637|       0.10|        0| #> |48  |ESETA1   |       24|          6|B18Raw.6       |  0.1505171|       0.10|        0| #> |50  |ESETA1   |       24|          0|caregiv_health |  0.1151900|       0.10|        0| #> |54  |ESETA1   |       24|         15|ESETA1.15      |  0.1331463|       0.10|        0| #> |55  |ESETA1   |       24|          6|ESETA1.6       |  0.1320434|       0.10|        0| #> |56  |ESETA1   |       24|          0|gov_assist     |  0.1475768|       0.10|        0| #> |57  |ESETA1   |       24|         15|HOMEETA1.15    | -0.1277163|       0.10|        0| #> |62  |ESETA1   |       24|         15|InRatioCor.15  | -0.1230563|       0.05|        0| #> |63  |ESETA1   |       24|          6|InRatioCor.6   | -0.1422472|       0.05|        0| #> |70  |ESETA1   |       24|          0|PmEd2          | -0.1139914|       0.05|        0| #> |74  |ESETA1   |       24|          0|RHealth        |  0.1191737|       0.10|        0| #> |84  |ESETA1   |       35|         15|B18Raw.15      |  0.1150268|       0.10|        0| #> |94  |ESETA1   |       35|         15|ESETA1.15      |  0.1412747|       0.10|        0| #> |95  |ESETA1   |       35|         24|ESETA1.24      |  0.1249143|       0.10|        0| #> |96  |ESETA1   |       35|          6|ESETA1.6       |  0.1050469|       0.10|        0| #> |97  |ESETA1   |       35|          0|gov_assist     |  0.1281314|       0.10|        0| #> |99  |ESETA1   |       35|         24|HOMEETA1.24    | -0.1142800|       0.10|        0| #> |105 |ESETA1   |       35|         15|InRatioCor.15  | -0.1366254|       0.05|        0| #> |106 |ESETA1   |       35|         24|InRatioCor.24  | -0.1541546|       0.05|        0| #> |107 |ESETA1   |       35|          6|InRatioCor.6   | -0.1616213|       0.05|        0| #> |116 |ESETA1   |       35|          0|PmEd2          | -0.1174696|       0.05|        0| #> |120 |ESETA1   |       35|          6|RHasSO.6       |  0.1158977|       0.10|        0| #> |133 |ESETA1   |       58|         15|B18Raw.15      |  0.1057540|       0.10|        0| #> |146 |ESETA1   |       58|         35|ESETA1.35      |  0.1045269|       0.10|        0| #> |148 |ESETA1   |       58|         35|fscore.35      | -0.1107328|       0.10|        0| #> |149 |ESETA1   |       58|          0|gov_assist     |  0.1243485|       0.10|        0| #> |153 |ESETA1   |       58|          6|HOMEETA1.6     | -0.1032754|       0.10|        0| #> |158 |ESETA1   |       58|         15|InRatioCor.15  | -0.1364243|       0.05|        0| #> |159 |ESETA1   |       58|         24|InRatioCor.24  | -0.1551944|       0.05|        0| #> |160 |ESETA1   |       58|         35|InRatioCor.35  | -0.1215920|       0.05|        0| #> |161 |ESETA1   |       58|          6|InRatioCor.6   | -0.1415883|       0.05|        0| #> |172 |ESETA1   |       58|          0|PmEd2          | -0.1317208|       0.05|        0|"},{"path":"https://istallworthy.github.io/devMSMs/articles/Workflow_Continuous_Exposure.html","id":"step-2--create-simplified-balancing-formulas-determine-optimal-weighting-method","dir":"Articles","previous_headings":"Phase 1: Confounder Adjustment","what":"Step 2. Create Simplified Balancing Formulas & Determine Optimal Weighting Method","title":"Workflow: Continuous Exposure","text":"goal second step create shortened, parsimonious balancing formulas determining optimal IPTW weighting method successfully reduces imbalance.","code":""},{"path":"https://istallworthy.github.io/devMSMs/articles/Workflow_Continuous_Exposure.html","id":"a--create-simplified-balancing-formulas","dir":"Articles","previous_headings":"Phase 1: Confounder Adjustment > Step 2. Create Simplified Balancing Formulas & Determine Optimal Weighting Method","what":"2a. Create Simplified Balancing Formulas","title":"Workflow: Continuous Exposure","text":"First, create shorter, parsimonious balancing formulas relating exposure confounders time point using createFormulas() function (type = ”short”). exposure time point, formulas contain time invariant confounders well time-varying confounders t-1 lag. logic balancing confounders recent prior time point (t-1 ) may achieve balance levels distal time points, given stability many confounders time. Importantly, empirically assess relax assumption needed subsequent steps (Steps 3a-b). See Step 1a instructions include confounder interactions. required input create shortened balancing formulas using createFormulas() function : exposure (e.g., “variable”), exposure time points, outcome (e.g., “variable.t”), list time-varying confounders (e.g., “variable.t”), list time invariant confounders, setting type = “short”. addition optional input outlined Step 1a, user also option specify keep_conf, list time-varying confounders (e.g., “variable.t”) always retain lagged confounders shortened formulas. user may use argument retain specific time-varying confounders otherwise excluded step occur lags greater t-1 formula. , choose specify confounders always retain step. createFormulas() function saves .csv .rds files containing balancing formulas exposure time point (e.g., see ) specified type (case, “short”) ‘formulas/short/’ folder. function returns list balancing formulas labeled type, exposure, outcome, exposure time point. , inspect shortened balancing formula exposure time point. formulas considerably shorter full formulas. instance, 58-month exposure time point, formula contains time invariant confounders time-varying confounders 35-month time point.","code":"# keep_conf <- \"InRatioCor.6\"  keep_conf  <-  NULL type <- \"short\"   short_formulas <- createFormulas(exposure = exposure, exposure_time_pts = exposure_time_pts,                                   outcome = outcome, type = type, ti_confounders = ti_confounders,                                   tv_confounders = tv_confounders, concur_conf = concur_conf,                                   keep_conf = keep_conf, custom = custom,                                   home_dir = home_dir, verbose = verbose, save.out = save.out)  #> USER ALERT: Please manually inspect the short balancing formula below that includes time-varying confounders at t-1 only: #> The short formula for ESETA1 - StrDif_Tot.58 at ESETA1 time point 6 is:  #> ESETA1.6 ~ BioDadInHH2 + caregiv_health + DrnkFreq + gov_assist +  #>     HomeOwnd + KFASTScr + peri_health + PmAge2 + PmBlac2 + PmEd2 +  #>     PmMrSt2 + RHealth + RMomAgeU + SmokTotl + state + SurpPreg +  #>     SWghtLB + TcBlac2 #> <environment: 0x555e8d95b928> #> USER ALERT: Please manually inspect the short balancing formula below that includes time-varying confounders at t-1 only: #> The short formula for ESETA1 - StrDif_Tot.58 at ESETA1 time point 15 is:  #> ESETA1.15 ~ B18Raw.6 + BioDadInHH2 + caregiv_health + CORTB.6 +  #>     DrnkFreq + ESETA1.6 + gov_assist + HOMEETA1.6 + HomeOwnd +  #>     IBRAttn.6 + InRatioCor.6 + KFASTScr + MDI.6 + peri_health +  #>     PmAge2 + PmBlac2 + PmEd2 + PmMrSt2 + RHasSO.6 + RHealth +  #>     RMomAgeU + SAAmylase.6 + SmokTotl + state + SurpPreg + SWghtLB +  #>     TcBlac2 + WndNbrhood.6 #> <environment: 0x555e8d95b928> #> USER ALERT: Please manually inspect the short balancing formula below that includes time-varying confounders at t-1 only: #> The short formula for ESETA1 - StrDif_Tot.58 at ESETA1 time point 24 is:  #> ESETA1.24 ~ B18Raw.15 + BioDadInHH2 + caregiv_health + CORTB.15 +  #>     DrnkFreq + ESETA1.15 + gov_assist + HOMEETA1.15 + HomeOwnd +  #>     IBRAttn.15 + InRatioCor.15 + KFASTScr + MDI.15 + peri_health +  #>     PmAge2 + PmBlac2 + PmEd2 + PmMrSt2 + RHasSO.15 + RHealth +  #>     RMomAgeU + SAAmylase.15 + SmokTotl + state + SurpPreg + SWghtLB +  #>     TcBlac2 #> <environment: 0x555e8d95b928> #> USER ALERT: Please manually inspect the short balancing formula below that includes time-varying confounders at t-1 only: #> The short formula for ESETA1 - StrDif_Tot.58 at ESETA1 time point 35 is:  #> ESETA1.35 ~ B18Raw.24 + BioDadInHH2 + caregiv_health + CORTB.24 +  #>     DrnkFreq + EARS_TJo.24 + ESETA1.24 + gov_assist + HOMEETA1.24 +  #>     HomeOwnd + IBRAttn.24 + InRatioCor.24 + KFASTScr + LESMnNeg.24 +  #>     LESMnPos.24 + peri_health + PmAge2 + PmBlac2 + PmEd2 + PmMrSt2 +  #>     RHasSO.24 + RHealth + RMomAgeU + SAAmylase.24 + SmokTotl +  #>     state + SurpPreg + SWghtLB + TcBlac2 + WndNbrhood.24 #> <environment: 0x555e8d95b928> #> USER ALERT: Please manually inspect the short balancing formula below that includes time-varying confounders at t-1 only: #> The short formula for ESETA1 - StrDif_Tot.58 at ESETA1 time point 58 is:  #> ESETA1.58 ~ BioDadInHH2 + caregiv_health + DrnkFreq + EARS_TJo.35 +  #>     ESETA1.35 + fscore.35 + gov_assist + HOMEETA1.35 + HomeOwnd +  #>     InRatioCor.35 + KFASTScr + LESMnNeg.35 + LESMnPos.35 + peri_health +  #>     PmAge2 + PmBlac2 + PmEd2 + PmMrSt2 + RHasSO.35 + RHealth +  #>     RMomAgeU + SmokTotl + state + StrDif_Tot.35 + SurpPreg +  #>     SWghtLB + TcBlac2 + WndNbrhood.35 #> <environment: 0x555e8d95b928>"},{"path":"https://istallworthy.github.io/devMSMs/articles/Workflow_Continuous_Exposure.html","id":"b--create-iptw-balancing-weights-using-multiple-weighting-methods","dir":"Articles","previous_headings":"Phase 1: Confounder Adjustment > Step 2. Create Simplified Balancing Formulas & Determine Optimal Weighting Method","what":"2b. Create IPTW Balancing Weights using Multiple Weighting Methods","title":"Workflow: Continuous Exposure","text":"created shorter, simplified balancing formulas, now create first round IPTW balancing weights (Thoemmes & Ong, 2016) using createWeights() function, shortened balancing formulas, available weighting methods. function calls weightitMSM() function WeightIt package (Greifer, 2023) uses time-specific formulas create weights time point automatically multiplying together create one weight per person. Weights stabilized, recommended (Cole & Hernan, 2008; Thoemmes & Ong, 2016), distributions saved inspection. required inputs using createWeights() function create initial around IPTW balancing weights : complete data (data frame, mids object, list imputed datasets dataframes wide format), exposure (e.g., “variable”), outcome (e.g., “variable.t”), short formulas (see Step 2a). optional inputs follows. method, provide one following methods calculating balancing weights using weightitMSM() methods validated longitudinal exposures: “cbps” (Covariate Balancing Propensity Score weighting; default), “gbm” (generalized boosted model), “glm” (generalized linear model), “super” (SuperLearner via SuperLearner package; Polley et al., 2013). information can found WeightIt documentation. createWeights() function can also take number additional arguments passed weightitMSM () function (e.g., ‘criterion’, distribution’, ‘SL.library’). user selects SuperLearner (“super”) method, default super learner library (‘SL.library’) xx alternative library can entered input createWeights function. binary exposures, “cbps” method allows specify estimand either ATE, ATT, ATC. “glm”, “super”, “bart” can specify ATE, ATT, ATC, ATO, ATM, ATOS. “gbm”, can specify ATE, ATT, ATC, ATO, ATM. default estimand binary exposures ATE. advise interested user review WeightIt documentation information additional optional arguments available weighting methods. user can also specify read_in_from_file = TRUEif user previously created weights specific data, formula, weight type using function wishes read local file instead recreating . createWeights() function automatically conducts basic checks saved weights match data type, weights method, number formulas provided. user responsible making sure weights created appropriately. createWeights() function saves .rds file weights ‘weights’ folder, histogram weights distribution ‘weights/histograms/’ folder, .csv file data weights appended ‘weights/values/’ folder. function returns list weights objects form WeightItMSM output single nested list (labeled “0” data data frame format) nested lists imputed dataset (data imputed). , create IPTW weights using default CBPS method.      shown , distribution heavy right tail (typical real-world data), median value 1.21. right tail distribution represents individuals experienced statistically unexpected levels exposure given levels confounders.  create IPTW balancing weights using available methods order evaluate compare performance subsequent steps.      shown , GLM method produces similar distribution weights.","code":"formulas <- short_formulas method <- \"cbps\" weights.cbps <- createWeights(data = data, exposure = exposure, outcome = outcome, formulas = formulas, #required                               method = method, read_in_from_file = FALSE,  #optional                               home_dir = home_dir, verbose = verbose, save.out = save.out)  #optional #> For imputation 1 and the cbps weighting method, the median weight value is 1.09 (SD= 4.72; range= 0-87.31 ). #> For imputation 2 and the cbps weighting method, the median weight value is 1 (SD= 3.82; range= 0-98.24 ). #> For imputation 3 and the cbps weighting method, the median weight value is 1.09 (SD= 5.02; range= 0-150.07 ). #> For imputation 4 and the cbps weighting method, the median weight value is 1.04 (SD= 3.5; range= 0.01-87.57 ). #> For imputation 5 and the cbps weighting method, the median weight value is 1.03 (SD= 2.39; range= 0-47.11 ). method <- \"glm\"  weights.glm <- createWeights(data = data, exposure = exposure, outcome = outcome, formulas = formulas, #required                              method = method, read_in_from_file = FALSE, #optional                              home_dir = home_dir, verbose = verbose, save.out = save.out)  #optional #> For imputation 1 and the glm weighting method, the median weight value is 0.9 (SD= 1.84; range= 0.03-24.2 ). #> For imputation 2 and the glm weighting method, the median weight value is 0.89 (SD= 1.74; range= 0.04-24.42 ). #> For imputation 3 and the glm weighting method, the median weight value is 0.88 (SD= 1.61; range= 0.06-32.34 ). #> For imputation 4 and the glm weighting method, the median weight value is 0.92 (SD= 1.77; range= 0.05-31.27 ). #> For imputation 5 and the glm weighting method, the median weight value is 0.9 (SD= 1.6; range= 0.04-19.46 ). method <- \"gbm\"  weights.gbm <- createWeights(data = data, exposure = exposure, outcome = outcome, formulas = formulas, #required                              method = method, read_in_from_file = FALSE,  #optional                              home_dir = home_dir, verbose = verbose, save.out = save.out)  #optional #> For imputation 1 and the gbm weighting method, the median weight value is 0.49 (SD= 0.97; range= 0.01-16.15 ). #> For imputation 2 and the gbm weighting method, the median weight value is 0.5 (SD= 1.39; range= 0.02-35.47 ). #> For imputation 3 and the gbm weighting method, the median weight value is 0.47 (SD= 0.87; range= 0.01-18.49 ). #> For imputation 4 and the gbm weighting method, the median weight value is 0.48 (SD= 0.73; range= 0.01-10.83 ). #> For imputation 5 and the gbm weighting method, the median weight value is 0.48 (SD= 0.87; range= 0.01-15.01 ). method <- \"bart\"  weights.bart <- createWeights(data = data, exposure = exposure, outcome = outcome, formulas = formulas, #required                               method = method, read_in_from_file = FALSE, #optional                               home_dir = home_dir, verbose = verbose, save.out = save.out) #optional #> For imputation 1 and the bart weighting method, the median weight value is 0.68 (SD= 1.21; range= 0.02-18.95 ). #> For imputation 2 and the bart weighting method, the median weight value is 0.69 (SD= 1.64; range= 0.01-41.07 ). #> For imputation 3 and the bart weighting method, the median weight value is 0.68 (SD= 1.17; range= 0.04-20.45 ). #> For imputation 4 and the bart weighting method, the median weight value is 0.68 (SD= 1.7; range= 0.03-47.78 ). #> For imputation 5 and the bart weighting method, the median weight value is 0.69 (SD= 1.29; range= 0.04-24.62 ). method <- \"super\"  weights.super <- createWeights(data = data, exposure = exposure, outcome = outcome, formulas = formulas, #required                                method = method, read_in_from_file = FALSE, #optional                                home_dir = home_dir, verbose = verbose, save.out = save.out) #optional #> Loading required package: nnls #> For imputation 1 and the super weighting method, the median weight value is 0.99 (SD= 2.15; range= 0.03-28.7 ). #> For imputation 2 and the super weighting method, the median weight value is 0.99 (SD= 1.93; range= 0.03-21.86 ). #> For imputation 3 and the super weighting method, the median weight value is 0.96 (SD= 1.74; range= 0.05-20.6 ). #> For imputation 4 and the super weighting method, the median weight value is 0.97 (SD= 2.06; range= 0.04-44.1 ). #> For imputation 5 and the super weighting method, the median weight value is 0.97 (SD= 1.81; range= 0.04-24.65 )."},{"path":"https://istallworthy.github.io/devMSMs/articles/Workflow_Continuous_Exposure.html","id":"c--assess-all-weighting-methods-to-determine-optimal-method","dir":"Articles","previous_headings":"Phase 1: Confounder Adjustment > Step 2. Create Simplified Balancing Formulas & Determine Optimal Weighting Method","what":"2c. Assess All Weighting Methods to Determine Optimal Method","title":"Workflow: Continuous Exposure","text":"Next, evaluate well weights created using different weighting methods reduced imbalance confounders provided short balancing formula, using assessBalance() function (type = “weighted”). function calls calcBalStats() function using short formulas specifies balance statistics calculated using IPTW weights supplied. assessBalance() function outputs balance statistics (correlations continuous exposures standardized mean differences binary exposures) relating exposure time point confounders table well plots. function also provides summary balance statistics averaging across time points (imputed datasets supplied). required inputs using assessBalance() function assess balance first round IPTW weights : complete data (data frame, mids object, list imputed datasets dataframes wide format), exposure (e.g., “variable”), exposure time points, outcome (e.g., “variable.t”), providing short formulas (see Step 2a), setting type = “weighted”, providing weights just created. optional inputs described Step 1b. assessBalance() function saves following .csv .html files ‘balance/weighted/’ folder: tables balance statistics confounders, tables balance statistics covariates imbalanced, overall balance summary table (averaged across imputed datasets). Within ‘balance/weighted/plots/’ folder, function outputs .jpeg files summary love plots depicting confounder balance exposure time point. function returns data frame (list) balance statistics, balance thresholds, binary balanced tag (1 = balanced, 0 = imbalanced) confounder relevant exposure time point. first assess balance CBPS weighting method.       shown , ”CBPS weighting method short formulas, median absolute value correlation confounder exposure 0.03 8 confounders remain imbalanced.        GLM weighting method, median absolute value correlation exposure confounders 0.02, 6 confounders remaining imbalanced.        GBM weighting method, absolute median correlation exposure confounders 0.02, 9 confounders remaining imbalanced.        BART weighting method, median absolute value correlation exposure confounder 0.02, 11 confounders remaining imbalanced.        SuperLearner weighting method, median absolute value correlation exposure confounder 0.02, 5 confounders remaining imbalanced.  optimal weighting method dataset method yields best confounder balance. iterations, identify best performing weighting method reduces imbalance exposure confounder (indicated lowest absolute value median correlation) fewest number confounders left imbalanced. example, identify SuperLearner optimal weighting method.","code":"type <- \"weighted\"  formulas <- short_formulas  weights <- weights.cbps   balance_stats.cbps <- assessBalance(data = data, exposure = exposure, exposure_time_pts = exposure_time_pts, #required                                     outcome = outcome, type = type, formulas = formulas, weights = weights, #required                                     balance_thresh = balance_thresh, imp_conf = imp_conf, #optional                                     home_dir = home_dir, verbose = verbose, save.out = save.out) #optional #> USER ALERT: The following statistics display covariate imbalance at each exposure time point following IPTW weighting, using short formulas. #>  #> **Imputation 1** #> USER ALERT: For exposure ESETA1 imputation 1 using cbps and short formulas:  #> The median absolute value relation between exposure and confounder is 0.04 (range = -0.13 - 0.13). #>  #>  #> As shown below, 6 out of 131 (5%) covariates across time points, corresponding to 6 out of 32 domains, remain imbalanced with a remaining median absolute value correlation/std mean difference of 0.12 (range= -0.13-0.13): #> Table: Imbalanced Covariates for imputation 1 using cbps and short formulas #>  #> | exp_time| balanced_n| imbalanced_n|  n| #> |--------:|----------:|------------:|--:| #> |        6|         18|            0| 18| #> |       15|         24|            4| 28| #> |       24|         26|            1| 27| #> |       35|         29|            1| 30| #> |       58|         28|            0| 28| #>  #>  #> **Imputation 2** #> USER ALERT: For exposure ESETA1 imputation 2 using cbps and short formulas:  #> The median absolute value relation between exposure and confounder is 0.04 (range = -0.17 - 0.15). #>  #>  #> As shown below, 11 out of 131 (8%) covariates across time points, corresponding to 6 out of 32 domains, remain imbalanced with a remaining median absolute value correlation/std mean difference of 0.11 (range= -0.17-0.15): #> Table: Imbalanced Covariates for imputation 2 using cbps and short formulas #>  #> | exp_time| balanced_n| imbalanced_n|  n| #> |--------:|----------:|------------:|--:| #> |        6|         18|            0| 18| #> |       15|         25|            3| 28| #> |       24|         23|            4| 27| #> |       35|         28|            2| 30| #> |       58|         26|            2| 28| #>  #>  #> **Imputation 3** #> USER ALERT: For exposure ESETA1 imputation 3 using cbps and short formulas:  #> The median absolute value relation between exposure and confounder is 0.04 (range = -0.29 - 0.17). #>  #>  #> As shown below, 25 out of 131 (19%) covariates across time points, corresponding to 15 out of 32 domains, remain imbalanced with a remaining median absolute value correlation/std mean difference of 0.13 (range= -0.29-0.17): #> Table: Imbalanced Covariates for imputation 3 using cbps and short formulas #>  #> | exp_time| balanced_n| imbalanced_n|  n| #> |--------:|----------:|------------:|--:| #> |        6|          9|            9| 18| #> |       15|         26|            2| 28| #> |       24|         20|            7| 27| #> |       35|         28|            2| 30| #> |       58|         23|            5| 28| #>  #>  #> **Imputation 4** #> USER ALERT: For exposure ESETA1 imputation 4 using cbps and short formulas:  #> The median absolute value relation between exposure and confounder is 0.03 (range = -0.17 - 0.14). #>  #>  #> As shown below, 7 out of 131 (5%) covariates across time points, corresponding to 4 out of 32 domains, remain imbalanced with a remaining median absolute value correlation/std mean difference of 0.08 (range= -0.17-0.14): #> Table: Imbalanced Covariates for imputation 4 using cbps and short formulas #>  #> | exp_time| balanced_n| imbalanced_n|  n| #> |--------:|----------:|------------:|--:| #> |        6|         18|            0| 18| #> |       15|         25|            3| 28| #> |       24|         24|            3| 27| #> |       35|         29|            1| 30| #> |       58|         28|            0| 28| #>  #>  #> **Imputation 5** #> USER ALERT: For exposure ESETA1 imputation 5 using cbps and short formulas:  #> The median absolute value relation between exposure and confounder is 0.03 (range = -0.1 - 0.14). #>  #>  #> As shown below, 5 out of 131 (4%) covariates across time points, corresponding to 4 out of 32 domains, remain imbalanced with a remaining median absolute value correlation/std mean difference of 0.1 (range= -0.1-0.14): #> Table: Imbalanced Covariates for imputation 5 using cbps and short formulas #>  #> | exp_time| balanced_n| imbalanced_n|  n| #> |--------:|----------:|------------:|--:| #> |        6|         18|            0| 18| #> |       15|         26|            2| 28| #> |       24|         25|            2| 27| #> |       35|         30|            0| 30| #> |       58|         27|            1| 28| #>  #>  #>  #> *** Averaging Across All Imputations *** #> USER ALERT: Averaging across all imputed datasets for exposure ESETA1 using the short formulas and cbps : #> The median absolute value relation between exposure and confounder is 0.03 (range = -0.12-0.13). #>  #> As shown below, the following 4 covariates across time points out of 131 total (3.05%) spanning 4 domains out of 33 (12.12%) are imbalanced with a remaining median absolute value correlation/std mean difference in relation to ESETA1 of 0.09 (range=-0.12-0.13) : #>  #> Table: Imbalanced Covariates #>  #> |   |exposure | exp_time| covar_time|covariate    |    avg_bal| bal_thresh| balanced| #> |:--|:--------|--------:|----------:|:------------|----------:|----------:|--------:| #> |24 |ESETA1   |       15|          6|ESETA1.6     |  0.1334214|       0.10|        0| #> |29 |ESETA1   |       15|          6|InRatioCor.6 |  0.0685244|       0.05|        0| #> |35 |ESETA1   |       15|          0|PmEd2        |  0.0584676|       0.05|        0| #> |53 |ESETA1   |       24|          0|gov_assist   | -0.1177655|       0.10|        0| weights <- weights.glm  balance_stats.glm <- assessBalance(data = data, exposure = exposure, exposure_time_pts = exposure_time_pts, #required                                    outcome = outcome, type = type, formulas = formulas, weights = weights, #required                                    balance_thresh = balance_thresh, imp_conf = imp_conf, #optional                                    home_dir = home_dir, verbose = verbose, save.out = save.out) #optional #> USER ALERT: The following statistics display covariate imbalance at each exposure time point following IPTW weighting, using short formulas. #>  #> **Imputation 1** #> USER ALERT: For exposure ESETA1 imputation 1 using glm and short formulas:  #> The median absolute value relation between exposure and confounder is 0.02 (range = -0.12 - 0.16). #>  #>  #> As shown below, 7 out of 131 (5%) covariates across time points, corresponding to 5 out of 32 domains, remain imbalanced with a remaining median absolute value correlation/std mean difference of 0.11 (range= -0.12-0.16): #> Table: Imbalanced Covariates for imputation 1 using glm and short formulas #>  #> | exp_time| balanced_n| imbalanced_n|  n| #> |--------:|----------:|------------:|--:| #> |        6|         18|            0| 18| #> |       15|         23|            5| 28| #> |       24|         26|            1| 27| #> |       35|         29|            1| 30| #> |       58|         28|            0| 28| #>  #>  #> **Imputation 2** #> USER ALERT: For exposure ESETA1 imputation 2 using glm and short formulas:  #> The median absolute value relation between exposure and confounder is 0.02 (range = -0.09 - 0.22). #>  #>  #> As shown below, 1 out of 131 (1%) covariates across time points, corresponding to 1 out of 32 domains, remain imbalanced with a remaining median absolute value correlation/std mean difference of 0.22 (range= 0.22-0.22): #> Table: Imbalanced Covariates for imputation 2 using glm and short formulas #>  #> | exp_time| balanced_n| imbalanced_n|  n| #> |--------:|----------:|------------:|--:| #> |        6|         18|            0| 18| #> |       15|         27|            1| 28| #> |       24|         27|            0| 27| #> |       35|         30|            0| 30| #> |       58|         28|            0| 28| #>  #>  #> **Imputation 3** #> USER ALERT: For exposure ESETA1 imputation 3 using glm and short formulas:  #> The median absolute value relation between exposure and confounder is 0.03 (range = -0.09 - 0.2). #>  #>  #> As shown below, 5 out of 131 (4%) covariates across time points, corresponding to 3 out of 32 domains, remain imbalanced with a remaining median absolute value correlation/std mean difference of 0.11 (range= -0.07-0.2): #> Table: Imbalanced Covariates for imputation 3 using glm and short formulas #>  #> | exp_time| balanced_n| imbalanced_n|  n| #> |--------:|----------:|------------:|--:| #> |        6|         18|            0| 18| #> |       15|         25|            3| 28| #> |       24|         25|            2| 27| #> |       35|         30|            0| 30| #> |       58|         28|            0| 28| #>  #>  #> **Imputation 4** #> USER ALERT: For exposure ESETA1 imputation 4 using glm and short formulas:  #> The median absolute value relation between exposure and confounder is 0.03 (range = -0.08 - 0.21). #>  #>  #> As shown below, 4 out of 131 (3%) covariates across time points, corresponding to 3 out of 32 domains, remain imbalanced with a remaining median absolute value correlation/std mean difference of 0.13 (range= -0.05-0.21): #> Table: Imbalanced Covariates for imputation 4 using glm and short formulas #>  #> | exp_time| balanced_n| imbalanced_n|  n| #> |--------:|----------:|------------:|--:| #> |        6|         18|            0| 18| #> |       15|         27|            1| 28| #> |       24|         25|            2| 27| #> |       35|         30|            0| 30| #> |       58|         27|            1| 28| #>  #>  #> **Imputation 5** #> USER ALERT: For exposure ESETA1 imputation 5 using glm and short formulas:  #> The median absolute value relation between exposure and confounder is 0.02 (range = -0.05 - 0.16). #>  #>  #> As shown below, 5 out of 131 (4%) covariates across time points, corresponding to 2 out of 32 domains, remain imbalanced with a remaining median absolute value correlation/std mean difference of 0.11 (range= 0.11-0.16): #> Table: Imbalanced Covariates for imputation 5 using glm and short formulas #>  #> | exp_time| balanced_n| imbalanced_n|  n| #> |--------:|----------:|------------:|--:| #> |        6|         18|            0| 18| #> |       15|         26|            2| 28| #> |       24|         26|            1| 27| #> |       35|         29|            1| 30| #> |       58|         27|            1| 28| #>  #>  #>  #> *** Averaging Across All Imputations *** #> USER ALERT: Averaging across all imputed datasets for exposure ESETA1 using the short formulas and glm : #> The median absolute value relation between exposure and confounder is 0.02 (range = -0.06-0.19). #>  #> As shown below, the following 3 covariates across time points out of 131 total (2.29%) spanning 2 domains out of 33 (6.06%) are imbalanced with a remaining median absolute value correlation/std mean difference in relation to ESETA1 of 0.12 (range=0.1-0.19) : #>  #> Table: Imbalanced Covariates #>  #> |   |exposure | exp_time| covar_time|covariate |   avg_bal| bal_thresh| balanced| #> |:--|:--------|--------:|----------:|:---------|---------:|----------:|--------:| #> |19 |ESETA1   |       15|          6|B18Raw.6  | 0.1025576|        0.1|        0| #> |24 |ESETA1   |       15|          6|ESETA1.6  | 0.1906277|        0.1|        0| #> |52 |ESETA1   |       24|         15|ESETA1.15 | 0.1229541|        0.1|        0| weights <- weights.gbm  balance_stats.gbm <- assessBalance(data = data, exposure = exposure, exposure_time_pts = exposure_time_pts, #required                                    outcome = outcome, type = type, formulas = formulas, weights = weights, #required                                    balance_thresh = balance_thresh, imp_conf = imp_conf, #optional                                    home_dir = home_dir, verbose = verbose, save.out = save.out) #optional #> USER ALERT: The following statistics display covariate imbalance at each exposure time point following IPTW weighting, using short formulas. #>  #> **Imputation 1** #> USER ALERT: For exposure ESETA1 imputation 1 using gbm and short formulas:  #> The median absolute value relation between exposure and confounder is 0.04 (range = -0.09 - 0.16). #>  #>  #> As shown below, 10 out of 131 (8%) covariates across time points, corresponding to 6 out of 32 domains, remain imbalanced with a remaining median absolute value correlation/std mean difference of 0.09 (range= -0.08-0.16): #> Table: Imbalanced Covariates for imputation 1 using gbm and short formulas #>  #> | exp_time| balanced_n| imbalanced_n|  n| #> |--------:|----------:|------------:|--:| #> |        6|         17|            1| 18| #> |       15|         25|            3| 28| #> |       24|         22|            5| 27| #> |       35|         29|            1| 30| #> |       58|         28|            0| 28| #>  #>  #> **Imputation 2** #> USER ALERT: For exposure ESETA1 imputation 2 using gbm and short formulas:  #> The median absolute value relation between exposure and confounder is 0.04 (range = -0.12 - 0.19). #>  #>  #> As shown below, 9 out of 131 (7%) covariates across time points, corresponding to 5 out of 32 domains, remain imbalanced with a remaining median absolute value correlation/std mean difference of 0.12 (range= -0.12-0.19): #> Table: Imbalanced Covariates for imputation 2 using gbm and short formulas #>  #> | exp_time| balanced_n| imbalanced_n|  n| #> |--------:|----------:|------------:|--:| #> |        6|         15|            3| 18| #> |       15|         27|            1| 28| #> |       24|         23|            4| 27| #> |       35|         29|            1| 30| #> |       58|         28|            0| 28| #>  #>  #> **Imputation 3** #> USER ALERT: For exposure ESETA1 imputation 3 using gbm and short formulas:  #> The median absolute value relation between exposure and confounder is 0.03 (range = -0.09 - 0.18). #>  #>  #> As shown below, 3 out of 131 (2%) covariates across time points, corresponding to 2 out of 32 domains, remain imbalanced with a remaining median absolute value correlation/std mean difference of 0.1 (range= 0.1-0.18): #> Table: Imbalanced Covariates for imputation 3 using gbm and short formulas #>  #> | exp_time| balanced_n| imbalanced_n|  n| #> |--------:|----------:|------------:|--:| #> |        6|         18|            0| 18| #> |       15|         26|            2| 28| #> |       24|         26|            1| 27| #> |       35|         30|            0| 30| #> |       58|         28|            0| 28| #>  #>  #> **Imputation 4** #> USER ALERT: For exposure ESETA1 imputation 4 using gbm and short formulas:  #> The median absolute value relation between exposure and confounder is 0.03 (range = -0.1 - 0.17). #>  #>  #> As shown below, 5 out of 131 (4%) covariates across time points, corresponding to 3 out of 32 domains, remain imbalanced with a remaining median absolute value correlation/std mean difference of 0.1 (range= -0.1-0.17): #> Table: Imbalanced Covariates for imputation 4 using gbm and short formulas #>  #> | exp_time| balanced_n| imbalanced_n|  n| #> |--------:|----------:|------------:|--:| #> |        6|         18|            0| 18| #> |       15|         26|            2| 28| #> |       24|         24|            3| 27| #> |       35|         30|            0| 30| #> |       58|         28|            0| 28| #>  #>  #> **Imputation 5** #> USER ALERT: For exposure ESETA1 imputation 5 using gbm and short formulas:  #> The median absolute value relation between exposure and confounder is 0.03 (range = -0.08 - 0.15). #>  #>  #> As shown below, 5 out of 131 (4%) covariates across time points, corresponding to 3 out of 32 domains, remain imbalanced with a remaining median absolute value correlation/std mean difference of 0.11 (range= -0.08-0.15): #> Table: Imbalanced Covariates for imputation 5 using gbm and short formulas #>  #> | exp_time| balanced_n| imbalanced_n|  n| #> |--------:|----------:|------------:|--:| #> |        6|         18|            0| 18| #> |       15|         27|            1| 28| #> |       24|         24|            3| 27| #> |       35|         30|            0| 30| #> |       58|         27|            1| 28| #>  #>  #>  #> *** Averaging Across All Imputations *** #> USER ALERT: Averaging across all imputed datasets for exposure ESETA1 using the short formulas and gbm : #> The median absolute value relation between exposure and confounder is 0.02 (range = -0.09-0.17). #>  #> As shown below, the following 4 covariates across time points out of 131 total (3.05%) spanning 3 domains out of 33 (9.09%) are imbalanced with a remaining median absolute value correlation/std mean difference in relation to ESETA1 of 0.1 (range=-0.08-0.17) : #>  #> Table: Imbalanced Covariates #>  #> |   |exposure | exp_time| covar_time|covariate     |    avg_bal| bal_thresh| balanced| #> |:--|:--------|--------:|----------:|:-------------|----------:|----------:|--------:| #> |24 |ESETA1   |       15|          6|ESETA1.6      |  0.1702534|       0.10|        0| #> |52 |ESETA1   |       24|         15|ESETA1.15     |  0.1233872|       0.10|        0| #> |57 |ESETA1   |       24|         15|InRatioCor.15 | -0.0774581|       0.05|        0| #> |63 |ESETA1   |       24|          0|PmEd2         | -0.0542662|       0.05|        0| weights <- weights.bart  balance_stats.bart <- assessBalance(data = data, exposure = exposure, exposure_time_pts = exposure_time_pts, #required                                     outcome = outcome, type = type, formulas = formulas, weights = weights, #required                                     balance_thresh = balance_thresh, imp_conf = imp_conf, #optional                                     home_dir = home_dir, verbose = verbose, save.out = save.out) #optional #> USER ALERT: The following statistics display covariate imbalance at each exposure time point following IPTW weighting, using short formulas. #>  #> **Imputation 1** #> USER ALERT: For exposure ESETA1 imputation 1 using bart and short formulas:  #> The median absolute value relation between exposure and confounder is 0.03 (range = -0.1 - 0.17). #>  #>  #> As shown below, 11 out of 131 (8%) covariates across time points, corresponding to 5 out of 32 domains, remain imbalanced with a remaining median absolute value correlation/std mean difference of 0.1 (range= -0.1-0.17): #> Table: Imbalanced Covariates for imputation 1 using bart and short formulas #>  #> | exp_time| balanced_n| imbalanced_n|  n| #> |--------:|----------:|------------:|--:| #> |        6|         17|            1| 18| #> |       15|         25|            3| 28| #> |       24|         25|            2| 27| #> |       35|         26|            4| 30| #> |       58|         27|            1| 28| #>  #>  #> **Imputation 2** #> USER ALERT: For exposure ESETA1 imputation 2 using bart and short formulas:  #> The median absolute value relation between exposure and confounder is 0.02 (range = -0.11 - 0.19). #>  #>  #> As shown below, 6 out of 131 (5%) covariates across time points, corresponding to 4 out of 32 domains, remain imbalanced with a remaining median absolute value correlation/std mean difference of 0.12 (range= -0.11-0.19): #> Table: Imbalanced Covariates for imputation 2 using bart and short formulas #>  #> | exp_time| balanced_n| imbalanced_n|  n| #> |--------:|----------:|------------:|--:| #> |        6|         18|            0| 18| #> |       15|         26|            2| 28| #> |       24|         25|            2| 27| #> |       35|         28|            2| 30| #> |       58|         28|            0| 28| #>  #>  #> **Imputation 3** #> USER ALERT: For exposure ESETA1 imputation 3 using bart and short formulas:  #> The median absolute value relation between exposure and confounder is 0.02 (range = -0.1 - 0.19). #>  #>  #> As shown below, 10 out of 131 (8%) covariates across time points, corresponding to 4 out of 32 domains, remain imbalanced with a remaining median absolute value correlation/std mean difference of 0.11 (range= -0.06-0.19): #> Table: Imbalanced Covariates for imputation 3 using bart and short formulas #>  #> | exp_time| balanced_n| imbalanced_n|  n| #> |--------:|----------:|------------:|--:| #> |        6|         17|            1| 18| #> |       15|         25|            3| 28| #> |       24|         25|            2| 27| #> |       35|         28|            2| 30| #> |       58|         26|            2| 28| #>  #>  #> **Imputation 4** #> USER ALERT: For exposure ESETA1 imputation 4 using bart and short formulas:  #> The median absolute value relation between exposure and confounder is 0.03 (range = -0.12 - 0.25). #>  #>  #> As shown below, 15 out of 131 (11%) covariates across time points, corresponding to 9 out of 32 domains, remain imbalanced with a remaining median absolute value correlation/std mean difference of 0.12 (range= -0.12-0.25): #> Table: Imbalanced Covariates for imputation 4 using bart and short formulas #>  #> | exp_time| balanced_n| imbalanced_n|  n| #> |--------:|----------:|------------:|--:| #> |        6|         15|            3| 18| #> |       15|         24|            4| 28| #> |       24|         23|            4| 27| #> |       35|         28|            2| 30| #> |       58|         26|            2| 28| #>  #>  #> **Imputation 5** #> USER ALERT: For exposure ESETA1 imputation 5 using bart and short formulas:  #> The median absolute value relation between exposure and confounder is 0.02 (range = -0.11 - 0.15). #>  #>  #> As shown below, 9 out of 131 (7%) covariates across time points, corresponding to 4 out of 32 domains, remain imbalanced with a remaining median absolute value correlation/std mean difference of 0.11 (range= -0.11-0.15): #> Table: Imbalanced Covariates for imputation 5 using bart and short formulas #>  #> | exp_time| balanced_n| imbalanced_n|  n| #> |--------:|----------:|------------:|--:| #> |        6|         18|            0| 18| #> |       15|         27|            1| 28| #> |       24|         24|            3| 27| #> |       35|         27|            3| 30| #> |       58|         26|            2| 28| #>  #>  #>  #> *** Averaging Across All Imputations *** #> USER ALERT: Averaging across all imputed datasets for exposure ESETA1 using the short formulas and bart : #> The median absolute value relation between exposure and confounder is 0.02 (range = -0.08-0.19). #>  #> As shown below, the following 8 covariates across time points out of 131 total (6.11%) spanning 3 domains out of 33 (9.09%) are imbalanced with a remaining median absolute value correlation/std mean difference in relation to ESETA1 of 0.1 (range=-0.08-0.19) : #>  #> Table: Imbalanced Covariates #>  #> |    |exposure | exp_time| covar_time|covariate     |    avg_bal| bal_thresh| balanced| #> |:---|:--------|--------:|----------:|:-------------|----------:|----------:|--------:| #> |19  |ESETA1   |       15|          6|B18Raw.6      |  0.1023463|       0.10|        0| #> |24  |ESETA1   |       15|          6|ESETA1.6      |  0.1913646|       0.10|        0| #> |29  |ESETA1   |       15|          6|InRatioCor.6  | -0.0504404|       0.05|        0| #> |52  |ESETA1   |       24|         15|ESETA1.15     |  0.1482199|       0.10|        0| #> |57  |ESETA1   |       24|         15|InRatioCor.15 | -0.0828657|       0.05|        0| #> |80  |ESETA1   |       35|         24|ESETA1.24     |  0.1207235|       0.10|        0| #> |85  |ESETA1   |       35|         24|InRatioCor.24 | -0.0500553|       0.05|        0| #> |108 |ESETA1   |       58|         35|ESETA1.35     |  0.1043126|       0.10|        0| weights <- weights.super   balance_stats.super <- assessBalance(data = data, exposure = exposure, exposure_time_pts = exposure_time_pts, #required                                      outcome = outcome, type = type, formulas = formulas, weights = weights, #required                                      balance_thresh = balance_thresh, imp_conf = imp_conf, #optional                                      home_dir = home_dir, verbose = verbose, save.out = save.out) #optional #> USER ALERT: The following statistics display covariate imbalance at each exposure time point following IPTW weighting, using short formulas. #>  #> **Imputation 1** #> USER ALERT: For exposure ESETA1 imputation 1 using super and short formulas:  #> The median absolute value relation between exposure and confounder is 0.02 (range = -0.12 - 0.17). #>  #>  #> As shown below, 3 out of 131 (2%) covariates across time points, corresponding to 2 out of 32 domains, remain imbalanced with a remaining median absolute value correlation/std mean difference of 0.16 (range= -0.12-0.17): #> Table: Imbalanced Covariates for imputation 1 using super and short formulas #>  #> | exp_time| balanced_n| imbalanced_n|  n| #> |--------:|----------:|------------:|--:| #> |        6|         18|            0| 18| #> |       15|         26|            2| 28| #> |       24|         26|            1| 27| #> |       35|         30|            0| 30| #> |       58|         28|            0| 28| #>  #>  #> **Imputation 2** #> USER ALERT: For exposure ESETA1 imputation 2 using super and short formulas:  #> The median absolute value relation between exposure and confounder is 0.02 (range = -0.08 - 0.22). #>  #>  #> As shown below, 3 out of 131 (2%) covariates across time points, corresponding to 3 out of 32 domains, remain imbalanced with a remaining median absolute value correlation/std mean difference of 0.11 (range= 0.07-0.22): #> Table: Imbalanced Covariates for imputation 2 using super and short formulas #>  #> | exp_time| balanced_n| imbalanced_n|  n| #> |--------:|----------:|------------:|--:| #> |        6|         17|            1| 18| #> |       15|         26|            2| 28| #> |       24|         27|            0| 27| #> |       35|         30|            0| 30| #> |       58|         28|            0| 28| #>  #>  #> **Imputation 3** #> USER ALERT: For exposure ESETA1 imputation 3 using super and short formulas:  #> The median absolute value relation between exposure and confounder is 0.02 (range = -0.07 - 0.2). #>  #>  #> As shown below, 4 out of 131 (3%) covariates across time points, corresponding to 3 out of 32 domains, remain imbalanced with a remaining median absolute value correlation/std mean difference of 0.11 (range= -0.05-0.2): #> Table: Imbalanced Covariates for imputation 3 using super and short formulas #>  #> | exp_time| balanced_n| imbalanced_n|  n| #> |--------:|----------:|------------:|--:| #> |        6|         18|            0| 18| #> |       15|         25|            3| 28| #> |       24|         26|            1| 27| #> |       35|         30|            0| 30| #> |       58|         28|            0| 28| #>  #>  #> **Imputation 4** #> USER ALERT: For exposure ESETA1 imputation 4 using super and short formulas:  #> The median absolute value relation between exposure and confounder is 0.02 (range = -0.06 - 0.2). #>  #>  #> As shown below, 4 out of 131 (3%) covariates across time points, corresponding to 3 out of 32 domains, remain imbalanced with a remaining median absolute value correlation/std mean difference of 0.13 (range= 0.11-0.2): #> Table: Imbalanced Covariates for imputation 4 using super and short formulas #>  #> | exp_time| balanced_n| imbalanced_n|  n| #> |--------:|----------:|------------:|--:| #> |        6|         17|            1| 18| #> |       15|         27|            1| 28| #> |       24|         25|            2| 27| #> |       35|         30|            0| 30| #> |       58|         28|            0| 28| #>  #>  #> **Imputation 5** #> USER ALERT: For exposure ESETA1 imputation 5 using super and short formulas:  #> The median absolute value relation between exposure and confounder is 0.02 (range = -0.05 - 0.16). #>  #>  #> As shown below, 3 out of 131 (2%) covariates across time points, corresponding to 1 out of 32 domains, remain imbalanced with a remaining median absolute value correlation/std mean difference of 0.13 (range= 0.1-0.16): #> Table: Imbalanced Covariates for imputation 5 using super and short formulas #>  #> | exp_time| balanced_n| imbalanced_n|  n| #> |--------:|----------:|------------:|--:| #> |        6|         18|            0| 18| #> |       15|         27|            1| 28| #> |       24|         26|            1| 27| #> |       35|         30|            0| 30| #> |       58|         27|            1| 28| #>  #>  #>  #> *** Averaging Across All Imputations *** #> USER ALERT: Averaging across all imputed datasets for exposure ESETA1 using the short formulas and super : #> The median absolute value relation between exposure and confounder is 0.02 (range = -0.05-0.19). #>  #> As shown below, the following 2 covariates across time points out of 131 total (1.53%) spanning 1 domains out of 33 (3.03%) are imbalanced with a remaining median absolute value correlation/std mean difference in relation to ESETA1 of 0.16 (range=0.12-0.19) : #>  #> Table: Imbalanced Covariates #>  #> |   |exposure | exp_time| covar_time|covariate |   avg_bal| bal_thresh| balanced| #> |:--|:--------|--------:|----------:|:---------|---------:|----------:|--------:| #> |24 |ESETA1   |       15|          6|ESETA1.6  | 0.1904288|        0.1|        0| #> |52 |ESETA1   |       24|         15|ESETA1.15 | 0.1249937|        0.1|        0|"},{"path":"https://istallworthy.github.io/devMSMs/articles/Workflow_Continuous_Exposure.html","id":"step-3-create-updated-formulas-re-specify-weights-using-optimal-weighting-method","dir":"Articles","previous_headings":"Phase 1: Confounder Adjustment","what":"Step 3: Create Updated Formulas & Re-Specify Weights Using Optimal Weighting Method","title":"Workflow: Continuous Exposure","text":"goal next step assess best-performing weights created shortened balancing formulas (containing time-varying confounders t-1) relative full balancing formulas, add shortened formulas time-varying confounders lags > t-1 successfully balanced, create final round weights.","code":""},{"path":"https://istallworthy.github.io/devMSMs/articles/Workflow_Continuous_Exposure.html","id":"step-3a--assess-balance-with-full-balancing-formulas","dir":"Articles","previous_headings":"Phase 1: Confounder Adjustment > Step 3: Create Updated Formulas & Re-Specify Weights Using Optimal Weighting Method","what":"Step 3a. Assess balance with full balancing formulas","title":"Workflow: Continuous Exposure","text":"next assess whether weights created previous step best-performing weights method (.e., using SuperLearner method) using simplified balancing formulas also achieve balance full formulas. , revisit assumption balancing proximal time-varying confounders (t-1) confers balance confounders distal prior time points (t- 1+). assessing time point well weights just created using short formulas successfully balance confounders (including time-varying confounders time points prior) original, full formulas. use assessBalance() function (type = “weighted”) full balancing formulas. required inputs using assessBalance() function assess best weights achieve balance full formulas : complete data (data frame, mids object, list imputed datasets dataframes wide format), exposure (e.g., “variable”), exposure time points, outcome (e.g., “variable.t”), providing full formulas (see Step 1a), setting type = “weighted”, providing best weights (see Step 2c). optional inputs detailed Step 1b. assessBalance() function saves following .csv .html files ‘balance/weighted/’ folder: tables balance statistics confounders, tables balance statistics covariates imbalanced, overall balance summary table (averaged across imputed datasets). Within ‘balance/type/plots/’ folder, function outputs .jpeg files summary love plots depicting confounder balance exposure time point. function returns data frame (list) balance statistics, balance thresholds, binary balanced tag confounder relevant exposure time point. , assess weights created using SuperLearner method relative full balancing formulas.       shown , using SuperLearner weighting method full formulas, find median absolute value correlation exposure confounder 0.03 total 13 confounders remaining imbalanced.","code":"type <- \"weighted\"  formulas <- full_formulas  weights <- weights.super  balance_stats <- assessBalance(data = data, exposure = exposure, exposure_time_pts = exposure_time_pts, #required                                outcome = outcome, type = type, formulas = formulas, weights = weights, #required                                balance_thresh = balance_thresh, imp_conf = imp_conf, #optional                                home_dir = home_dir, verbose = verbose, save.out = save.out) #optional #> USER ALERT: The following statistics display covariate imbalance at each exposure time point following IPTW weighting, using full formulas. #>  #> **Imputation 1** #> USER ALERT: For exposure ESETA1 imputation 1 using super and full formulas:  #> The median absolute value relation between exposure and confounder is 0.02 (range = -0.12 - 0.19). #>  #>  #> As shown below, 9 out of 191 (5%) covariates across time points, corresponding to 3 out of 33 domains, remain imbalanced with a remaining median absolute value correlation/std mean difference of 0.13 (range= -0.12-0.19): #> Table: Imbalanced Covariates for imputation 1 using super and full formulas #>  #> | exp_time| balanced_n| imbalanced_n|  n| #> |--------:|----------:|------------:|--:| #> |        6|         18|            0| 18| #> |       15|         26|            2| 28| #> |       24|         35|            2| 37| #> |       35|         46|            3| 49| #> |       58|         57|            2| 59| #>  #>  #> **Imputation 2** #> USER ALERT: For exposure ESETA1 imputation 2 using super and full formulas:  #> The median absolute value relation between exposure and confounder is 0.02 (range = -0.08 - 0.22). #>  #>  #> As shown below, 7 out of 191 (4%) covariates across time points, corresponding to 4 out of 33 domains, remain imbalanced with a remaining median absolute value correlation/std mean difference of 0.11 (range= 0.07-0.22): #> Table: Imbalanced Covariates for imputation 2 using super and full formulas #>  #> | exp_time| balanced_n| imbalanced_n|  n| #> |--------:|----------:|------------:|--:| #> |        6|         17|            1| 18| #> |       15|         26|            2| 28| #> |       24|         36|            1| 37| #> |       35|         47|            2| 49| #> |       58|         58|            1| 59| #>  #>  #> **Imputation 3** #> USER ALERT: For exposure ESETA1 imputation 3 using super and full formulas:  #> The median absolute value relation between exposure and confounder is 0.03 (range = -0.08 - 0.21). #>  #>  #> As shown below, 12 out of 191 (6%) covariates across time points, corresponding to 3 out of 33 domains, remain imbalanced with a remaining median absolute value correlation/std mean difference of 0.11 (range= -0.08-0.21): #> Table: Imbalanced Covariates for imputation 3 using super and full formulas #>  #> | exp_time| balanced_n| imbalanced_n|  n| #> |--------:|----------:|------------:|--:| #> |        6|         18|            0| 18| #> |       15|         25|            3| 28| #> |       24|         34|            3| 37| #> |       35|         46|            3| 49| #> |       58|         56|            3| 59| #>  #>  #> **Imputation 4** #> USER ALERT: For exposure ESETA1 imputation 4 using super and full formulas:  #> The median absolute value relation between exposure and confounder is 0.03 (range = -0.08 - 0.21). #>  #>  #> As shown below, 11 out of 191 (6%) covariates across time points, corresponding to 4 out of 33 domains, remain imbalanced with a remaining median absolute value correlation/std mean difference of 0.12 (range= -0.07-0.21): #> Table: Imbalanced Covariates for imputation 4 using super and full formulas #>  #> | exp_time| balanced_n| imbalanced_n|  n| #> |--------:|----------:|------------:|--:| #> |        6|         17|            1| 18| #> |       15|         27|            1| 28| #> |       24|         34|            3| 37| #> |       35|         46|            3| 49| #> |       58|         56|            3| 59| #>  #>  #> **Imputation 5** #> USER ALERT: For exposure ESETA1 imputation 5 using super and full formulas:  #> The median absolute value relation between exposure and confounder is 0.03 (range = -0.07 - 0.21). #>  #>  #> As shown below, 11 out of 191 (6%) covariates across time points, corresponding to 3 out of 33 domains, remain imbalanced with a remaining median absolute value correlation/std mean difference of 0.11 (range= -0.05-0.21): #> Table: Imbalanced Covariates for imputation 5 using super and full formulas #>  #> | exp_time| balanced_n| imbalanced_n|  n| #> |--------:|----------:|------------:|--:| #> |        6|         18|            0| 18| #> |       15|         27|            1| 28| #> |       24|         35|            2| 37| #> |       35|         45|            4| 49| #> |       58|         55|            4| 59| #>  #>  #>  #> *** Averaging Across All Imputations *** #> USER ALERT: Averaging across all imputed datasets for exposure ESETA1 using the full formulas and super : #> The median absolute value relation between exposure and confounder is 0.02 (range = -0.06-0.2). #>  #> As shown below, the following 5 covariates across time points out of 191 total (2.62%) spanning 1 domains out of 33 (3.03%) are imbalanced with a remaining median absolute value correlation/std mean difference in relation to ESETA1 of 0.16 (range=0.12-0.2) : #>  #> Table: Imbalanced Covariates #>  #> |   |exposure | exp_time| covar_time|covariate |   avg_bal| bal_thresh| balanced| #> |:--|:--------|--------:|----------:|:---------|---------:|----------:|--------:| #> |24 |ESETA1   |       15|          6|ESETA1.6  | 0.1904288|        0.1|        0| #> |54 |ESETA1   |       24|         15|ESETA1.15 | 0.1249937|        0.1|        0| #> |55 |ESETA1   |       24|          6|ESETA1.6  | 0.1630486|        0.1|        0| #> |94 |ESETA1   |       35|         15|ESETA1.15 | 0.2007183|        0.1|        0| #> |96 |ESETA1   |       35|          6|ESETA1.6  | 0.1461047|        0.1|        0|"},{"path":"https://istallworthy.github.io/devMSMs/articles/Workflow_Continuous_Exposure.html","id":"step-3b--update-simplified-formulas","dir":"Articles","previous_headings":"Phase 1: Confounder Adjustment > Step 3: Create Updated Formulas & Re-Specify Weights Using Optimal Weighting Method","what":"Step 3b. Update simplified formulas","title":"Workflow: Continuous Exposure","text":"Subsequently, update shortened formulas include time-varying confounders (t-1 +) successfully balanced full formulas, shown . , create final round balancing formulas using createFormulas() function (setting type = “update\" providing balance statistics bal_stats field). createFormulas() function draws user-provided balance statistics automatically identify add formulas exposure time point time-varying confounders lags greater 1 remain imbalanced weighting. function displays balancing formula console message user time-varying confounders added. required input update shortened balancing formulas using createFormulas() function : exposure (e.g., “variable”), exposure time points, outcome (e.g., “variable.t”), list time-varying confounders (e.g., “variable.time”), list time invariant confounders (e.g., “variable”), setting type = “update”, providing bal_stats balance statistics just created Step 3a. optional input detailed Step 1a. createFormulas() function saves .csv .rds files containing balancing formulas exposure time point specified type ‘formulas/update/’ folder. function returns list balancing formulas labeled type, exposure, outcome, exposure time point. shown , several imbalanced confounders lags greater t-1 added short formulas exposure time points 35-58. instance, 35-month time point, economic strain 6 15 months well attention problems income 6 months added balancing formula.","code":"type <- \"update\"  bal_stats <- balance_stats  updated_formulas <- createFormulas(exposure = exposure, exposure_time_pts = exposure_time_pts, outcome = outcome, #required                                    type = type, ti_confounders = ti_confounders, tv_confounders = tv_confounders, bal_stats = bal_stats, #required                                    concur_conf = concur_conf, keep_conf = keep_conf, #optional                                    home_dir = home_dir, verbose = verbose, save.out = save.out) #optional #> USER ALERT: Please manually inspect the updated balancing formula below that includes time-varying confounders at t-1 and those greater at further lags that remained imbalanced: #> The update formula for ESETA1 - StrDif_Tot.58 at ESETA1 time point 6 is:  #> ESETA1.6 ~ BioDadInHH2 + caregiv_health + DrnkFreq + gov_assist +  #>     HomeOwnd + KFASTScr + peri_health + PmAge2 + PmBlac2 + PmEd2 +  #>     PmMrSt2 + RHealth + RMomAgeU + SmokTotl + state + SurpPreg +  #>     SWghtLB + TcBlac2 #> <environment: 0x555ec3a949e0> #> USER ALERT: Please manually inspect the updated balancing formula below that includes time-varying confounders at t-1 and those greater at further lags that remained imbalanced: #> For ESETA1 at exposure time point 15 no time-varying confounders at additional lags were added.  #>  #> The update formula for ESETA1 - StrDif_Tot.58 at ESETA1 time point 15 is:  #> ESETA1.15 ~ B18Raw.6 + BioDadInHH2 + caregiv_health + CORTB.6 +  #>     DrnkFreq + ESETA1.6 + gov_assist + HOMEETA1.6 + HomeOwnd +  #>     IBRAttn.6 + InRatioCor.6 + KFASTScr + MDI.6 + peri_health +  #>     PmAge2 + PmBlac2 + PmEd2 + PmMrSt2 + RHasSO.6 + RHealth +  #>     RMomAgeU + SAAmylase.6 + SmokTotl + state + SurpPreg + SWghtLB +  #>     TcBlac2 + WndNbrhood.6 #> <environment: 0x555ec3a949e0> #> USER ALERT: Please manually inspect the updated balancing formula below that includes time-varying confounders at t-1 and those greater at further lags that remained imbalanced: #> For ESETA1 at exposure time point 24 the following covariate(s) will be added to the short balancing formula: #>                           ESETA1.6  #>  #> The update formula for ESETA1 - StrDif_Tot.58 at ESETA1 time point 24 is:  #> ESETA1.24 ~ B18Raw.15 + BioDadInHH2 + caregiv_health + CORTB.15 +  #>     DrnkFreq + ESETA1.15 + ESETA1.6 + gov_assist + HOMEETA1.15 +  #>     HomeOwnd + IBRAttn.15 + InRatioCor.15 + KFASTScr + MDI.15 +  #>     peri_health + PmAge2 + PmBlac2 + PmEd2 + PmMrSt2 + RHasSO.15 +  #>     RHealth + RMomAgeU + SAAmylase.15 + SmokTotl + state + SurpPreg +  #>     SWghtLB + TcBlac2 #> <environment: 0x555ec3a949e0> #> USER ALERT: Please manually inspect the updated balancing formula below that includes time-varying confounders at t-1 and those greater at further lags that remained imbalanced: #> For ESETA1 at exposure time point 35 the following covariate(s) will be added to the short balancing formula: #>                           ESETA1.15, ESETA1.6  #>  #> The update formula for ESETA1 - StrDif_Tot.58 at ESETA1 time point 35 is:  #> ESETA1.35 ~ B18Raw.24 + BioDadInHH2 + caregiv_health + CORTB.24 +  #>     DrnkFreq + EARS_TJo.24 + ESETA1.15 + ESETA1.24 + ESETA1.6 +  #>     gov_assist + HOMEETA1.24 + HomeOwnd + IBRAttn.24 + InRatioCor.24 +  #>     KFASTScr + LESMnNeg.24 + LESMnPos.24 + peri_health + PmAge2 +  #>     PmBlac2 + PmEd2 + PmMrSt2 + RHasSO.24 + RHealth + RMomAgeU +  #>     SAAmylase.24 + SmokTotl + state + SurpPreg + SWghtLB + TcBlac2 +  #>     WndNbrhood.24 #> <environment: 0x555ec3a949e0> #> USER ALERT: Please manually inspect the updated balancing formula below that includes time-varying confounders at t-1 and those greater at further lags that remained imbalanced: #> For ESETA1 at exposure time point 58 no time-varying confounders at additional lags were added.  #>  #> The update formula for ESETA1 - StrDif_Tot.58 at ESETA1 time point 58 is:  #> ESETA1.58 ~ BioDadInHH2 + caregiv_health + DrnkFreq + EARS_TJo.35 +  #>     ESETA1.35 + fscore.35 + gov_assist + HOMEETA1.35 + HomeOwnd +  #>     InRatioCor.35 + KFASTScr + LESMnNeg.35 + LESMnPos.35 + peri_health +  #>     PmAge2 + PmBlac2 + PmEd2 + PmMrSt2 + RHasSO.35 + RHealth +  #>     RMomAgeU + SmokTotl + state + StrDif_Tot.35 + SurpPreg +  #>     SWghtLB + TcBlac2 + WndNbrhood.35 #> <environment: 0x555ec3a949e0>"},{"path":"https://istallworthy.github.io/devMSMs/articles/Workflow_Continuous_Exposure.html","id":"step-3c--create-final-balancing-weights","dir":"Articles","previous_headings":"Phase 1: Confounder Adjustment > Step 3: Create Updated Formulas & Re-Specify Weights Using Optimal Weighting Method","what":"Step 3c. Create final balancing weights","title":"Workflow: Continuous Exposure","text":"Next, create final set balancing weights using optimal weighting method identified Step 2c final, updated simplified formulas previous step using createWeights() function (method = “super’), SuperLearner method optimal weighting method identified Step 2c. function calls weightitMSM() function WeightIt package (Greifer, 2023) uses time-specific formulas create weights time point automatically multiplying together create one weight per person. Weights stabilized, recommended (Cole & Hernan, 2008; Thoemmes & Ong, 2016) distributions saved home directory inspection. required inputs using createWeights() function create final round IPTW balancing weights using updated short balancing formulas : complete data (data frame, mids object, list imputed datasets dataframes wide format), exposure (variable time points), outcome (e.g., “variable.time”), best-performing weights method, updated formulas (see Step 3a). optional input createWeights() function listed Step 2b. createWeights() function saves .rds file weights ‘weights/’ folder, histogram weights distribution ‘weights/histograms/’ folder, .csv file data weights appended ‘weights/values/’ folder. function returns list weights objects form WeightItMSM output list weights either single nested list (labeled “0” data data frame format) nested lists imputed dataset (data imputed). , use updated formulas SuperLearner weighting method create new round IPTW balancing weights.      shown , weights median value 1 heavy right tail.","code":"formulas <- updated_formulas  method <- \"super\"  #all inputs final_weights <- createWeights(data = data, exposure = exposure, outcome = outcome, formulas = formulas, #required                                method = method, read_in_from_file = FALSE, #optional                                home_dir = home_dir, verbose = verbose, save.out = save.out) #optional #> For imputation 1 and the super weighting method, the median weight value is 0.98 (SD= 1.69; range= 0.02-42.45 ). #> For imputation 2 and the super weighting method, the median weight value is 1.01 (SD= 1.15; range= 0.03-16.65 ). #> For imputation 3 and the super weighting method, the median weight value is 1.01 (SD= 1; range= 0.04-12.06 ). #> For imputation 4 and the super weighting method, the median weight value is 1.01 (SD= 1.23; range= 0.04-20.99 ). #> For imputation 5 and the super weighting method, the median weight value is 0.98 (SD= 1.22; range= 0.03-15.97 )."},{"path":"https://istallworthy.github.io/devMSMs/articles/Workflow_Continuous_Exposure.html","id":"d--trim-final-balancing-weights","dir":"Articles","previous_headings":"Phase 1: Confounder Adjustment > Step 3: Create Updated Formulas & Re-Specify Weights Using Optimal Weighting Method","what":"3d. Trim final balancing weights","title":"Workflow: Continuous Exposure","text":"next step trim winsorize final set weights eliminate heavy right tail distribution using trimWeights() function. function draws Weightit package (Griefer, 2023) plots summarizes trimmed weights. function outputs list trimmed weights either single nested list (labeled “0” data data frame format) nested lists imputed dataset (data imputed). required inputs trimWeights() function : exposure (variable time points), outcome (e.g., “variable.t”), final weights just created. optional input allows user specify quantile value (0-1; default 0.95) weights replaced weight value quantile reduce heavy right tail. , use default 95th percentile trimming weights. trimWeights() function saves .rds file trimmed weights ‘weights/values/’ folder histogram trimmed weights ‘weights/histograms/’ folder. function returns list weights objects, containing trimmed weights, form weightitMSM output.      shown , weights still median value 1 much shorter right tail.  create trimmed weights using two quantile values + /- ~0.3 previously chosen quantile value, order conduct recommended sensitivity analyses subsequent steps. first create weights 92nd quantile value.      98th quantile value.      find comparable descriptive statistics sets weights, upper range value varying quantile cutoff. assess consequences different ranges subsequent steps.","code":"quantile <- 0.95 weights <- final_weights  trim_weights <- trimWeights(exposure = exposure, outcome = outcome, weights = weights, #required                             quantile = quantile, #optional                             home_dir = home_dir, verbose = verbose, save.out = save.out) #optional #> Trimming weights to 95%. #>  #> For imputation 1 and the ESETA1-StrDif_Tot.58 relation, following trimming at the 0.95 quantile, the median weight value is 0.98 (SD= 0.68; range= 0.02-3). #> Trimming weights to 95%. #>  #> For imputation 2 and the ESETA1-StrDif_Tot.58 relation, following trimming at the 0.95 quantile, the median weight value is 1.01 (SD= 0.61; range= 0.03-3). #> Trimming weights to 95%. #>  #> For imputation 3 and the ESETA1-StrDif_Tot.58 relation, following trimming at the 0.95 quantile, the median weight value is 1.01 (SD= 0.64; range= 0.04-3). #> Trimming weights to 95%. #>  #> For imputation 4 and the ESETA1-StrDif_Tot.58 relation, following trimming at the 0.95 quantile, the median weight value is 1.01 (SD= 0.67; range= 0.04-3). #> Trimming weights to 95%. #>  #> For imputation 5 and the ESETA1-StrDif_Tot.58 relation, following trimming at the 0.95 quantile, the median weight value is 0.98 (SD= 0.65; range= 0.03-3). quantile <- 0.92   trim_weights.s1 <- trimWeights(exposure = exposure, outcome = outcome, weights = weights, #required                                quantile = quantile, #optional                                home_dir = home_dir, verbose = verbose, save.out = save.out) #optional #> Trimming weights to 92%. #>  #> For imputation 1 and the ESETA1-StrDif_Tot.58 relation, following trimming at the 0.92 quantile, the median weight value is 0.98 (SD= 0.59; range= 0.02-2). #> Trimming weights to 92%. #>  #> For imputation 2 and the ESETA1-StrDif_Tot.58 relation, following trimming at the 0.92 quantile, the median weight value is 1.01 (SD= 0.55; range= 0.03-2). #> Trimming weights to 92%. #>  #> For imputation 3 and the ESETA1-StrDif_Tot.58 relation, following trimming at the 0.92 quantile, the median weight value is 1.01 (SD= 0.57; range= 0.04-2). #> Trimming weights to 92%. #>  #> For imputation 4 and the ESETA1-StrDif_Tot.58 relation, following trimming at the 0.92 quantile, the median weight value is 1.01 (SD= 0.58; range= 0.04-2). #> Trimming weights to 92%. #>  #> For imputation 5 and the ESETA1-StrDif_Tot.58 relation, following trimming at the 0.92 quantile, the median weight value is 0.98 (SD= 0.56; range= 0.03-2). quantile <- 0.98   trim_weights.s2 <- trimWeights(exposure = exposure, outcome = outcome, weights = weights, #required                                quantile = quantile, #optional                                home_dir = home_dir, verbose = verbose, save.out = save.out) #optional #> Trimming weights to 98%. #>  #> For imputation 1 and the ESETA1-StrDif_Tot.58 relation, following trimming at the 0.98 quantile, the median weight value is 0.98 (SD= 0.91; range= 0.02-5). #> Trimming weights to 98%. #>  #> For imputation 2 and the ESETA1-StrDif_Tot.58 relation, following trimming at the 0.98 quantile, the median weight value is 1.01 (SD= 0.78; range= 0.03-4). #> Trimming weights to 98%. #>  #> For imputation 3 and the ESETA1-StrDif_Tot.58 relation, following trimming at the 0.98 quantile, the median weight value is 1.01 (SD= 0.78; range= 0.04-4). #> Trimming weights to 98%. #>  #> For imputation 4 and the ESETA1-StrDif_Tot.58 relation, following trimming at the 0.98 quantile, the median weight value is 1.01 (SD= 0.78; range= 0.04-4). #> Trimming weights to 98%. #>  #> For imputation 5 and the ESETA1-StrDif_Tot.58 relation, following trimming at the 0.98 quantile, the median weight value is 0.98 (SD= 0.8; range= 0.03-4)."},{"path":"https://istallworthy.github.io/devMSMs/articles/Workflow_Continuous_Exposure.html","id":"step-4-conduct-final-balance-assessment","dir":"Articles","previous_headings":"Phase 1: Confounder Adjustment","what":"Step 4: Conduct Final Balance Assessment","title":"Workflow: Continuous Exposure","text":"created trimmed final set IPTW balancing weights, next step conduct final evaluation well reduce imbalance possible confounders. assess performance final weights previous step using assessBalance() function (type = “weighted”) full formulas. required inputs using assessBalance() function assess final, trimmed weights achieve balance full formulas : complete data (data frame, mids object, list imputed datasets dataframes wide format), exposure (e.g., “variable”), exposure time points, outcome (e.g., “variable.time”), full formulas (see Step 1a), set type = “weighted”, final, trimmed weights (see Step 3b). optional inputs assessBalance() function detailed Step 1b. assessBalance() function saves following .csv .html files ‘balance/weighted/’ folder: tables balance statistics confounders, tables balance statistics covariates imbalanced, overall balance summary table (averaged across imputed datasets applicable). Within ‘balance/weighted/plots/’ folder, function outputs .jpeg files summary love plots depicting confounder balance exposure time point. function returns data frame (list) balance statistics, balance thresholds, binary balanced tag confounder relevant exposure time point. , assess final weights using full formulas.        assessment, find confounders across 3 domains (economic strain, income--needs-ratio, parental education –ones held stringent balancing threshold due theoretical importance confounders) remain imbalanced several exposure time points median absolute value correlation 0.07 (range = -0.09-0.16). largest remaining correlations exposure confounder economic strain lagged levels economic strain, suggesting high stability construct time. outcome modeling step (Step 5), user option include confounders time invariant measured first time point (6 months) remain imbalanced following final balance assessment covariates. inspect table manually list imbalanced confounders assign covariates.  Subsequently, also assess balance weights trimmed two additional quantile values assess whether final balance assessment sensitive trim value. Importantly, save.= TRUE, running analyses overwrite output main history comparison main output renamed relocated new folder first. Additionally, running first sensitivity check, output check overwritten second sensitivity check renamed re-located new folder first. first assess balance weights trimmed 93rd quantile value.       , find constructs remain imbalanced similar degree.  next assess balance weights trimmed 98th quantile value.       , also find similar level imbalance constructs.","code":"type <- \"weighted\"  formulas <- full_formulas  weights <- trim_weights  final_balance_stats <- assessBalance(data = data, exposure = exposure, exposure_time_pts = exposure_time_pts, #required                                      outcome = outcome, type = type, formulas = formulas, weights = weights, #required                                      balance_thresh = balance_thresh, imp_conf = imp_conf, #optional                                      home_dir = home_dir, verbose = verbose, save.out = save.out) #optional #> USER ALERT: The following statistics display covariate imbalance at each exposure time point following IPTW weighting, using full formulas. #>  #> **Imputation 1** #> USER ALERT: For exposure ESETA1 imputation 1 using super and full formulas:  #> The median absolute value relation between exposure and confounder is 0.03 (range = -0.11 - 0.16). #>  #>  #> As shown below, 19 out of 191 (10%) covariates across time points, corresponding to 4 out of 33 domains, remain imbalanced with a remaining median absolute value correlation/std mean difference of 0.09 (range= -0.11-0.16): #> Table: Imbalanced Covariates for imputation 1 using super and full formulas #>  #> | exp_time| balanced_n| imbalanced_n|  n| #> |--------:|----------:|------------:|--:| #> |        6|         16|            2| 18| #> |       15|         25|            3| 28| #> |       24|         33|            4| 37| #> |       35|         43|            6| 49| #> |       58|         55|            4| 59| #>  #>  #> **Imputation 2** #> USER ALERT: For exposure ESETA1 imputation 2 using super and full formulas:  #> The median absolute value relation between exposure and confounder is 0.03 (range = -0.1 - 0.18). #>  #>  #> As shown below, 16 out of 191 (8%) covariates across time points, corresponding to 4 out of 33 domains, remain imbalanced with a remaining median absolute value correlation/std mean difference of 0.08 (range= -0.1-0.18): #> Table: Imbalanced Covariates for imputation 2 using super and full formulas #>  #> | exp_time| balanced_n| imbalanced_n|  n| #> |--------:|----------:|------------:|--:| #> |        6|         16|            2| 18| #> |       15|         25|            3| 28| #> |       24|         34|            3| 37| #> |       35|         43|            6| 49| #> |       58|         57|            2| 59| #>  #>  #> **Imputation 3** #> USER ALERT: For exposure ESETA1 imputation 3 using super and full formulas:  #> The median absolute value relation between exposure and confounder is 0.03 (range = -0.1 - 0.15). #>  #>  #> As shown below, 20 out of 191 (10%) covariates across time points, corresponding to 4 out of 33 domains, remain imbalanced with a remaining median absolute value correlation/std mean difference of 0.08 (range= -0.1-0.15): #> Table: Imbalanced Covariates for imputation 3 using super and full formulas #>  #> | exp_time| balanced_n| imbalanced_n|  n| #> |--------:|----------:|------------:|--:| #> |        6|         16|            2| 18| #> |       15|         25|            3| 28| #> |       24|         32|            5| 37| #> |       35|         43|            6| 49| #> |       58|         55|            4| 59| #>  #>  #> **Imputation 4** #> USER ALERT: For exposure ESETA1 imputation 4 using super and full formulas:  #> The median absolute value relation between exposure and confounder is 0.03 (range = -0.1 - 0.16). #>  #>  #> As shown below, 20 out of 191 (10%) covariates across time points, corresponding to 5 out of 33 domains, remain imbalanced with a remaining median absolute value correlation/std mean difference of 0.09 (range= -0.1-0.16): #> Table: Imbalanced Covariates for imputation 4 using super and full formulas #>  #> | exp_time| balanced_n| imbalanced_n|  n| #> |--------:|----------:|------------:|--:| #> |        6|         16|            2| 18| #> |       15|         25|            3| 28| #> |       24|         33|            4| 37| #> |       35|         41|            8| 49| #> |       58|         56|            3| 59| #>  #>  #> **Imputation 5** #> USER ALERT: For exposure ESETA1 imputation 5 using super and full formulas:  #> The median absolute value relation between exposure and confounder is 0.03 (range = -0.1 - 0.15). #>  #>  #> As shown below, 22 out of 191 (12%) covariates across time points, corresponding to 5 out of 33 domains, remain imbalanced with a remaining median absolute value correlation/std mean difference of 0.1 (range= -0.1-0.15): #> Table: Imbalanced Covariates for imputation 5 using super and full formulas #>  #> | exp_time| balanced_n| imbalanced_n|  n| #> |--------:|----------:|------------:|--:| #> |        6|         16|            2| 18| #> |       15|         25|            3| 28| #> |       24|         32|            5| 37| #> |       35|         41|            8| 49| #> |       58|         55|            4| 59| #>  #>  #>  #> *** Averaging Across All Imputations *** #> USER ALERT: Averaging across all imputed datasets for exposure ESETA1 using the full formulas and super : #> The median absolute value relation between exposure and confounder is 0.03 (range = -0.1-0.16). #>  #> As shown below, the following 18 covariates across time points out of 191 total (9.42%) spanning 4 domains out of 33 (12.12%) are imbalanced with a remaining median absolute value correlation/std mean difference in relation to ESETA1 of 0.08 (range=-0.1-0.16) : #>  #> Table: Imbalanced Covariates #>  #> |    |exposure | exp_time| covar_time|covariate     |    avg_bal| bal_thresh| balanced| #> |:---|:--------|--------:|----------:|:-------------|----------:|----------:|--------:| #> |4   |ESETA1   |        6|          0|gov_assist    |  0.1103730|       0.10|        0| #> |10  |ESETA1   |        6|          0|PmEd2         | -0.0686087|       0.05|        0| #> |24  |ESETA1   |       15|          6|ESETA1.6      |  0.1593416|       0.10|        0| #> |29  |ESETA1   |       15|          6|InRatioCor.6  | -0.0947966|       0.05|        0| #> |35  |ESETA1   |       15|          0|PmEd2         | -0.0671938|       0.05|        0| #> |54  |ESETA1   |       24|         15|ESETA1.15     |  0.1243604|       0.10|        0| #> |55  |ESETA1   |       24|          6|ESETA1.6      |  0.1084762|       0.10|        0| #> |62  |ESETA1   |       24|         15|InRatioCor.15 | -0.0669691|       0.05|        0| #> |63  |ESETA1   |       24|          6|InRatioCor.6  | -0.0807803|       0.05|        0| #> |94  |ESETA1   |       35|         15|ESETA1.15     |  0.1259548|       0.10|        0| #> |95  |ESETA1   |       35|         24|ESETA1.24     |  0.1088808|       0.10|        0| #> |105 |ESETA1   |       35|         15|InRatioCor.15 | -0.0758084|       0.05|        0| #> |106 |ESETA1   |       35|         24|InRatioCor.24 | -0.0806151|       0.05|        0| #> |107 |ESETA1   |       35|          6|InRatioCor.6  | -0.0967688|       0.05|        0| #> |116 |ESETA1   |       35|          0|PmEd2         | -0.0564182|       0.05|        0| #> |158 |ESETA1   |       58|         15|InRatioCor.15 | -0.0760602|       0.05|        0| #> |159 |ESETA1   |       58|         24|InRatioCor.24 | -0.0668199|       0.05|        0| #> |161 |ESETA1   |       58|          6|InRatioCor.6  | -0.0590303|       0.05|        0| covariates <- c(\"PmEd2\", \"ESETA1.6\", \"InRatioCor.6\") weights <- trim_weights.s1  final_balance_stats.s1 <- assessBalance(data = data, exposure = exposure, exposure_time_pts = exposure_time_pts, #required                                         outcome = outcome, type = type, formulas = formulas, weights = weights, #required                                         balance_thresh = balance_thresh, imp_conf = imp_conf, #optional                                         home_dir = home_dir, verbose = verbose, save.out = save.out) #optional #> USER ALERT: The following statistics display covariate imbalance at each exposure time point following IPTW weighting, using full formulas. #>  #> **Imputation 1** #> USER ALERT: For exposure ESETA1 imputation 1 using super and full formulas:  #> The median absolute value relation between exposure and confounder is 0.04 (range = -0.11 - 0.16). #>  #>  #> As shown below, 19 out of 191 (10%) covariates across time points, corresponding to 4 out of 33 domains, remain imbalanced with a remaining median absolute value correlation/std mean difference of 0.1 (range= -0.11-0.16): #> Table: Imbalanced Covariates for imputation 1 using super and full formulas #>  #> | exp_time| balanced_n| imbalanced_n|  n| #> |--------:|----------:|------------:|--:| #> |        6|         16|            2| 18| #> |       15|         25|            3| 28| #> |       24|         33|            4| 37| #> |       35|         43|            6| 49| #> |       58|         55|            4| 59| #>  #>  #> **Imputation 2** #> USER ALERT: For exposure ESETA1 imputation 2 using super and full formulas:  #> The median absolute value relation between exposure and confounder is 0.03 (range = -0.11 - 0.18). #>  #>  #> As shown below, 19 out of 191 (10%) covariates across time points, corresponding to 4 out of 33 domains, remain imbalanced with a remaining median absolute value correlation/std mean difference of 0.09 (range= -0.11-0.18): #> Table: Imbalanced Covariates for imputation 2 using super and full formulas #>  #> | exp_time| balanced_n| imbalanced_n|  n| #> |--------:|----------:|------------:|--:| #> |        6|         16|            2| 18| #> |       15|         25|            3| 28| #> |       24|         32|            5| 37| #> |       35|         43|            6| 49| #> |       58|         56|            3| 59| #>  #>  #> **Imputation 3** #> USER ALERT: For exposure ESETA1 imputation 3 using super and full formulas:  #> The median absolute value relation between exposure and confounder is 0.03 (range = -0.11 - 0.15). #>  #>  #> As shown below, 20 out of 191 (10%) covariates across time points, corresponding to 4 out of 33 domains, remain imbalanced with a remaining median absolute value correlation/std mean difference of 0.09 (range= -0.11-0.15): #> Table: Imbalanced Covariates for imputation 3 using super and full formulas #>  #> | exp_time| balanced_n| imbalanced_n|  n| #> |--------:|----------:|------------:|--:| #> |        6|         16|            2| 18| #> |       15|         25|            3| 28| #> |       24|         32|            5| 37| #> |       35|         43|            6| 49| #> |       58|         55|            4| 59| #>  #>  #> **Imputation 4** #> USER ALERT: For exposure ESETA1 imputation 4 using super and full formulas:  #> The median absolute value relation between exposure and confounder is 0.03 (range = -0.1 - 0.15). #>  #>  #> As shown below, 21 out of 191 (11%) covariates across time points, corresponding to 5 out of 33 domains, remain imbalanced with a remaining median absolute value correlation/std mean difference of 0.1 (range= -0.1-0.15): #> Table: Imbalanced Covariates for imputation 4 using super and full formulas #>  #> | exp_time| balanced_n| imbalanced_n|  n| #> |--------:|----------:|------------:|--:| #> |        6|         16|            2| 18| #> |       15|         25|            3| 28| #> |       24|         33|            4| 37| #> |       35|         41|            8| 49| #> |       58|         55|            4| 59| #>  #>  #> **Imputation 5** #> USER ALERT: For exposure ESETA1 imputation 5 using super and full formulas:  #> The median absolute value relation between exposure and confounder is 0.03 (range = -0.1 - 0.15). #>  #>  #> As shown below, 24 out of 191 (13%) covariates across time points, corresponding to 5 out of 33 domains, remain imbalanced with a remaining median absolute value correlation/std mean difference of 0.09 (range= -0.1-0.15): #> Table: Imbalanced Covariates for imputation 5 using super and full formulas #>  #> | exp_time| balanced_n| imbalanced_n|  n| #> |--------:|----------:|------------:|--:| #> |        6|         16|            2| 18| #> |       15|         25|            3| 28| #> |       24|         31|            6| 37| #> |       35|         41|            8| 49| #> |       58|         54|            5| 59| #>  #>  #>  #> *** Averaging Across All Imputations *** #> USER ALERT: Averaging across all imputed datasets for exposure ESETA1 using the full formulas and super : #> The median absolute value relation between exposure and confounder is 0.03 (range = -0.11-0.16). #>  #> As shown below, the following 20 covariates across time points out of 191 total (10.47%) spanning 4 domains out of 33 (12.12%) are imbalanced with a remaining median absolute value correlation/std mean difference in relation to ESETA1 of 0.08 (range=-0.11-0.16) : #>  #> Table: Imbalanced Covariates #>  #> |    |exposure | exp_time| covar_time|covariate     |    avg_bal| bal_thresh| balanced| #> |:---|:--------|--------:|----------:|:-------------|----------:|----------:|--------:| #> |4   |ESETA1   |        6|          0|gov_assist    |  0.1214923|       0.10|        0| #> |10  |ESETA1   |        6|          0|PmEd2         | -0.0778453|       0.05|        0| #> |24  |ESETA1   |       15|          6|ESETA1.6      |  0.1581404|       0.10|        0| #> |29  |ESETA1   |       15|          6|InRatioCor.6  | -0.1058926|       0.05|        0| #> |35  |ESETA1   |       15|          0|PmEd2         | -0.0748867|       0.05|        0| #> |54  |ESETA1   |       24|         15|ESETA1.15     |  0.1226825|       0.10|        0| #> |55  |ESETA1   |       24|          6|ESETA1.6      |  0.1073282|       0.10|        0| #> |62  |ESETA1   |       24|         15|InRatioCor.15 | -0.0700370|       0.05|        0| #> |63  |ESETA1   |       24|          6|InRatioCor.6  | -0.0855683|       0.05|        0| #> |70  |ESETA1   |       24|          0|PmEd2         | -0.0547845|       0.05|        0| #> |94  |ESETA1   |       35|         15|ESETA1.15     |  0.1253085|       0.10|        0| #> |95  |ESETA1   |       35|         24|ESETA1.24     |  0.1089149|       0.10|        0| #> |105 |ESETA1   |       35|         15|InRatioCor.15 | -0.0788566|       0.05|        0| #> |106 |ESETA1   |       35|         24|InRatioCor.24 | -0.0838265|       0.05|        0| #> |107 |ESETA1   |       35|          6|InRatioCor.6  | -0.0978463|       0.05|        0| #> |116 |ESETA1   |       35|          0|PmEd2         | -0.0562860|       0.05|        0| #> |158 |ESETA1   |       58|         15|InRatioCor.15 | -0.0795620|       0.05|        0| #> |159 |ESETA1   |       58|         24|InRatioCor.24 | -0.0729618|       0.05|        0| #> |160 |ESETA1   |       58|         35|InRatioCor.35 | -0.0509295|       0.05|        0| #> |161 |ESETA1   |       58|          6|InRatioCor.6  | -0.0647207|       0.05|        0| weights <- trim_weights.s2  final_balance_stats.s2 <- assessBalance(data = data, exposure = exposure, exposure_time_pts = exposure_time_pts, #required                                         outcome = outcome, type = type, formulas = formulas, weights = weights, #required                                         balance_thresh = balance_thresh, imp_conf = imp_conf, #optional                                         home_dir = home_dir, verbose = verbose, save.out = save.out) #optional #> USER ALERT: The following statistics display covariate imbalance at each exposure time point following IPTW weighting, using full formulas. #>  #> **Imputation 1** #> USER ALERT: For exposure ESETA1 imputation 1 using super and full formulas:  #> The median absolute value relation between exposure and confounder is 0.03 (range = -0.09 - 0.17). #>  #>  #> As shown below, 16 out of 191 (8%) covariates across time points, corresponding to 3 out of 33 domains, remain imbalanced with a remaining median absolute value correlation/std mean difference of 0.08 (range= -0.09-0.17): #> Table: Imbalanced Covariates for imputation 1 using super and full formulas #>  #> | exp_time| balanced_n| imbalanced_n|  n| #> |--------:|----------:|------------:|--:| #> |        6|         17|            1| 18| #> |       15|         25|            3| 28| #> |       24|         34|            3| 37| #> |       35|         43|            6| 49| #> |       58|         56|            3| 59| #>  #>  #> **Imputation 2** #> USER ALERT: For exposure ESETA1 imputation 2 using super and full formulas:  #> The median absolute value relation between exposure and confounder is 0.03 (range = -0.09 - 0.19). #>  #>  #> As shown below, 12 out of 191 (6%) covariates across time points, corresponding to 4 out of 33 domains, remain imbalanced with a remaining median absolute value correlation/std mean difference of 0.08 (range= -0.09-0.19): #> Table: Imbalanced Covariates for imputation 2 using super and full formulas #>  #> | exp_time| balanced_n| imbalanced_n|  n| #> |--------:|----------:|------------:|--:| #> |        6|         17|            1| 18| #> |       15|         26|            2| 28| #> |       24|         34|            3| 37| #> |       35|         44|            5| 49| #> |       58|         58|            1| 59| #>  #>  #> **Imputation 3** #> USER ALERT: For exposure ESETA1 imputation 3 using super and full formulas:  #> The median absolute value relation between exposure and confounder is 0.03 (range = -0.08 - 0.16). #>  #>  #> As shown below, 17 out of 191 (9%) covariates across time points, corresponding to 3 out of 33 domains, remain imbalanced with a remaining median absolute value correlation/std mean difference of 0.08 (range= -0.08-0.16): #> Table: Imbalanced Covariates for imputation 3 using super and full formulas #>  #> | exp_time| balanced_n| imbalanced_n|  n| #> |--------:|----------:|------------:|--:| #> |        6|         17|            1| 18| #> |       15|         25|            3| 28| #> |       24|         34|            3| 37| #> |       35|         43|            6| 49| #> |       58|         55|            4| 59| #>  #>  #> **Imputation 4** #> USER ALERT: For exposure ESETA1 imputation 4 using super and full formulas:  #> The median absolute value relation between exposure and confounder is 0.03 (range = -0.1 - 0.16). #>  #>  #> As shown below, 20 out of 191 (10%) covariates across time points, corresponding to 5 out of 33 domains, remain imbalanced with a remaining median absolute value correlation/std mean difference of 0.08 (range= -0.1-0.16): #> Table: Imbalanced Covariates for imputation 4 using super and full formulas #>  #> | exp_time| balanced_n| imbalanced_n|  n| #> |--------:|----------:|------------:|--:| #> |        6|         16|            2| 18| #> |       15|         25|            3| 28| #> |       24|         33|            4| 37| #> |       35|         41|            8| 49| #> |       58|         56|            3| 59| #>  #>  #> **Imputation 5** #> USER ALERT: For exposure ESETA1 imputation 5 using super and full formulas:  #> The median absolute value relation between exposure and confounder is 0.03 (range = -0.09 - 0.15). #>  #>  #> As shown below, 19 out of 191 (10%) covariates across time points, corresponding to 4 out of 33 domains, remain imbalanced with a remaining median absolute value correlation/std mean difference of 0.09 (range= -0.09-0.15): #> Table: Imbalanced Covariates for imputation 5 using super and full formulas #>  #> | exp_time| balanced_n| imbalanced_n|  n| #> |--------:|----------:|------------:|--:| #> |        6|         18|            0| 18| #> |       15|         25|            3| 28| #> |       24|         33|            4| 37| #> |       35|         40|            9| 49| #> |       58|         56|            3| 59| #>  #>  #>  #> *** Averaging Across All Imputations *** #> USER ALERT: Averaging across all imputed datasets for exposure ESETA1 using the full formulas and super : #> The median absolute value relation between exposure and confounder is 0.02 (range = -0.09-0.16). #>  #> As shown below, the following 16 covariates across time points out of 191 total (8.38%) spanning 3 domains out of 33 (9.09%) are imbalanced with a remaining median absolute value correlation/std mean difference in relation to ESETA1 of 0.07 (range=-0.09-0.16) : #>  #> Table: Imbalanced Covariates #>  #> |    |exposure | exp_time| covar_time|covariate     |    avg_bal| bal_thresh| balanced| #> |:---|:--------|--------:|----------:|:-------------|----------:|----------:|--------:| #> |10  |ESETA1   |        6|          0|PmEd2         | -0.0534625|       0.05|        0| #> |24  |ESETA1   |       15|          6|ESETA1.6      |  0.1624215|       0.10|        0| #> |29  |ESETA1   |       15|          6|InRatioCor.6  | -0.0758284|       0.05|        0| #> |35  |ESETA1   |       15|          0|PmEd2         | -0.0500207|       0.05|        0| #> |54  |ESETA1   |       24|         15|ESETA1.15     |  0.1274155|       0.10|        0| #> |55  |ESETA1   |       24|          6|ESETA1.6      |  0.1110566|       0.10|        0| #> |62  |ESETA1   |       24|         15|InRatioCor.15 | -0.0586734|       0.05|        0| #> |63  |ESETA1   |       24|          6|InRatioCor.6  | -0.0683556|       0.05|        0| #> |94  |ESETA1   |       35|         15|ESETA1.15     |  0.1278513|       0.10|        0| #> |95  |ESETA1   |       35|         24|ESETA1.24     |  0.1085939|       0.10|        0| #> |105 |ESETA1   |       35|         15|InRatioCor.15 | -0.0682763|       0.05|        0| #> |106 |ESETA1   |       35|         24|InRatioCor.24 | -0.0740641|       0.05|        0| #> |107 |ESETA1   |       35|          6|InRatioCor.6  | -0.0922464|       0.05|        0| #> |116 |ESETA1   |       35|          0|PmEd2         | -0.0527126|       0.05|        0| #> |158 |ESETA1   |       58|         15|InRatioCor.15 | -0.0677861|       0.05|        0| #> |159 |ESETA1   |       58|         24|InRatioCor.24 | -0.0536593|       0.05|        0|"},{"path":"https://istallworthy.github.io/devMSMs/articles/Workflow_Continuous_Exposure.html","id":"phase-2-assess-substantive-associations-between-exposure-outcome","dir":"Articles","previous_headings":"","what":"Phase 2: Assess Substantive Associations between Exposure & Outcome","title":"Workflow: Continuous Exposure","text":"created IPTW balancing weights minimize associations confounders exposure time point, can move substantive modeling phase.","code":""},{"path":"https://istallworthy.github.io/devMSMs/articles/Workflow_Continuous_Exposure.html","id":"step-5-fit-marginal-structural-model-summarize-visualize-results","dir":"Articles","previous_headings":"Phase 2: Assess Substantive Associations between Exposure & Outcome","what":"Step 5: Fit Marginal Structural Model & Summarize & Visualize Results","title":"Workflow: Continuous Exposure","text":"goal final step fit weighted model relating exposure meaningful epochs developmental time outcome, summarizing visualizing results. step, user models compares various counterfactuals, effects different developmental histories exposure outcome, test substantive hypotheses dose timing.","code":""},{"path":"https://istallworthy.github.io/devMSMs/articles/Workflow_Continuous_Exposure.html","id":"step-5a--select-fit-a-marginal-outcome-model","dir":"Articles","previous_headings":"Phase 2: Assess Substantive Associations between Exposure & Outcome > Step 5: Fit Marginal Structural Model & Summarize & Visualize Results","what":"Step 5a. Select & fit a marginal outcome model","title":"Workflow: Continuous Exposure","text":"First, use fitModel() function fit weighted generalized linear model relating exposure outcome. function draws svyglm() function survey package (Lumley, 2023). exposure main effects models reflect exposure levels exposure time point unless exposure epochs specified. One benefits creating balancing weights can used variety different marginal outcome models encompassed function subset possible models. Note models can get complex advise interpreting individual terms. required inputs using fitModel() function : complete data (data frame, mids object, list imputed datasets dataframes wide format), exposure (e.g., “variable”), exposure time points, outcome (e.g., “variable.t”), list trimmed weights, model list (“m0”, “m1”, “m2”, “m3”): M0: Baseline model regressing outcome main effects exposure (e.g., infancy, toddlerhood, childhood). M1: Covariate model regressing outcome main effects exposure well user-specified covariates (e.g., confounders measured baseline first time point remained imbalanced weighting Step 4). M2: Interaction model regressing outcome main effects exposure well user-specified interactions exposure main effects (e.g., infancy:toddlerhood) M3: Full model regressing outcome main effects exposure, user-specified covariates, well user-specified exposure main effect interactions. , specify full model given baseline/time-invariant confounders remain imbalanced Step 4 possiblity non-linear effects economic strain behavior problems. user selects covariate model (“m1” “m3”), required supply list covariates corresponds covariates wide data (see Step 4). optional inputs fitModel() function follows. user option specify epochs differ measurement time points using optional epochs data frame field. epochs: provide list user-created names quotations (constitute meaningful developmental time period constitute time units exposure histories); values: list, epoch, provide single integer list integers time points exposure measured constitute epoch. epochs specified, time points exposure measured used creation exposure histories final step process. specified epoch must corresponding value (values can differ number entries shown ). user specifies exposure epochs, exposure main effects created epoch, exposure levels averaged epochs consist two time point values. Epochs must specified step used subsequent step comparing histories, specification exposure epochs kept consistent throughout use devMSMs package. , specify Infancy, Toddlerhood, early Childhood exposure epochs. Please see Preliminary Steps vignette accomanying manuscript details. user selects interaction model (“m2” “m3”), required provide interaction order integer int_order field reflects maximum interaction (e.g., 3) (automatically include lower order interactions (e.g., 2-way)). interaction order exceed total number exposure main effects (3 case, specified 3 exposure epochs). specify fitting 3-way (constituent) interactions exposure main effects. user can also specify family (function, quotations; e.g., gaussian) link (quotations, e.g., “identity”) functions generalized linear model (defaults gaussian “link”, respectively). possible families : binomial, gaussian, Gama, inverse.gaussian, poisson, quasi, quasibinomial, quasipoisson. binomial Poisson families, set family quasibinomial quasipoisson, respectively, avoid warning non-integer numbers successes. `quasi’ versions family objects give point estimates standard errors give warning. gaussian family accepts links: “identity”, “log” “inverse”; binomial family links “logit”, “probit”, “cauchit”, (corresponding logistic, normal Cauchy CDFs respectively) “log” “cloglog” (complementary log-log); Gamma family links “inverse”, “identity”, “log”; poisson family links “log”, “identity”, “sqrt”; inverse.gaussian family links 1/mu^2, inverse, identity log. quasi family accepts links “logit”, “probit”, “cloglog”, “identity”, “inverse”, “log”, “1/mu^2”, “sqrt”, function power can used create power link function. See survey stats R package documentations information. , retain default family link functions. fitModel() function outputs .rds file fitted model(s) .html table model evidence ‘models/’ folder. Importantly, function also outputs console result likelihood ratio test comparing user-specified model nested version model omits exposure variables test whether exposure predicts variation outcome. test significant evidence exposure predicts outcome, advise proceeding subsequent history comparison step. (Models pooled prior conducting likelihood ratio test imputed data.) function returns list fitted model objects, svyglm output (labeled “0” data data frame format). find likerlihood ratio test significant, indicating can proceed next step evaluating effects different exposure histories.  first conduct sensitivity analyses, fitting model weights trimmed two different values. note, described Step 4, save.= TRUE, running analyses overwrite output main model fitting main output renamed relocated new folder first. first fit model weights trimmed 92nd quantile. similarly find significant likelihoood ratio test.  fit model weights trimmed 98th quantile. comparable result.","code":"model <- \"m2\" epochs <- data.frame(epochs = c(\"Infancy\", \"Toddlerhood\", \"Childhood\"),                       values = I(list(c(6), c(15), c(24)))) int_order <- 3 family <- gaussian  link <- \"identity\" weights <- trim_weights  models <- fitModel(data = data, weights = weights, exposure = exposure, #required                    exposure_time_pts = exposure_time_pts, outcome = outcome, model = model, #required                    family = family, link = link, int_order = int_order, covariates = covariates, epochs = epochs, #optional                    home_dir = home_dir, verbose = verbose, save.out = save.out) #optional #> Please inspect the following likelihood ratio test to determine if the exposures collective predict significant variation in the outcome compared to a model without exposure terms. #> We strongly suggest only conducting history comparisons if the likelihood ratio test is significant. #>  #> Call: #>  #> mitml::testModels(model = fits, null.model = fits.null) #>  #> Model comparison calculated from 5 imputed data sets. #> Combination method: D1 #>  #>     F.value     df1     df2   P(>F)     RIV  #>       1.769       7 128.508   0.099   0.727  #>  #> Unadjusted hypothesis test as appropriate in larger samples. #>  #>  #> The marginal model, m2, is summarized below: weights <- trim_weights.s1  models.s1 <- fitModel(data = data, weights = weights, exposure = exposure, #required                       exposure_time_pts = exposure_time_pts, outcome = outcome, model = model, #required                       family = family, link = link, int_order = int_order, covariates = covariates, epochs = epochs, #optional                       home_dir = home_dir, verbose = verbose, save.out = save.out) #optional #> Please inspect the following likelihood ratio test to determine if the exposures collective predict significant variation in the outcome compared to a model without exposure terms. #> We strongly suggest only conducting history comparisons if the likelihood ratio test is significant. #>  #> Call: #>  #> mitml::testModels(model = fits, null.model = fits.null) #>  #> Model comparison calculated from 5 imputed data sets. #> Combination method: D1 #>  #>     F.value     df1     df2   P(>F)     RIV  #>       1.957       7 131.195   0.066   0.713  #>  #> Unadjusted hypothesis test as appropriate in larger samples. #>  #>  #> The marginal model, m2, is summarized below: weights <- trim_weights.s2  models.s2 <- fitModel(data = data, weights = weights, exposure = exposure, #required                       exposure_time_pts = exposure_time_pts, outcome = outcome, model = model, #required                       family = family, link = link, int_order = int_order, covariates = covariates, epochs = epochs, #optional                       home_dir = home_dir, verbose = verbose, save.out = save.out) #optional #> Please inspect the following likelihood ratio test to determine if the exposures collective predict significant variation in the outcome compared to a model without exposure terms. #> We strongly suggest only conducting history comparisons if the likelihood ratio test is significant. #>  #> Call: #>  #> mitml::testModels(model = fits, null.model = fits.null) #>  #> Model comparison calculated from 5 imputed data sets. #> Combination method: D1 #>  #>     F.value     df1     df2   P(>F)     RIV  #>       1.467       7 135.652   0.184   0.692  #>  #> Unadjusted hypothesis test as appropriate in larger samples. #>  #>  #> The marginal model, m2, is summarized below:"},{"path":"https://istallworthy.github.io/devMSMs/articles/Workflow_Continuous_Exposure.html","id":"step-5b--estimate-compare-and-visualize-model-predicted-outcome-as-a-function-of-exposure-history","dir":"Articles","previous_headings":"Phase 2: Assess Substantive Associations between Exposure & Outcome > Step 5: Fit Marginal Structural Model & Summarize & Visualize Results","what":"Step 5b. Estimate, compare, and visualize model-predicted outcome as a function of exposure history","title":"Workflow: Continuous Exposure","text":"final step, use fitted model results test substantive hypotheses dose timing. estimate compare average marginal estimates outcome user-specified exposure history (.e., permutation high (“h) low (“l”) levels exposure exposure epoch) using compareHistories() function. draws primarily avg_predictions() hypotheses() functions marginaleffects package (Arel-Bundock, 2023). First, compareHistories() function creates average predictions outcome exposure history. n combinations user-specified exposure histories, set value predictors full dataset values combination, leaving variables . gives us n datasets, size original dataset used fit model. n datasets, compute predicted values given model taking average predicted value n datasets. n averaged predicted values expected potential outcomes combination. (imputed data, function outputs pooled predicted values using Rubin’s Rules.) Next, using predicted values, function conducts comparisons different histories (pooling across imputed datasets imputed data using Rubin’s Rules). Lastly, function implements correction multiple comparisons (treating run function family) plotting results. Box plots display outcome x-axis exposure history y-axis whiskers display standard errors. required inputs using compareHistories() function : exposure (e.g., “variable”), outcome (e.g., “variable.t”), list model output Step 5a. optional inputs follows. create histories high low values continuous exposures, hi_lo_cut user can specify list two quantile values (0-1; default median split +/- 0.001) demarcating high low levels exposure, respectively. (Imputed data stacked calculate cutoff values.) suggest drawing existing hypotheses examining variability exposure variable determine high low cutoffs. recommend users begin specifying meaningful high low percentile cutoffs examining many individuals sample fall user-specified exposure histories created percentile cutoffs (see Preliminary Steps vignette). gold standard recommendations sufficient cell numbers per history, users ensure reasonable coverage histories avoid extrapolation maximize precision. , specify 60th 30th percentile values denote high low levels economic strain, respectively. Additionally, user option specify epochs differ exposure time points using optional epochs data frame field (see Step 5a ). user specified epochs Step 5a fitModel() function, must also specify step. user also option estimate compare custom subset user-specified exposure histories (.e., sequences high low levels exposure epoch time point) using reference comparison fields. conduct recommended customized comparisons, users must provide least one unique valid history (e.g., “l-l-l”) reference , quotations, provide string (list strings) lowercase l’s h’s (separated -), corresponding exposure epoch (time point), signify sequence exposure levels (“low” “high”, respectively). user supplies reference history, required provide least one unique valid history comparison , quotations, providing comparison string (list strings) l’s h’s (separated “-”), corresponding exposure epoch, signify sequence exposure levels (“low” “high”, respectively) constitutes comparison exposure history/histories compared reference. user supplies one comparisons, least one reference must specified. reference exposure history compared comparison history comparisons subject multiple comparison correction. reference comparison specified, histories compared . 4 exposure main effects (either epochs exposure time points), user required select subset history comparisons (Step 5b), given base code (see hypotheses() function marginaleffects package; Arel-Bundock, 2023) accommodate pairwise history comparisons 5 time points. , specify one reference two comparison histories. user can also specify multiple comparison method mc_method quotations, providing shorthand method (“holm”, “hochberg”,“hommel”, “bonferroni”, “BH” (default), “”, “fdr”, “n” (see stats::p.adjust documentation; R Core Team) multiple comparison correction applied final (pooled across imputed datasets applicable) contrasts comparing effects different exposure histories outcome (default Benjamini-Hochburg). code run considered family. user iterates function specifying different comparisons time, strongly recommend interpreting outcome inclusive set comparisons avoid false discovery. , retain default Benjamini-Hochburg method multiple comparison. Based substantive interests, user also option choose level dosage (“h” “l”) tallied labels dose counts tables figures (dose_level; default “h”). example, exposure variable coded way lower levels conceptualized exposure (e.g., lower income), user may wish choose dosage level “l”. , given interest histories high economic strain, specify wish tally high doses exposure. Lastly, user can provide alternate plotting labels exposure outcome exp_lab out_lab fields (defaults variable names), well list (equal number exposure main effects +1) colors Brewer color palette (colors; default “Dark2”). See RColorBrewer::display.brewer.() https://r-graph-gallery.com/38-rcolorbrewers-palettes.html). , specify plotting labels 4 colors. compareHistories() function saves .html tables estimated mean outcome values history history comparisons ‘histories/’ folder boxplot predicted values histories ‘plots/’ folder. function returns data frame user-specified history comparisons containing contrast estimates, standard errors, statistics, p-values, low high confidence intervals, corrected p-values, labeled history dose.  shown , first confirm reasonable distribution sample specified exposure histories. inspect history comparison conclude evidence children experienced different histories exposure economic strain infancy, toddlerhood, early childhood differ behavioral problems early childhood.  conduct sensitivity analyses assessing comparing histories drawing models used weights trimmed two different values. note, running analyses overwrite output main history comparison main output renamed relocated new folder first. first compare histories using model fit weights trimmed 92nd quantile value.  shown , results indicate marginal non-significant contrast “l-l-l” “h-h-h” histories economic strain exposure relation behavior problems early childhood.  compare histories usign model fit weights trimmed 98th quantile value.  Similarly, find evidence differences behavioral problems function history exposure economic strain.","code":"hi_lo_cut <- c(0.6, 0.3) reference <- \"l-l-l\"   comparison <- c(\"h-h-h\", \"l-l-h\", \"h-l-l\", \"l-h-l\") mc_comp_method <- \"BH\" dose_level <- \"h\" exp_lab <- \"Economic Strain\"   out_lab <- \"Behavior Problems\"   colors <- c(\"blue4\", \"darkgreen\", \"darkgoldenrod\", \"red2\") model <- models   results <- compareHistories(exposure = exposure, exposure_time_pts = exposure_time_pts, outcome = outcome, model = model, #required                             epochs = epochs, hi_lo_cut = hi_lo_cut, reference = reference, comparison = comparison, #optional                             mc_comp_method = mc_comp_method, dose_level = dose_level, exp_lab = exp_lab, out_lab = out_lab, colors = colors, #optional                             home_dir = home_dir, verbose = verbose, save.out = save.out) #optional #> Summary of Exposure Main Effects:  #>  #> USER ALERT: Out of the total of 1292 individuals in the sample, below is the distribution of the 396 (30.65%) individuals that fall into 5 out of the 5 the total user-defined exposure histories created from 30th and 60th percentile values for low and high levels of exposure ESETA1, respectively, across Infancy, Toddlerhood, Childhood.  #> USER ALERT: Please inspect the distribution of the sample across the following exposure histories and ensure there is sufficient spread to avoid extrapolation and low precision:  #>  #> Table: Summary of user-specified exposure ESETA1 histories based on exposure main effects Infancy, Toddlerhood, Childhood containing time points 6, 15, 24: #>  #> |history |   n| #> |:-------|---:| #> |h-h-h   | 208| #> |h-l-l   |  31| #> |l-h-l   |  26| #> |l-l-h   |  19| #> |l-l-l   | 112| #> Warning in get.dfcom(object, dfcom): Infinite sample size assumed. #>  #> Below are the pooled average predictions by user-specified history:|   |term                                                                            | estimate| std.error| statistic|       df| p.value|history | dose_count| #> |:--|:-------------------------------------------------------------------------------|--------:|---------:|---------:|--------:|-------:|:-------|----------:| #> |1  |ESETA1.Infancy = -0.192, ESETA1.Toddlerhood = -0.256, ESETA1.Childhood = -0.348 |   0.4690|    0.0153|   30.6102|  23.7039|       0|l-l-l   |          0| #> |2  |ESETA1.Infancy = -0.192, ESETA1.Toddlerhood = 0.454, ESETA1.Childhood = -0.348  |   0.4751|    0.0190|   25.0373|  17.0670|       0|l-h-l   |          1| #> |3  |ESETA1.Infancy = 0.545, ESETA1.Toddlerhood = -0.256, ESETA1.Childhood = -0.348  |   0.4765|    0.0172|   27.7430|  25.2294|       0|h-l-l   |          1| #> |5  |ESETA1.Infancy = -0.192, ESETA1.Toddlerhood = -0.256, ESETA1.Childhood = 0.336  |   0.4857|    0.0182|   26.6209|  23.6605|       0|l-l-h   |          1| #> |8  |ESETA1.Infancy = 0.545, ESETA1.Toddlerhood = 0.454, ESETA1.Childhood = 0.336    |   0.4957|    0.0112|   44.0881| 195.4249|       0|h-h-h   |          3| #> Warning in get.dfcom(object, dfcom): Infinite sample size assumed. #>  #> Conducting multiple comparison correction for all pairings between comparison histories and each refernece history using the BH method.  #>  #>  #> USER ALERT: please inspect the following pooled comparisons :  #> |term                                               | estimate| std.error| statistic|      df| p.value|history        |dose   | p.value_corr| #> |:--------------------------------------------------|--------:|---------:|---------:|-------:|-------:|:--------------|:------|------------:| #> |(-0.192, -0.256, -0.348) - (0.545, 0.454, 0.336)   |   0.0267|    0.0163|    1.6349| 13.4538|  0.1252|l-l-l vs h-h-h |0 vs 3 |       0.2505| #> |(-0.192, -0.256, -0.348) - (0.545, -0.256, -0.348) |   0.0075|    0.0149|    0.5014| 10.9283|  0.6260|l-l-l vs h-l-l |0 vs 1 |       0.7113| #> |(-0.192, -0.256, -0.348) - (-0.192, 0.454, -0.348) |   0.0061|    0.0160|    0.3806| 10.2435|  0.7113|l-l-l vs l-h-l |0 vs 1 |       0.7113| #> |(-0.192, -0.256, -0.348) - (-0.192, -0.256, 0.336) |   0.0167|    0.0103|    1.6251| 60.2705|  0.1094|l-l-l vs l-l-h |0 vs 1 |       0.2505| model <- models.s1   results.s1 <- compareHistories(exposure = exposure, exposure_time_pts = exposure_time_pts, outcome = outcome, model = model, #required                                epochs = epochs, hi_lo_cut = hi_lo_cut, reference = reference, comparison = comparison, #optional                                mc_comp_method = mc_comp_method, dose_level = dose_level, exp_lab = exp_lab, out_lab = out_lab, colors = colors, #optional                                home_dir = home_dir, verbose = verbose, save.out = save.out) #optional #> Summary of Exposure Main Effects:  #>  #> USER ALERT: Out of the total of 1292 individuals in the sample, below is the distribution of the 396 (30.65%) individuals that fall into 5 out of the 5 the total user-defined exposure histories created from 30th and 60th percentile values for low and high levels of exposure ESETA1, respectively, across Infancy, Toddlerhood, Childhood.  #> USER ALERT: Please inspect the distribution of the sample across the following exposure histories and ensure there is sufficient spread to avoid extrapolation and low precision:  #>  #> Table: Summary of user-specified exposure ESETA1 histories based on exposure main effects Infancy, Toddlerhood, Childhood containing time points 6, 15, 24: #>  #> |history |   n| #> |:-------|---:| #> |h-h-h   | 208| #> |h-l-l   |  31| #> |l-h-l   |  26| #> |l-l-h   |  19| #> |l-l-l   | 112| #> Warning in get.dfcom(object, dfcom): Infinite sample size assumed. #>  #> Below are the pooled average predictions by user-specified history:|   |term                                                                            | estimate| std.error| statistic|       df| p.value|history | dose_count| #> |:--|:-------------------------------------------------------------------------------|--------:|---------:|---------:|--------:|-------:|:-------|----------:| #> |1  |ESETA1.Infancy = -0.192, ESETA1.Toddlerhood = -0.256, ESETA1.Childhood = -0.348 |   0.4670|    0.0148|   31.6460|  26.5517|       0|l-l-l   |          0| #> |2  |ESETA1.Infancy = -0.192, ESETA1.Toddlerhood = 0.454, ESETA1.Childhood = -0.348  |   0.4735|    0.0183|   25.8975|  18.3967|       0|l-h-l   |          1| #> |3  |ESETA1.Infancy = 0.545, ESETA1.Toddlerhood = -0.256, ESETA1.Childhood = -0.348  |   0.4755|    0.0172|   27.6045|  23.0116|       0|h-l-l   |          1| #> |5  |ESETA1.Infancy = -0.192, ESETA1.Toddlerhood = -0.256, ESETA1.Childhood = 0.336  |   0.4838|    0.0175|   27.6890|  27.9925|       0|l-l-h   |          1| #> |8  |ESETA1.Infancy = 0.545, ESETA1.Toddlerhood = 0.454, ESETA1.Childhood = 0.336    |   0.4958|    0.0112|   44.3481| 151.3769|       0|h-h-h   |          3| #> Warning in get.dfcom(object, dfcom): Infinite sample size assumed. #>  #> Conducting multiple comparison correction for all pairings between comparison histories and each refernece history using the BH method.  #>  #>  #> USER ALERT: please inspect the following pooled comparisons :  #> |term                                               | estimate| std.error| statistic|      df| p.value|history        |dose   | p.value_corr| #> |:--------------------------------------------------|--------:|---------:|---------:|-------:|-------:|:--------------|:------|------------:| #> |(-0.192, -0.256, -0.348) - (0.545, 0.454, 0.336)   |   0.0289|    0.0160|    1.7996| 13.6385|  0.0941|l-l-l vs h-h-h |0 vs 3 |       0.2077| #> |(-0.192, -0.256, -0.348) - (0.545, -0.256, -0.348) |   0.0085|    0.0147|    0.5754| 11.0843|  0.5765|l-l-l vs h-l-l |0 vs 1 |       0.6897| #> |(-0.192, -0.256, -0.348) - (-0.192, 0.454, -0.348) |   0.0065|    0.0159|    0.4112|  9.8760|  0.6897|l-l-l vs l-h-l |0 vs 1 |       0.6897| #> |(-0.192, -0.256, -0.348) - (-0.192, -0.256, 0.336) |   0.0168|    0.0102|    1.6528| 57.1801|  0.1039|l-l-l vs l-l-h |0 vs 1 |       0.2077| model <- models.s2   results.s2 <- compareHistories(exposure = exposure, exposure_time_pts = exposure_time_pts, outcome = outcome, model = model, #required                                epochs = epochs, hi_lo_cut = hi_lo_cut, reference = reference, comparison = comparison, #optional                                mc_comp_method = mc_comp_method, dose_level = dose_level, exp_lab = exp_lab, out_lab = out_lab, colors = colors, #optional                                home_dir = home_dir, verbose = verbose, save.out = save.out) #optional #> Summary of Exposure Main Effects:  #>  #> USER ALERT: Out of the total of 1292 individuals in the sample, below is the distribution of the 396 (30.65%) individuals that fall into 5 out of the 5 the total user-defined exposure histories created from 30th and 60th percentile values for low and high levels of exposure ESETA1, respectively, across Infancy, Toddlerhood, Childhood.  #> USER ALERT: Please inspect the distribution of the sample across the following exposure histories and ensure there is sufficient spread to avoid extrapolation and low precision:  #>  #> Table: Summary of user-specified exposure ESETA1 histories based on exposure main effects Infancy, Toddlerhood, Childhood containing time points 6, 15, 24: #>  #> |history |   n| #> |:-------|---:| #> |h-h-h   | 208| #> |h-l-l   |  31| #> |l-h-l   |  26| #> |l-l-h   |  19| #> |l-l-l   | 112| #> Warning in get.dfcom(object, dfcom): Infinite sample size assumed. #>  #> Below are the pooled average predictions by user-specified history:|   |term                                                                            | estimate| std.error| statistic|        df| p.value|history | dose_count| #> |:--|:-------------------------------------------------------------------------------|--------:|---------:|---------:|---------:|-------:|:-------|----------:| #> |1  |ESETA1.Infancy = -0.192, ESETA1.Toddlerhood = -0.256, ESETA1.Childhood = -0.348 |   0.4723|    0.0158|   29.8081|   24.8954|       0|l-l-l   |          0| #> |2  |ESETA1.Infancy = -0.192, ESETA1.Toddlerhood = 0.454, ESETA1.Childhood = -0.348  |   0.4779|    0.0191|   25.0821|   19.3710|       0|l-h-l   |          1| #> |3  |ESETA1.Infancy = 0.545, ESETA1.Toddlerhood = -0.256, ESETA1.Childhood = -0.348  |   0.4782|    0.0174|   27.5535|   28.9831|       0|h-l-l   |          1| #> |5  |ESETA1.Infancy = -0.192, ESETA1.Toddlerhood = -0.256, ESETA1.Childhood = 0.336  |   0.4889|    0.0191|   25.6545|   24.5993|       0|l-l-h   |          1| #> |8  |ESETA1.Infancy = 0.545, ESETA1.Toddlerhood = 0.454, ESETA1.Childhood = 0.336    |   0.4956|    0.0112|   44.4208| 1389.9333|       0|h-h-h   |          3| #> Warning in get.dfcom(object, dfcom): Infinite sample size assumed. #>  #> Conducting multiple comparison correction for all pairings between comparison histories and each refernece history using the BH method.  #>  #>  #> USER ALERT: please inspect the following pooled comparisons :  #> |term                                               | estimate| std.error| statistic|      df| p.value|history        |dose   | p.value_corr| #> |:--------------------------------------------------|--------:|---------:|---------:|-------:|-------:|:--------------|:------|------------:| #> |(-0.192, -0.256, -0.348) - (0.545, 0.454, 0.336)   |   0.0234|    0.0165|    1.4126| 15.1778|  0.1780|l-l-l vs h-h-h |0 vs 3 |       0.3559| #> |(-0.192, -0.256, -0.348) - (0.545, -0.256, -0.348) |   0.0059|    0.0153|    0.3881| 11.2355|  0.7052|l-l-l vs h-l-l |0 vs 1 |       0.7196| #> |(-0.192, -0.256, -0.348) - (-0.192, 0.454, -0.348) |   0.0057|    0.0154|    0.3666| 13.4570|  0.7196|l-l-l vs l-h-l |0 vs 1 |       0.7196| #> |(-0.192, -0.256, -0.348) - (-0.192, -0.256, 0.336) |   0.0166|    0.0107|    1.5596| 67.4805|  0.1235|l-l-l vs l-l-h |0 vs 1 |       0.3559|"},{"path":"https://istallworthy.github.io/devMSMs/articles/Workflow_Continuous_Exposure.html","id":"references","dir":"Articles","previous_headings":"","what":"References","title":"Workflow: Continuous Exposure","text":"Arel-Bundock, V. 2023. marginaleffects: Predictions, Comparisons, Slopes, Marginal Means,Hypothesis Tests. https://CRAN.R-project.org/package=marginaleffects. Burchinal, M., Howes, C., Pianta, R., Bryant, D., Early, D., Clifford, R., & Barbarin, O. (2008). Predicting Child Outcomes End Kindergarten Quality Pre-Kindergarten Teacher–Child Interactions Instruction. Applied Developmental Science, 12(3), 140–153. https://doi.org/10.1080/10888690802199418 Cole, S. R., & Hernán, M. . (2008). Constructing Inverse Probability Weights Marginal Structural Models. American Journal Epidemiology, 168(6), 656–664. https://doi.org/10.1093/aje/kwn164. Greifer, Noah. 2023.WeightIt: Weighting Covariate Balance Observational Studies. https://CRAN.R-project.org/package=WeightIt. Lumley, Thomas. 2023. “survey: Analysis Complex Survey Samples.” Polley, Eric, Erin LeDell, Chris Kennedy, Mark van der Laan. 2023. SuperLearner: SuperLearner Prediction. https://CRAN.R-project.org/package=SuperLearner. R Core Team (2013). R: language environment statistical computing. R Foundation Statistical Computing, Vienna, Austria. ISBN 3-900051-07-0, URLhttp://www.R-project.org/. Stuart, E. . (2010). Matching methods causal inference: review look forward. Statistical Science: Review Journal Institute Mathematical Statistics, 25(1), 1–21. https://doi.org/10.1214/09-STS313. Thoemmes, F., & Ong, . D. (2016). Primer Inverse Probability Treatment Weighting Marginal Structural Models. https://doi.org/10.1177/2167696815621645. Vernon-Feagans, L., Cox, M., Willoughby, M., Burchinal, M., Garrett-Peters, P., Mills-Koonce, R., Garrett-Peiers, P., Conger, R. D., & Bauer, P. J. (2013). Family Life Project: Epidemiological Developmental Study Young Children Living Poor Rural Communities. Monographs Society Research Child Development, 78(5), –150.","code":""},{"path":"https://istallworthy.github.io/devMSMs/authors.html","id":null,"dir":"","previous_headings":"","what":"Authors","title":"Authors and Citation","text":"Isabella Stallworthy. Author, maintainer. Noah Greifer. Author, contributor. Meriah DeJoseph. Author. Emily Padrutt. Author. Daniel Berry. Author.","code":""},{"path":"https://istallworthy.github.io/devMSMs/authors.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Authors and Citation","text":"Stallworthy , Greifer N, DeJoseph M, Padrutt E, Berry D (2023). devMSMs: Tools Conducting Marginal Structural Models Developmental Data. R package version 0.0.0.9000, https://github.com/istallworthy/devMSMs, https://istallworthy.github.io/devMSMs/.","code":"@Manual{,   title = {devMSMs: Tools for Conducting Marginal Structural Models with Developmental Data},   author = {Isabella Stallworthy and Noah Greifer and Meriah DeJoseph and Emily Padrutt and Daniel Berry},   year = {2023},   note = {R package version 0.0.0.9000, https://github.com/istallworthy/devMSMs},   url = {https://istallworthy.github.io/devMSMs/}, }"},{"path":"https://istallworthy.github.io/devMSMs/index.html","id":"devmsms","dir":"","previous_headings":"","what":"An R package for conducting marginal structural models (MSMs) with longitudinal data","title":"An R package for conducting marginal structural models (MSMs) with longitudinal data","text":"Scientists study humans fundamentally interested questions causation, yet conceptual, methodological, practical barriers historically prevented use methods causal inference developed fields. specifically, scientists, clinicians, educators, policymakers alike often interested causal processes involving questions (timing) extent (dose) different factors influence human functioning development, order inform scientific understanding improve people’s lives. Marginal structural models (MSMs; Robins et al., 2000), orginating epidemiology public health, represent one -utilized tool improving causal inference longitudinal observational data, given certain assumptions. brief, MSMs leverage inverse-probability--treatment-weights (IPTW) potential outcomes framework. MSMs first focus problem confounding, using IPTW attenuate associations measured confounders exposure (e.g., experience, characteristic, event –biology broader environment) time. weighted model can fitted relating time-varying exposure future outcome. Finally, model-predicted effects different exposure histories, vary dose timing, can evaluated compared counterfactuals reveal putative causal effects.devMSMs R package accompanying tutorial paper, Investigating Causal Questions Human Development using Marginal Structural Models: Tutorial Introduction devMSMs Package R (insert preprint link ), implementing MSMs longitudinal data answer causal questions dose timing effects given exposure future outcome. Core features package include: flexible functions built-guidance, drawing established expertise best practices implementing longitudinal IPTW weighting outcome modeling answer substantive causal questions dose timing accommodation data form either complete dataframe multiple imputation recommended workflow using devMSMs functions longitudinal data step--step user guidance deveMSMs worflow form vignettes R markdown template file users new MSM technique R programming accompanying suite helper functions assist users preparing inspecting data prior use devMSMs conceptual introduction example empirical application accompanying tutorial paper","code":""},{"path":"https://istallworthy.github.io/devMSMs/index.html","id":"overview","dir":"","previous_headings":"","what":"Overview","title":"An R package for conducting marginal structural models (MSMs) with longitudinal data","text":"package contains 6 core functions conducting longitudinal confounder adjustment outcome modeling longitudinal data time-varying exposures.","code":""},{"path":"https://istallworthy.github.io/devMSMs/index.html","id":"installation","dir":"","previous_headings":"","what":"Installation","title":"An R package for conducting marginal structural models (MSMs) with longitudinal data","text":"devMSMs can installed R Studio Github using devtools package:library(devtools)install_github(\"istallworthy/devMSMs\")library(devMSMs) helper functions can installed accompanying devMSMsHelpers repo:install_github(\"istallworthy/devMSMsHelpers\")library(devMSMsHelpers)","code":""},{"path":"https://istallworthy.github.io/devMSMs/index.html","id":"recommended-workflow","dir":"","previous_headings":"","what":"Recommended Workflow","title":"An R package for conducting marginal structural models (MSMs) with longitudinal data","text":"Please see Workflows vignettes details.","code":""},{"path":"https://istallworthy.github.io/devMSMs/index.html","id":"additional-resources","dir":"","previous_headings":"","what":"Additional Resources","title":"An R package for conducting marginal structural models (MSMs) with longitudinal data","text":"Austin, P. C. (2011). Introduction Propensity Score Methods Reducing Effects Confounding Observational Studies. Multivariate Behavioral Research, 46(3), 399–424. https://doi.org/10.1080/00273171.2011.568786 Blackwell, M. (2013). Framework Dynamic Causal Inference Political Science. American Journal Political Science, 57(2), 504–520. https://doi.org/10.1111/j.1540-5907.2012.00626.x Cole, S. R., & Hernán, M. . (2008). Constructing Inverse Probability Weights Marginal Structural Models. American Journal Epidemiology, 168(6), 656–664. https://doi.org/10.1093/aje/kwn164 Eronen, M. . (2020). Causal discovery problem psychological interventions. New Ideas Psychology, 59, 100785. https://doi.org/10.1016/j.newideapsych.2020.100785 Fong, C., Hazlett, C., & Imai, K. (2018). Covariate balancing propensity score continuous treatment: Application efficacy political advertisements. Annals Applied Statistics, 12(1), 156–177. https://doi.org/10.1214/17-AOAS1101 Haber, N. ., Wood, M. E., Wieten, S., & Breskin, . (2022). DAG Omitted Objects Displayed (DAGWOOD): framework revealing causal assumptions DAGs. Annals Epidemiology, 68, 64–71. https://doi.org/10.1016/j.annepidem.2022.01.001 Hirano, K., & Imbens, G. W. (2004). Propensity Score Continuous Treatments. Applied Bayesian Modeling Causal Inference Incomplete-Data Perspectives (pp. 73–84). John Wiley & Sons, Ltd. https://doi.org/10.1002/0470090456.ch7 Kainz, K., Greifer, N., Givens, ., Swietek, K., Lombardi, B. M., Zietz, S., & Kohn, J. L. (2017). Improving Causal Inference: Recommendations Covariate Selection Balance Propensity Score Methods. Journal Society Social Work Research, 8(2), 279–303. https://doi.org/10.1086/691464 Robins, J. M., Hernán, M. Á., & Brumback, B. (2000). Marginal Structural Models Causal Inference Epidemiology. Epidemiology, 11(5), 550–560. Thoemmes, F., & Ong, . D. (2016). Primer Inverse Probability Treatment Weighting Marginal Structural Models. https://doi.org/10.1177/2167696815621645","code":""},{"path":"https://istallworthy.github.io/devMSMs/reference/add_dose.html","id":null,"dir":"Reference","previous_headings":"","what":"Add dose tally to table — add_dose","title":"Add dose tally to table — add_dose","text":"Add dose tally table","code":""},{"path":"https://istallworthy.github.io/devMSMs/reference/add_dose.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Add dose tally to table — add_dose","text":"","code":"add_dose(p, dose_level)"},{"path":"https://istallworthy.github.io/devMSMs/reference/add_dose.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Add dose tally to table — add_dose","text":"p table output marginaleffects::avg_predictions() hypotheses() dose_level \"l\" \"h\" indicating whether low high doses tallied tables plots","code":""},{"path":"https://istallworthy.github.io/devMSMs/reference/add_dose.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Add dose tally to table — add_dose","text":"table dose level tally","code":""},{"path":"https://istallworthy.github.io/devMSMs/reference/add_histories.html","id":null,"dir":"Reference","previous_headings":"","what":"Add history labels to table — add_histories","title":"Add history labels to table — add_histories","text":"Add history labels table","code":""},{"path":"https://istallworthy.github.io/devMSMs/reference/add_histories.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Add history labels to table — add_histories","text":"","code":"add_histories(p, d)"},{"path":"https://istallworthy.github.io/devMSMs/reference/add_histories.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Add history labels to table — add_histories","text":"p table output marginaleffects::avg_predictions() hypotheses() d data frame high low values per exposure main effect","code":""},{"path":"https://istallworthy.github.io/devMSMs/reference/add_histories.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Add history labels to table — add_histories","text":"table histories labeled","code":""},{"path":"https://istallworthy.github.io/devMSMs/reference/assessBalance.html","id":null,"dir":"Reference","previous_headings":"","what":"Assesses confounder balancing — assessBalance","title":"Assesses confounder balancing — assessBalance","text":"Draws functions cobalt package quantify relations exposure confounders exposure time point according guidelines Jackson, 2016 assess balance time-varying exposures.","code":""},{"path":"https://istallworthy.github.io/devMSMs/reference/assessBalance.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Assesses confounder balancing — assessBalance","text":"","code":"assessBalance(   data,   exposure,   exposure_time_pts,   outcome,   type,   formulas,   weights = NULL,   balance_thresh = NULL,   imp_conf = NULL,   home_dir = NULL,   verbose = TRUE,   save.out = TRUE )"},{"path":"https://istallworthy.github.io/devMSMs/reference/assessBalance.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Assesses confounder balancing — assessBalance","text":"data data wide format : data frame, list imputed data frames, mids object exposure name exposure variable exposure_time_pts list integers weights created/assessed correspond time points exposure wass measured outcome name outcome variable \".timepoint\" suffix type type balance assessment; 'prebalance' 'weighted' formulas list balancing formulas time point output createFormulas() weights list IPTW weights output createWeights, required type 'weighted' balance_thresh (optional) one two numbers 0 1 indicating single balancing threshold thresholds less important confounders, respectively (default = 0.1) imp_conf (optional) list variable names reflecting important confounders, required two balance thresholds supplied home_dir (optional) path home directory (required save.= TRUE) verbose (optiona) TRUE FALSE indicator user output (default TRUE) save.(optional) TRUE FALSE indicator save output intermediary output locally (default TRUE)","code":""},{"path":"https://istallworthy.github.io/devMSMs/reference/assessBalance.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Assesses confounder balancing — assessBalance","text":"data frame balance statistics","code":""},{"path":[]},{"path":"https://istallworthy.github.io/devMSMs/reference/assessBalance.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Assesses confounder balancing — assessBalance","text":"","code":"test <- data.frame(ID = 1:50,                    A.1 = rnorm(n = 50),                    A.2 = rnorm(n = 50),                    A.3 = rnorm(n = 50),                    B.1 = rnorm(n = 50),                    B.2 = rnorm(n = 50),                    B.3 = rnorm(n = 50),                    C = rnorm(n = 50),                    D.3 = rnorm(n = 50)) test[, c(\"A.1\", \"A.2\", \"A.3\")] <- lapply(test[, c(\"A.1\", \"A.2\", \"A.3\")], as.numeric)  f <- createFormulas(exposure = \"A\",                     exposure_time_pts = c(1, 2, 3),                     outcome = \"D.3\",                     tv_confounders = c(\"A.1\", \"A.2\", \"A.3\", \"B.1\", \"B.2\", \"B.3\"),                     ti_confounders = \"C\",                     type = \"short\",                     save.out = FALSE) #> USER ALERT: Please manually inspect the short balancing formula below that includes time-varying confounders at t-1 only: #> The short formula for A - D.3 at A time point 1 is:  #> A.1 ~ C #> <environment: 0x55c510f02908> #>  #> USER ALERT: Please manually inspect the short balancing formula below that includes time-varying confounders at t-1 only: #> The short formula for A - D.3 at A time point 2 is:  #> A.2 ~ A.1 + B.1 + C #> <environment: 0x55c510f02908> #>  #> USER ALERT: Please manually inspect the short balancing formula below that includes time-varying confounders at t-1 only: #> The short formula for A - D.3 at A time point 3 is:  #> A.3 ~ A.2 + B.2 + C #> <environment: 0x55c510f02908> #>   #Prebalance b <- assessBalance(data = test,                    exposure = \"A\",                    exposure_time_pts = c(1, 2, 3),                    outcome = \"D.3\",                    type = \"prebalance\",                    formulas = f,                    save.out = FALSE) #> USER ALERT: The following statistics display covariate imbalance at each exposure time point prior to weighting, using short formulas. #>     #> As shown below, 2 out of 7 (29%) covariates across time points, corresponding to 2 out of 2 domains, remain imbalanced with a remaining median absolute value correlation/std mean difference of 0.27 (range= 0.19-0.35): #>  #> Table: Imbalanced covariates using no weights and short formulas #>  #> | exp_time| balanced_n| imbalanced_n|  n| #> |--------:|----------:|------------:|--:| #> |        1|          1|            0|  1| #> |        2|          1|            2|  3| #> |        3|          3|            0|  3| #>  #>  #> USER ALERT: For exposure A using the short formulas and no weights : #> The median absolute value relation between exposure and confounder is 0.09 (range = -0.1 -0.35).  #> As shown below, the following 2 covariates across time points out of 7 total (28.57%) spanning 2 domains out of 3 (66.67%) are imbalanced with a remaining median absolute value correlation/std mean difference in relation to A of 0.27 (range=0.19-0.35) : #>  #>  #> Table: Imbalanced Covariates #>  #> |   |exposure | exp_time| covar_time|covariate |   avg_bal| bal_thresh| balanced| #> |:--|:--------|--------:|----------:|:---------|---------:|----------:|--------:| #> |3  |A        |        2|          1|B.1       | 0.3490417|        0.1|        0| #> |4  |A        |        2|          0|C         | 0.1881424|        0.1|        0| #>  b <- assessBalance(data = test,                    exposure = \"A\",                    exposure_time_pts = c(1, 2, 3),                    outcome = \"D.3\",                    type = \"prebalance\",                    formulas = f,                    balance_thresh = 0.2,                    save.out = FALSE) #> USER ALERT: The following statistics display covariate imbalance at each exposure time point prior to weighting, using short formulas. #>     #> As shown below, 1 out of 7 (14%) covariates across time points, corresponding to 1 out of 2 domains, remain imbalanced with a remaining median absolute value correlation/std mean difference of 0.35 (range= 0.35-0.35): #>  #> Table: Imbalanced covariates using no weights and short formulas #>  #> | exp_time| balanced_n| imbalanced_n|  n| #> |--------:|----------:|------------:|--:| #> |        1|          1|            0|  1| #> |        2|          2|            1|  3| #> |        3|          3|            0|  3| #>  #>  #> USER ALERT: For exposure A using the short formulas and no weights : #> The median absolute value relation between exposure and confounder is 0.09 (range = -0.1 -0.35).  #> As shown below, the following 1 covariates across time points out of 7 total (14.29%) spanning 1 domains out of 3 (33.33%) are imbalanced with a remaining median absolute value correlation/std mean difference in relation to A of 0.35 (range=0.35-0.35) : #>  #>  #> Table: Imbalanced Covariates #>  #> |   |exposure | exp_time| covar_time|covariate |   avg_bal| bal_thresh| balanced| #> |:--|:--------|--------:|----------:|:---------|---------:|----------:|--------:| #> |3  |A        |        2|          1|B.1       | 0.3490417|        0.2|        0| #>  b <- assessBalance(data = test,                    exposure = \"A\",                    exposure_time_pts = c(1, 2, 3),                    outcome = \"D.3\",                    type = \"prebalance\",                    formulas = f,                    balance_thresh = c(0.1, 0.2),                    imp_conf = \"B.1\",                    save.out = FALSE) #> USER ALERT: The following statistics display covariate imbalance at each exposure time point prior to weighting, using short formulas. #>     #> As shown below, 1 out of 7 (14%) covariates across time points, corresponding to 1 out of 2 domains, remain imbalanced with a remaining median absolute value correlation/std mean difference of 0.35 (range= 0.35-0.35): #>  #> Table: Imbalanced covariates using no weights and short formulas #>  #> | exp_time| balanced_n| imbalanced_n|  n| #> |--------:|----------:|------------:|--:| #> |        1|          1|            0|  1| #> |        2|          2|            1|  3| #> |        3|          3|            0|  3| #>  #>  #> USER ALERT: For exposure A using the short formulas and no weights : #> The median absolute value relation between exposure and confounder is 0.09 (range = -0.1 -0.35).  #> As shown below, the following 1 covariates across time points out of 7 total (14.29%) spanning 1 domains out of 3 (33.33%) are imbalanced with a remaining median absolute value correlation/std mean difference in relation to A of 0.35 (range=0.35-0.35) : #>  #>  #> Table: Imbalanced Covariates #>  #> |   |exposure | exp_time| covar_time|covariate |   avg_bal| bal_thresh| balanced| #> |:--|:--------|--------:|----------:|:---------|---------:|----------:|--------:| #> |3  |A        |        2|          1|B.1       | 0.3490417|        0.1|        0| #>  f <- createFormulas(exposure = \"A\",                     exposure_time_pts = c(1, 2, 3),                     outcome = \"D.3\",                     tv_confounders = c(\"A.1\", \"A.2\", \"A.3\", \"B.1\", \"B.2\", \"B.3\", \"A.1:B.1\"),                     ti_confounders = \"C\",                     type = \"short\",                     save.out = FALSE) #> USER ALERT: Please manually inspect the short balancing formula below that includes time-varying confounders at t-1 only: #> The short formula for A - D.3 at A time point 1 is:  #> A.1 ~ C #> <environment: 0x55c50f229e60> #>  #> USER ALERT: Please manually inspect the short balancing formula below that includes time-varying confounders at t-1 only: #> The short formula for A - D.3 at A time point 2 is:  #> A.2 ~ A.1 + A.1:B.1 + B.1 + C #> <environment: 0x55c50f229e60> #>  #> USER ALERT: Please manually inspect the short balancing formula below that includes time-varying confounders at t-1 only: #> The short formula for A - D.3 at A time point 3 is:  #> A.3 ~ A.2 + B.2 + C #> <environment: 0x55c50f229e60> #>  b <- assessBalance(data = test,                    exposure = \"A\",                    exposure_time_pts = c(1, 2, 3),                    outcome = \"D.3\",                    type = \"prebalance\",                    formulas = f,                    save.out = FALSE) #> USER ALERT: The following statistics display covariate imbalance at each exposure time point prior to weighting, using short formulas. #>     #> As shown below, 3 out of 8 (38%) covariates across time points, corresponding to 3 out of 3 domains, remain imbalanced with a remaining median absolute value correlation/std mean difference of 0.24 (range= -0.24-0.35): #>  #> Table: Imbalanced covariates using no weights and short formulas #>  #> | exp_time| balanced_n| imbalanced_n|  n| #> |--------:|----------:|------------:|--:| #> |        1|          1|            0|  1| #> |        2|          1|            3|  4| #> |        3|          3|            0|  3| #>  #>  #> USER ALERT: For exposure A using the short formulas and no weights : #> The median absolute value relation between exposure and confounder is 0.09 (range = -0.24 -0.35).  #> As shown below, the following 3 covariates across time points out of 8 total (37.5%) spanning 3 domains out of 3 (100%) are imbalanced with a remaining median absolute value correlation/std mean difference in relation to A of 0.24 (range=-0.24-0.35) : #>  #>  #> Table: Imbalanced Covariates #>  #> |   |exposure | exp_time| covar_time|covariate |    avg_bal| bal_thresh| balanced| #> |:--|:--------|--------:|----------:|:---------|----------:|----------:|--------:| #> |3  |A        |        2|          1|A.1:B.1   | -0.2408304|        0.1|        0| #> |4  |A        |        2|          1|B.1       |  0.3490417|        0.1|        0| #> |5  |A        |        2|          0|C         |  0.1881424|        0.1|        0| #>   # Weighted w <- createWeights(data = test,                    exposure = \"A\",                    outcome = \"D.3\",                    formulas = f,                    save.out = FALSE) #> For the cbps weighting method, the median weight value is 1.06 (SD = 1; range = 0.15-6).  #>    b <- assessBalance(data = test,                    exposure = \"A\",                    exposure_time_pts = c(1, 2, 3),                    outcome = \"D.3\",                    type = \"weighted\",                    weights = w,                    formulas = f,                    save.out = FALSE) #> USER ALERT: The following statistics display covariate imbalance at each exposure time point following IPTW weighting, using short formulas. #>     #> As shown below, 2 out of 8 (25%) covariates across time points, corresponding to 2 out of 3 domains, remain imbalanced with a remaining median absolute value correlation/std mean difference of 0.13 (range= -0.16-0.1): #>  #> Table: Imbalanced covariates using cbps and short formulas #>  #> | exp_time| balanced_n| imbalanced_n|  n| #> |--------:|----------:|------------:|--:| #> |        1|          0|            1|  1| #> |        2|          4|            0|  4| #> |        3|          2|            1|  3| #>  #>  #> USER ALERT: For exposure A using the short formulas and cbps : #> The median absolute value relation between exposure and confounder is 0.04 (range = -0.16 -0.1).  #> As shown below, the following 2 covariates across time points out of 8 total (25%) spanning 2 domains out of 3 (66.67%) are imbalanced with a remaining median absolute value correlation/std mean difference in relation to A of 0.13 (range=-0.16-0.1) : #>  #>  #> Table: Imbalanced Covariates #>  #> |   |exposure | exp_time| covar_time|covariate |    avg_bal| bal_thresh| balanced| #> |:--|:--------|--------:|----------:|:---------|----------:|----------:|--------:| #> |1  |A        |        1|          0|C         | -0.1572334|        0.1|        0| #> |7  |A        |        3|          2|B.2       |  0.1032720|        0.1|        0| #>  b <- assessBalance(data = test,                    exposure = \"A\",                    exposure_time_pts = c(1, 2, 3),                    outcome = \"D.3\",                    type = \"weighted\",                    weights = w,                    formulas = f,                    balance_thresh = 0.2,                    save.out = FALSE) #> USER ALERT: The following statistics display covariate imbalance at each exposure time point following IPTW weighting, using short formulas. #>     #> No covariates remain imbalanced using cbps and short formulas.  #>  #>  #> USER ALERT: For exposure A using the short formulas and cbps : #> The median absolute value relation between exposure and confounder is 0.04 (range = -0.16 -0.1).  #> There are no imbalanced covariates.  #> There are no imbalanced covariates. b <- assessBalance(data = test,                    exposure = \"A\",                    exposure_time_pts = c(1, 2, 3),                    outcome = \"D.3\",                    type = \"weighted\",                    weights = w,                    formulas = f,                    balance_thresh = c(0.1, 0.2),                    imp_conf = \"B.1\",                    save.out = FALSE) #> USER ALERT: The following statistics display covariate imbalance at each exposure time point following IPTW weighting, using short formulas. #>     #> No covariates remain imbalanced using cbps and short formulas.  #>  #>  #> USER ALERT: For exposure A using the short formulas and cbps : #> The median absolute value relation between exposure and confounder is 0.04 (range = -0.16 -0.1).  #> There are no imbalanced covariates.  #> There are no imbalanced covariates."},{"path":"https://istallworthy.github.io/devMSMs/reference/calcBalStats.html","id":null,"dir":"Reference","previous_headings":"","what":"Calculate balance stats based on Jackson paper — calcBalStats","title":"Calculate balance stats based on Jackson paper — calcBalStats","text":"Calculate weighted unweighted standardized balance statistics given exposure time point, using relevant confounders. Draws Jackson, 2016 approaches assessing balance time-varying exposures weighting statistics based sample distribution exposure histories.","code":""},{"path":"https://istallworthy.github.io/devMSMs/reference/calcBalStats.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Calculate balance stats based on Jackson paper — calcBalStats","text":"","code":"calcBalStats(   data,   formulas,   exposure,   exposure_time_pts,   outcome,   balance_thresh,   k = 0,   weights = NULL,   imp_conf = NULL,   home_dir = NULL,   verbose = TRUE,   save.out = TRUE )"},{"path":"https://istallworthy.github.io/devMSMs/reference/calcBalStats.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Calculate balance stats based on Jackson paper — calcBalStats","text":"data data wide format : data frame, path folder imputed .csv files, mids object formulas list balancing formulas time point output createFormulas() exposure name exposure variable exposure_time_pts list integers weights created/assessed correspond time points exposure wass measured outcome name outcome variable \".timepoint\" suffix balance_thresh (optional) one two numbers 0 1 indicating single balancingn threshold thresholds less important confounders, respectively k (optional) imputation number weights (optional) list IPTW weights output createWeights imp_conf (optional) list variable names reflecting important confounders (required two balance thresholds provided) home_dir (optional) path home directory (required save.= TRUE) verbose (optional) TRUE FALSE indicator user output (default TRUE) save.(optional) TRUE FALSE indicator save output intermediary output locally","code":""},{"path":"https://istallworthy.github.io/devMSMs/reference/calcBalStats.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Calculate balance stats based on Jackson paper — calcBalStats","text":"data frame balance statistics","code":""},{"path":"https://istallworthy.github.io/devMSMs/reference/calcBalStats.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Calculate balance stats based on Jackson paper — calcBalStats","text":"","code":"test <- data.frame(ID = 1:50,                    A.1 = rnorm(n = 50),                    A.2 = rnorm(n = 50),                    A.3 = rnorm(n = 50),                    B.1 = rnorm(n = 50),                    B.2 = rnorm(n = 50),                    B.3 = rnorm(n = 50),                    C = rnorm(n = 50),                    D.3 = rnorm(n = 50)) test[, c(\"A.1\", \"A.2\", \"A.3\")] <- lapply(test[, c(\"A.1\", \"A.2\", \"A.3\")], as.numeric)  f <- createFormulas(exposure = \"A\",                     exposure_time_pts = c(1, 2, 3),                     outcome = \"D.3\",                     tv_confounders = c(\"A.1\", \"A.2\", \"A.3\", \"B.1\", \"B.2\", \"B.3\"),                     ti_confounders = \"C\",                     type = \"full\",                     save.out = FALSE) #> USER ALERT: Please manually inspect the full balancing formula below: #> The full formula for A - D.3 at A time point 1 is:  #> A.1 ~ C #> <environment: 0x55c514613918> #>  #> USER ALERT: Please manually inspect the full balancing formula below: #> The full formula for A - D.3 at A time point 2 is:  #> A.2 ~ A.1 + B.1 + C #> <environment: 0x55c514613918> #>  #> USER ALERT: Please manually inspect the full balancing formula below: #> The full formula for A - D.3 at A time point 3 is:  #> A.3 ~ A.1 + A.2 + B.1 + B.2 + C #> <environment: 0x55c514613918> #>   w <- createWeights(data = test,                    exposure = \"A\",                    outcome = \"D.3\",                    formulas = f,                    save.out = FALSE) #> For the cbps weighting method, the median weight value is 0.95 (SD = 0.97; range = 0.13-6).  #>    c <- calcBalStats(data = test,                   formulas = f,                   exposure = \"A\",                   exposure_time_pts = c(1, 2, 3),                   outcome = \"D.3\",                   balance_thresh = 0.1,                   save.out = FALSE)    #> As shown below, 6 out of 9 (67%) covariates across time points, corresponding to 3 out of 3 domains, remain imbalanced with a remaining median absolute value correlation/std mean difference of 0.2 (range= -0.31-0.1): #>  #> Table: Imbalanced covariates using no weights and full formulas #>  #> | exp_time| balanced_n| imbalanced_n|  n| #> |--------:|----------:|------------:|--:| #> |        1|          0|            1|  1| #> |        2|          1|            2|  3| #> |        3|          2|            3|  5| #>  #>  c <- calcBalStats(data = test,                   formulas = f,                   exposure = \"A\",                   exposure_time_pts = c(1, 2, 3),                   outcome = \"D.3\",                   balance_thresh = c(0.05, 0.1),                   imp_conf = \"B2\",                   save.out = FALSE)    #> As shown below, 6 out of 9 (67%) covariates across time points, corresponding to 3 out of 3 domains, remain imbalanced with a remaining median absolute value correlation/std mean difference of 0.2 (range= -0.31-0.1): #>  #> Table: Imbalanced covariates using no weights and full formulas #>  #> | exp_time| balanced_n| imbalanced_n|  n| #> |--------:|----------:|------------:|--:| #> |        1|          0|            1|  1| #> |        2|          1|            2|  3| #> |        3|          2|            3|  5| #>  #>  c <- calcBalStats(data = test,                   formulas = f,                   exposure = \"A\",                   exposure_time_pts = c(1, 2, 3),                   outcome = \"D.3\",                   balance_thresh = 0.1,                   weights = w[[1]],                   save.out = FALSE)    #> As shown below, 5 out of 9 (56%) covariates across time points, corresponding to 3 out of 3 domains, remain imbalanced with a remaining median absolute value correlation/std mean difference of 0.13 (range= -0.13-0.17): #>  #> Table: Imbalanced covariates using cbps and full formulas #>  #> | exp_time| balanced_n| imbalanced_n|  n| #> |--------:|----------:|------------:|--:| #> |        1|          0|            1|  1| #> |        2|          2|            1|  3| #> |        3|          2|            3|  5| #>  #>"},{"path":"https://istallworthy.github.io/devMSMs/reference/compareHistories.html","id":null,"dir":"Reference","previous_headings":"","what":"Estimate, compare, and visualize exposure histories — compareHistories","title":"Estimate, compare, and visualize exposure histories — compareHistories","text":"Takes fitted model output created predicted values user-specified histories (pooling imputed data), conducting contrast comparisons (pooling imputed data), correcting multiple comparisons, plotting results.","code":""},{"path":"https://istallworthy.github.io/devMSMs/reference/compareHistories.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Estimate, compare, and visualize exposure histories — compareHistories","text":"","code":"compareHistories(   home_dir,   exposure,   exposure_time_pts,   outcome,   model,   epochs = NULL,   hi_lo_cut = NULL,   reference = NULL,   comparison = NULL,   mc_comp_method = NA,   dose_level = NA,   exp_lab = NA,   out_lab = NA,   colors = NULL,   verbose = TRUE,   save.out = TRUE )"},{"path":"https://istallworthy.github.io/devMSMs/reference/compareHistories.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Estimate, compare, and visualize exposure histories — compareHistories","text":"home_dir path home directory (required 'save.' = TRUE) exposure name exposure variable exposure_time_pts list integers weights created/assessed correspond time points exposure wass measured outcome name outcome variable \".timepoint\" suffix model list model outputs fitModel() epochs (optional) data frame exposure epoch labels values hi_lo_cut (optional) list two numbers indicating quantile values reflect high low values, respectively, continuous exposure (default median split) reference (optional) list sof one strings \"-\"-separated \"l\" \"h\" values indicative reference exposure history compare comparison, required comparison supplied comparison (optional) list one strings \"-\"-separated \"l\" \"h\" values indicative comparison history/histories compare reference, required reference supplied mc_comp_method (optional) character abbreviation multiple comparison correction method stats::p.adjust, default Benjamini-Hochburg (\"BH\") dose_level (optional) \"l\" \"h\" indicating whether low high doses tallied tables plots (default high \"h\") exp_lab (optional) character label exposure variable plots (default variable name) out_lab (optional) character label outcome variable plots (default variable name) colors (optional) character specifying Brewer palette list colors (n(epochs)+1) plotting (default \"Dark2\" palette) verbose (optional) TRUE FALSE indicator user output (default TRUE) save.(optional) TRUE FALSE indicator save output intermediary output locally (default TRUE)","code":""},{"path":"https://istallworthy.github.io/devMSMs/reference/compareHistories.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Estimate, compare, and visualize exposure histories — compareHistories","text":"data frame history comparisons","code":""},{"path":[]},{"path":"https://istallworthy.github.io/devMSMs/reference/compareHistories.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Estimate, compare, and visualize exposure histories — compareHistories","text":"","code":"f <- createFormulas(exposure = \"A\",                     exposure_time_pts = c(1, 2, 3),                     outcome = \"D.3\",                     tv_confounders = c(\"A.1\", \"A.2\", \"A.3\", \"B.1\", \"B.2\", \"B.3\"),                     ti_confounders = \"C\",                     type = \"full\",                     save.out = FALSE) #> USER ALERT: Please manually inspect the full balancing formula below: #> The full formula for A - D.3 at A time point 1 is:  #> A.1 ~ C #> <environment: 0x55c517204978> #>  #> USER ALERT: Please manually inspect the full balancing formula below: #> The full formula for A - D.3 at A time point 2 is:  #> A.2 ~ A.1 + B.1 + C #> <environment: 0x55c517204978> #>  #> USER ALERT: Please manually inspect the full balancing formula below: #> The full formula for A - D.3 at A time point 3 is:  #> A.3 ~ A.1 + A.2 + B.1 + B.2 + C #> <environment: 0x55c517204978> #>   test <- data.frame(ID = 1:50,                    A.1 = rnorm(n = 50),                    A.2 = rnorm(n = 50),                    A.3 = rnorm(n = 50),                    B.1 = rnorm(n = 50),                    B.2 = rnorm(n = 50),                    B.3 = rnorm(n = 50),                    C = rnorm(n = 50),                    D.3 = rnorm(n = 50)) test[, c(\"A.1\", \"A.2\", \"A.3\")] <- lapply(test[, c(\"A.1\", \"A.2\", \"A.3\")], as.numeric)  w <- createWeights(data = test,                    exposure = \"A\",                    outcome = \"D.3\",                    formulas = f,                    save.out = FALSE) #> For the cbps weighting method, the median weight value is 0.95 (SD = 0.44; range = 0.24-3).  #>    m <- fitModel(data = test,               weights = w,               exposure = \"A\",               exposure_time_pts = c(1, 2, 3),               outcome = \"D.3\",               model = \"m0\",               save.out = FALSE) #> Please inspect the following likelihood ratio test to determine if the exposures collective predict significant variation in the outcome compared to a model without exposure terms. #>  #> We strongly suggest not conducting history comparisons if the likelihood ratio test is non-significant. #>  #> Working (Rao-Scott+F) LRT for A.1 A.2 A.3 #>  in svyglm(formula = as.formula(f), design = s, family = fam) #> Working 2logLR =  4.726752 p= 0.19874  #> (scale factors:  1.6 0.82 0.55 );  denominator df= 46 #>  #> The marginal model, m0, is summarized below:  r <- compareHistories(exposure = \"A\",                       exposure_time_pts = c(1, 2, 3),                       outcome = \"D.3\",                       model = m,                       save.out = FALSE) #> Summary of Exposure Main Effects:  #>  #> USER ALERT: Out of the total of 50 individuals in the sample, below is the distribution of the 50 (100%) individuals that fall into 8 out of the 8 total user-defined exposure histories created from median split values for low and high levels of exposure A, respectively, across 1, 2, 3.  #> USER ALERT: Please inspect the distribution of the sample across the following exposure histories and ensure there is sufficient spread to avoid extrapolation and low precision:  #>  #> Table: Summary of user-specified exposure A histories based on exposure main effects 1, 2, 3 containing time points 1, 2, 3: #>  #> |history |  n| #> |:-------|--:| #> |h-h-h   |  6| #> |h-h-l   |  8| #> |h-l-h   |  6| #> |h-l-l   |  5| #> |l-h-h   |  7| #> |l-h-l   |  4| #> |l-l-h   |  6| #> |l-l-l   |  8| #>  #>  #> Below are the average predictions by user-specified history:  #> |     A.1|    A.2|     A.3| estimate| std.error| statistic| p.value| s.value| conf.low| conf.high|history | dose_count| #> |-------:|------:|-------:|--------:|---------:|---------:|-------:|-------:|--------:|---------:|:-------|----------:| #> | -0.1076| -0.080| -0.1095|  -0.0879|    0.1340|   -0.6558|  0.5119|  0.9660|  -0.3504|    0.1747|l-l-l   |          0| #> | -0.1076| -0.080| -0.1075|  -0.0877|    0.1339|   -0.6552|  0.5123|  0.9649|  -0.3501|    0.1747|l-l-h   |          1| #> | -0.1076| -0.078| -0.1095|  -0.0884|    0.1339|   -0.6598|  0.5094|  0.9731|  -0.3508|    0.1741|l-h-l   |          1| #> | -0.1076| -0.078| -0.1075|  -0.0882|    0.1338|   -0.6592|  0.5098|  0.9720|  -0.3505|    0.1741|l-h-h   |          2| #> | -0.1056| -0.080| -0.1095|  -0.0875|    0.1340|   -0.6532|  0.5136|  0.9613|  -0.3501|    0.1751|h-l-l   |          1| #> | -0.1056| -0.080| -0.1075|  -0.0874|    0.1339|   -0.6526|  0.5140|  0.9602|  -0.3498|    0.1751|h-l-h   |          2| #> | -0.1056| -0.078| -0.1095|  -0.0880|    0.1339|   -0.6572|  0.5111|  0.9684|  -0.3505|    0.1745|h-h-l   |          2| #> | -0.1056| -0.078| -0.1075|  -0.0879|    0.1339|   -0.6566|  0.5115|  0.9673|  -0.3502|    0.1745|h-h-h   |          3| #>  #>  #> Conducting multiple comparison correction for all pairings between comparison histories and each refernece history using the BH method.  #>  #>  #> USER ALERT: please inspect the following comparisons:  #> |term                                                    | estimate| std.error| statistic| p.value| s.value| conf.low| conf.high|history        |dose   | p.value_corr| #> |:-------------------------------------------------------|--------:|---------:|---------:|-------:|-------:|--------:|---------:|:--------------|:------|------------:| #> |(-0.1076, -0.08, -0.1095) - (-0.1076, -0.08, -0.1075)   |        0|         0|     -0.49|    0.62|    0.69|        0|         0|l-l-l vs l-l-h |0 vs 1 |         0.64| #> |(-0.1076, -0.08, -0.1095) - (-0.1076, -0.078, -0.1095)  |        0|         0|      1.82|    0.07|    3.85|        0|         0|l-l-l vs l-h-l |0 vs 1 |         0.42| #> |(-0.1076, -0.08, -0.1095) - (-0.1076, -0.078, -0.1075)  |        0|         0|      1.10|    0.27|    1.88|        0|         0|l-l-l vs l-h-h |0 vs 2 |         0.48| #> |(-0.1076, -0.08, -0.1095) - (-0.1056, -0.08, -0.1095)   |        0|         0|     -1.20|    0.23|    2.13|        0|         0|l-l-l vs h-l-l |0 vs 1 |         0.46| #> |(-0.1076, -0.08, -0.1095) - (-0.1056, -0.08, -0.1075)   |        0|         0|     -1.01|    0.31|    1.67|        0|         0|l-l-l vs h-l-h |0 vs 2 |         0.49| #> |(-0.1076, -0.08, -0.1095) - (-0.1056, -0.078, -0.1095)  |        0|         0|      0.63|    0.53|    0.91|        0|         0|l-l-l vs h-h-l |0 vs 2 |         0.64| #> |(-0.1076, -0.08, -0.1095) - (-0.1056, -0.078, -0.1075)  |        0|         0|      0.06|    0.96|    0.07|        0|         0|l-l-l vs h-h-h |0 vs 3 |         0.96| #> |(-0.1076, -0.08, -0.1075) - (-0.1076, -0.078, -0.1095)  |        0|         0|      1.44|    0.15|    2.75|        0|         0|l-l-h vs l-h-l |1 vs 1 |         0.42| #> |(-0.1076, -0.08, -0.1075) - (-0.1076, -0.078, -0.1075)  |        0|         0|      1.82|    0.07|    3.85|        0|         0|l-l-h vs l-h-h |1 vs 2 |         0.42| #> |(-0.1076, -0.08, -0.1075) - (-0.1056, -0.08, -0.1095)   |        0|         0|     -0.69|    0.49|    1.02|        0|         0|l-l-h vs h-l-l |1 vs 1 |         0.64| #> |(-0.1076, -0.08, -0.1075) - (-0.1056, -0.08, -0.1075)   |        0|         0|     -1.20|    0.23|    2.13|        0|         0|l-l-h vs h-l-h |1 vs 2 |         0.46| #> |(-0.1076, -0.08, -0.1075) - (-0.1056, -0.078, -0.1095)  |        0|         0|      0.87|    0.39|    1.38|        0|         0|l-l-h vs h-h-l |1 vs 2 |         0.57| #> |(-0.1076, -0.08, -0.1075) - (-0.1056, -0.078, -0.1075)  |        0|         0|      0.63|    0.53|    0.91|        0|         0|l-l-h vs h-h-h |1 vs 3 |         0.64| #> |(-0.1076, -0.078, -0.1095) - (-0.1076, -0.078, -0.1075) |        0|         0|     -0.49|    0.62|    0.69|        0|         0|l-h-l vs l-h-h |1 vs 2 |         0.64| #> |(-0.1076, -0.078, -0.1095) - (-0.1056, -0.08, -0.1095)  |        0|         0|     -1.69|    0.09|    3.46|        0|         0|l-h-l vs h-l-l |1 vs 1 |         0.42| #> |(-0.1076, -0.078, -0.1095) - (-0.1056, -0.08, -0.1075)  |        0|         0|     -1.48|    0.14|    2.86|        0|         0|l-h-l vs h-l-h |1 vs 2 |         0.42| #> |(-0.1076, -0.078, -0.1095) - (-0.1056, -0.078, -0.1095) |        0|         0|     -1.20|    0.23|    2.13|        0|         0|l-h-l vs h-h-l |1 vs 2 |         0.46| #> |(-0.1076, -0.078, -0.1095) - (-0.1056, -0.078, -0.1075) |        0|         0|     -1.01|    0.31|    1.67|        0|         0|l-h-l vs h-h-h |1 vs 3 |         0.49| #> |(-0.1076, -0.078, -0.1075) - (-0.1056, -0.08, -0.1095)  |        0|         0|     -1.53|    0.13|    2.98|        0|         0|l-h-h vs h-l-l |2 vs 1 |         0.42| #> |(-0.1076, -0.078, -0.1075) - (-0.1056, -0.08, -0.1075)  |        0|         0|     -1.69|    0.09|    3.46|        0|         0|l-h-h vs h-l-h |2 vs 2 |         0.42| #> |(-0.1076, -0.078, -0.1075) - (-0.1056, -0.078, -0.1095) |        0|         0|     -0.69|    0.49|    1.02|        0|         0|l-h-h vs h-h-l |2 vs 2 |         0.64| #> |(-0.1076, -0.078, -0.1075) - (-0.1056, -0.078, -0.1075) |        0|         0|     -1.20|    0.23|    2.13|        0|         0|l-h-h vs h-h-h |2 vs 3 |         0.46| #> |(-0.1056, -0.08, -0.1095) - (-0.1056, -0.08, -0.1075)   |        0|         0|     -0.49|    0.62|    0.69|        0|         0|h-l-l vs h-l-h |1 vs 2 |         0.64| #> |(-0.1056, -0.08, -0.1095) - (-0.1056, -0.078, -0.1095)  |        0|         0|      1.82|    0.07|    3.85|        0|         0|h-l-l vs h-h-l |1 vs 2 |         0.42| #> |(-0.1056, -0.08, -0.1095) - (-0.1056, -0.078, -0.1075)  |        0|         0|      1.10|    0.27|    1.88|        0|         0|h-l-l vs h-h-h |1 vs 3 |         0.48| #> |(-0.1056, -0.08, -0.1075) - (-0.1056, -0.078, -0.1095)  |        0|         0|      1.44|    0.15|    2.75|        0|         0|h-l-h vs h-h-l |2 vs 2 |         0.42| #> |(-0.1056, -0.08, -0.1075) - (-0.1056, -0.078, -0.1075)  |        0|         0|      1.82|    0.07|    3.85|        0|         0|h-l-h vs h-h-h |2 vs 3 |         0.42| #> |(-0.1056, -0.078, -0.1095) - (-0.1056, -0.078, -0.1075) |        0|         0|     -0.49|    0.62|    0.69|        0|         0|h-h-l vs h-h-h |2 vs 3 |         0.64| #>  #>   r <- compareHistories(exposure = \"A\",                       exposure_time_pts = c(1, 2, 3),                       outcome = \"D.3\",                       model = m,                       reference = \"l-l-l\",                       comparison = \"h-h-h\",                       save.out = FALSE) #> Summary of Exposure Main Effects:  #>  #> USER ALERT: Out of the total of 50 individuals in the sample, below is the distribution of the 14 (28%) individuals that fall into 2 out of the 2 total user-defined exposure histories created from median split values for low and high levels of exposure A, respectively, across 1, 2, 3.  #> USER ALERT: Please inspect the distribution of the sample across the following exposure histories and ensure there is sufficient spread to avoid extrapolation and low precision:  #>  #> Table: Summary of user-specified exposure A histories based on exposure main effects 1, 2, 3 containing time points 1, 2, 3: #>  #> |history |  n| #> |:-------|--:| #> |h-h-h   |  6| #> |l-l-l   |  8| #>  #>  #> Below are the average predictions by user-specified history:  #> |   |     A.1|    A.2|     A.3| estimate| std.error| statistic| p.value| s.value| conf.low| conf.high|history | dose_count| #> |:--|-------:|------:|-------:|--------:|---------:|---------:|-------:|-------:|--------:|---------:|:-------|----------:| #> |1  | -0.1076| -0.080| -0.1095|  -0.0879|    0.1340|   -0.6558|  0.5119|  0.9660|  -0.3504|    0.1747|l-l-l   |          0| #> |8  | -0.1056| -0.078| -0.1075|  -0.0879|    0.1339|   -0.6566|  0.5115|  0.9673|  -0.3502|    0.1745|h-h-h   |          3| #>  #>  #> Conducting multiple comparison correction for all pairings between comparison histories and each refernece history using the BH method.  #>  #>  #> USER ALERT: please inspect the following comparisons:  #> |term                                                   | estimate| std.error| statistic| p.value| s.value| conf.low| conf.high|history        |dose   | p.value_corr| #> |:------------------------------------------------------|--------:|---------:|---------:|-------:|-------:|--------:|---------:|:--------------|:------|------------:| #> |(-0.1076, -0.08, -0.1095) - (-0.1056, -0.078, -0.1075) |        0|         0|     -0.06|    0.96|    0.07|        0|         0|l-l-l vs h-h-h |0 vs 3 |         0.96| #>  #>   r <- compareHistories(exposure = \"A\",                       exposure_time_pts = c(1, 2, 3),                       outcome = \"D.3\",                       model = m,                       reference = \"l-l-l\",                       comparison = c(\"h-h-h\", \"h-l-l\"),                       save.out = FALSE) #> Summary of Exposure Main Effects:  #>  #> USER ALERT: Out of the total of 50 individuals in the sample, below is the distribution of the 19 (38%) individuals that fall into 3 out of the 3 total user-defined exposure histories created from median split values for low and high levels of exposure A, respectively, across 1, 2, 3.  #> USER ALERT: Please inspect the distribution of the sample across the following exposure histories and ensure there is sufficient spread to avoid extrapolation and low precision:  #>  #> Table: Summary of user-specified exposure A histories based on exposure main effects 1, 2, 3 containing time points 1, 2, 3: #>  #> |history |  n| #> |:-------|--:| #> |h-h-h   |  6| #> |h-l-l   |  5| #> |l-l-l   |  8| #>  #>  #> Below are the average predictions by user-specified history:  #> |   |     A.1|    A.2|     A.3| estimate| std.error| statistic| p.value| s.value| conf.low| conf.high|history | dose_count| #> |:--|-------:|------:|-------:|--------:|---------:|---------:|-------:|-------:|--------:|---------:|:-------|----------:| #> |1  | -0.1076| -0.080| -0.1095|  -0.0879|    0.1340|   -0.6558|  0.5119|  0.9660|  -0.3504|    0.1747|l-l-l   |          0| #> |5  | -0.1056| -0.080| -0.1095|  -0.0875|    0.1340|   -0.6532|  0.5136|  0.9613|  -0.3501|    0.1751|h-l-l   |          1| #> |8  | -0.1056| -0.078| -0.1075|  -0.0879|    0.1339|   -0.6566|  0.5115|  0.9673|  -0.3502|    0.1745|h-h-h   |          3| #>  #>  #> Conducting multiple comparison correction for all pairings between comparison histories and each refernece history using the BH method.  #>  #>  #> USER ALERT: please inspect the following comparisons:  #> |term                                                   | estimate| std.error| statistic| p.value| s.value| conf.low| conf.high|history        |dose   | p.value_corr| #> |:------------------------------------------------------|--------:|---------:|---------:|-------:|-------:|--------:|---------:|:--------------|:------|------------:| #> |(-0.1076, -0.08, -0.1095) - (-0.1056, -0.078, -0.1075) |        0|         0|     -0.06|    0.96|    0.07|        0|         0|l-l-l vs h-h-h |0 vs 3 |         0.96| #> |(-0.1076, -0.08, -0.1095) - (-0.1056, -0.08, -0.1095)  |        0|         0|      1.20|    0.23|    2.13|        0|         0|l-l-l vs h-l-l |0 vs 1 |         0.46| #>  #>   r <- compareHistories(exposure = \"A\",                       exposure_time_pts = c(1, 2, 3),                       outcome = \"D.3\",                       model = m,                       reference = c(\"l-l-l\", \"l-h-h\"),                       comparison = c(\"h-h-h\"),                       save.out = FALSE) #> Summary of Exposure Main Effects:  #>  #> USER ALERT: Out of the total of 50 individuals in the sample, below is the distribution of the 21 (42%) individuals that fall into 3 out of the 3 total user-defined exposure histories created from median split values for low and high levels of exposure A, respectively, across 1, 2, 3.  #> USER ALERT: Please inspect the distribution of the sample across the following exposure histories and ensure there is sufficient spread to avoid extrapolation and low precision:  #>  #> Table: Summary of user-specified exposure A histories based on exposure main effects 1, 2, 3 containing time points 1, 2, 3: #>  #> |history |  n| #> |:-------|--:| #> |h-h-h   |  6| #> |l-h-h   |  7| #> |l-l-l   |  8| #>  #>  #> Below are the average predictions by user-specified history:  #> |   |     A.1|    A.2|     A.3| estimate| std.error| statistic| p.value| s.value| conf.low| conf.high|history | dose_count| #> |:--|-------:|------:|-------:|--------:|---------:|---------:|-------:|-------:|--------:|---------:|:-------|----------:| #> |1  | -0.1076| -0.080| -0.1095|  -0.0879|    0.1340|   -0.6558|  0.5119|  0.9660|  -0.3504|    0.1747|l-l-l   |          0| #> |4  | -0.1076| -0.078| -0.1075|  -0.0882|    0.1338|   -0.6592|  0.5098|  0.9720|  -0.3505|    0.1741|l-h-h   |          2| #> |8  | -0.1056| -0.078| -0.1075|  -0.0879|    0.1339|   -0.6566|  0.5115|  0.9673|  -0.3502|    0.1745|h-h-h   |          3| #>  #>  #> Conducting multiple comparison correction for all pairings between comparison histories and each refernece history using the BH method.  #>  #>  #> USER ALERT: please inspect the following comparisons:  #> |term                                                   | estimate| std.error| statistic| p.value| s.value| conf.low| conf.high|term.1                                                                                                                | estimate.1| std.error.1| statistic.1| p.value.1| s.value.1| conf.low.1| conf.high.1|history        |dose   | p.value_corr| #> |:------------------------------------------------------|--------:|---------:|---------:|-------:|-------:|--------:|---------:|:---------------------------------------------------------------------------------------------------------------------|----------:|-----------:|-----------:|---------:|---------:|----------:|-----------:|:--------------|:------|------------:| #> |(-0.1076, -0.08, -0.1095) - (-0.1056, -0.078, -0.1075) |        0|         0|     -0.06|    0.96|    0.07|        0|         0|(-0.107649373453063,-0.07797394680922,-0.107528260613456) - (-0.105649373453063,-0.07797394680922,-0.107528260613456) |          0|           0|         1.2|      0.23|      2.13|          0|           0|l-l-l vs h-h-h |0 vs 3 |         0.96| #>  #>   r <- compareHistories(exposure = \"A\",                       exposure_time_pts = c(1, 2, 3),                       outcome = \"D.3\",                       model = m,                       reference = c(\"l-l-l\", \"l-h-h\"),                       comparison = c(\"h-h-h\", \"l-l-h\"),                       save.out = FALSE) #> Summary of Exposure Main Effects:  #>  #> USER ALERT: Out of the total of 50 individuals in the sample, below is the distribution of the 27 (54%) individuals that fall into 4 out of the 4 total user-defined exposure histories created from median split values for low and high levels of exposure A, respectively, across 1, 2, 3.  #> USER ALERT: Please inspect the distribution of the sample across the following exposure histories and ensure there is sufficient spread to avoid extrapolation and low precision:  #>  #> Table: Summary of user-specified exposure A histories based on exposure main effects 1, 2, 3 containing time points 1, 2, 3: #>  #> |history |  n| #> |:-------|--:| #> |h-h-h   |  6| #> |l-h-h   |  7| #> |l-l-h   |  6| #> |l-l-l   |  8| #>  #>  #> Below are the average predictions by user-specified history:  #> |   |     A.1|    A.2|     A.3| estimate| std.error| statistic| p.value| s.value| conf.low| conf.high|history | dose_count| #> |:--|-------:|------:|-------:|--------:|---------:|---------:|-------:|-------:|--------:|---------:|:-------|----------:| #> |1  | -0.1076| -0.080| -0.1095|  -0.0879|    0.1340|   -0.6558|  0.5119|  0.9660|  -0.3504|    0.1747|l-l-l   |          0| #> |2  | -0.1076| -0.080| -0.1075|  -0.0877|    0.1339|   -0.6552|  0.5123|  0.9649|  -0.3501|    0.1747|l-l-h   |          1| #> |4  | -0.1076| -0.078| -0.1075|  -0.0882|    0.1338|   -0.6592|  0.5098|  0.9720|  -0.3505|    0.1741|l-h-h   |          2| #> |8  | -0.1056| -0.078| -0.1075|  -0.0879|    0.1339|   -0.6566|  0.5115|  0.9673|  -0.3502|    0.1745|h-h-h   |          3| #>  #>  #> Conducting multiple comparison correction for all pairings between comparison histories and each refernece history using the BH method.  #>  #>  #> USER ALERT: please inspect the following comparisons:  #> |term                                                   | estimate| std.error| statistic| p.value| s.value| conf.low| conf.high|term.1                                                                                                                | estimate.1| std.error.1| statistic.1| p.value.1| s.value.1| conf.low.1| conf.high.1|history        |dose   | p.value_corr| #> |:------------------------------------------------------|--------:|---------:|---------:|-------:|-------:|--------:|---------:|:---------------------------------------------------------------------------------------------------------------------|----------:|-----------:|-----------:|---------:|---------:|----------:|-----------:|:--------------|:------|------------:| #> |(-0.1076, -0.08, -0.1095) - (-0.1056, -0.078, -0.1075) |        0|         0|     -0.06|    0.96|    0.07|        0|         0|(-0.107649373453063,-0.07797394680922,-0.107528260613456) - (-0.105649373453063,-0.07797394680922,-0.107528260613456) |          0|           0|        1.20|      0.23|      2.13|          0|           0|l-l-l vs h-h-h |0 vs 3 |         0.96| #> |(-0.1076, -0.08, -0.1095) - (-0.1076, -0.08, -0.1075)  |        0|         0|      0.49|    0.62|    0.69|        0|         0|(-0.107649373453063,-0.07797394680922,-0.107528260613456) - (-0.107649373453063,-0.07997394680922,-0.107528260613456) |          0|           0|        1.82|      0.07|      3.85|          0|           0|l-l-l vs l-l-h |0 vs 1 |         0.96| #>  #>   r <- compareHistories(exposure = \"A\",                       exposure_time_pts = c(1, 2, 3),                       outcome = \"D.3\",                       model = m,                       reference = c(\"l-l-l\", \"l-h-h\"),                       comparison = c(\"h-h-h\", \"l-l-h\"),                       hi_lo_cut = c(0.60, 0.30),                       mc_comp_method = \"BH\",                       dose_level = \"l\",                       exp_lab = \"Hello\",                       out_lab = \"Goodbye\",                       colors = \"Set1\",                       save.out = FALSE) #> Summary of Exposure Main Effects:  #>  #> USER ALERT: Out of the total of 50 individuals in the sample, below is the distribution of the 8 (16%) individuals that fall into 4 out of the 4 the total user-defined exposure histories created from 30th and 60th percentile values for low and high levels of exposure A, respectively, across 1, 2, 3.  #> USER ALERT: Please inspect the distribution of the sample across the following exposure histories and ensure there is sufficient spread to avoid extrapolation and low precision:  #>  #> Table: Summary of user-specified exposure A histories based on exposure main effects 1, 2, 3 containing time points 1, 2, 3: #>  #> |history |  n| #> |:-------|--:| #> |h-h-h   |  4| #> |l-h-h   |  1| #> |l-l-h   |  2| #> |l-l-l   |  1| #>  #>  #> Below are the average predictions by user-specified history:  #> |   |     A.1|     A.2|     A.3| estimate| std.error| statistic| p.value| s.value| conf.low| conf.high|history | dose_count| #> |:--|-------:|-------:|-------:|--------:|---------:|---------:|-------:|-------:|--------:|---------:|:-------|----------:| #> |1  | -0.5808| -0.6999| -0.3846|  -0.0330|    0.1749|   -0.1887|  0.8503|  0.2339|  -0.3759|    0.3098|l-l-l   |          3| #> |2  | -0.5808| -0.6999|  0.0726|  -0.0023|    0.1551|   -0.0145|  0.9884|  0.0168|  -0.3062|    0.3017|l-l-h   |          2| #> |4  | -0.5808|  0.1959|  0.0726|  -0.2232|    0.1428|   -1.5633|  0.1180|  3.0835|  -0.5030|    0.0566|l-h-h   |          1| #> |8  |  0.3561|  0.1959|  0.0726|  -0.0657|    0.1396|   -0.4705|  0.6380|  0.6484|  -0.3392|    0.2079|h-h-h   |          0| #>  #>  #> Conducting multiple comparison correction for all pairings between comparison histories and each refernece history using the BH method.  #>  #>  #> USER ALERT: please inspect the following comparisons:  #> |term                                                     | estimate| std.error| statistic| p.value| s.value| conf.low| conf.high|term.1                                                                                                                 | estimate.1| std.error.1| statistic.1| p.value.1| s.value.1| conf.low.1| conf.high.1|history        |dose   | p.value_corr| #> |:--------------------------------------------------------|--------:|---------:|---------:|-------:|-------:|--------:|---------:|:----------------------------------------------------------------------------------------------------------------------|----------:|-----------:|-----------:|---------:|---------:|----------:|-----------:|:--------------|:------|------------:| #> |(-0.5808, -0.6999, -0.3846) - (0.3561, 0.1959, 0.0726)   |    -0.03|      0.14|     -0.23|    0.82|    0.29|    -0.31|      0.24|(-0.580795762357303,0.195875194322767,0.0725936023420958) - (0.356127118298909,0.195875194322767,0.0725936023420958)   |       0.16|        0.13|        1.20|      0.23|      2.13|      -0.10|        0.41|l-l-l vs h-h-h |3 vs 0 |         0.82| #> |(-0.5808, -0.6999, -0.3846) - (-0.5808, -0.6999, 0.0726) |     0.03|      0.06|      0.49|    0.62|    0.69|    -0.09|      0.15|(-0.580795762357303,0.195875194322767,0.0725936023420958) - (-0.580795762357303,-0.699889835870267,0.0725936023420958) |       0.22|        0.12|        1.82|      0.07|      3.85|      -0.02|        0.46|l-l-l vs l-l-h |3 vs 2 |         0.82| #>  #>"},{"path":"https://istallworthy.github.io/devMSMs/reference/createFormulas.html","id":null,"dir":"Reference","previous_headings":"","what":"Create balancing formulas — createFormulas","title":"Create balancing formulas — createFormulas","text":"Creates balancing formulas relating exposure relevant time-varying time invariant confounders exposure time point used create IPTW weights.","code":""},{"path":"https://istallworthy.github.io/devMSMs/reference/createFormulas.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create balancing formulas — createFormulas","text":"","code":"createFormulas(   exposure,   exposure_time_pts,   outcome,   type,   ti_confounders,   tv_confounders,   bal_stats = NULL,   concur_conf = NULL,   keep_conf = NULL,   home_dir = NULL,   custom = NULL,   verbose = TRUE,   save.out = TRUE )"},{"path":"https://istallworthy.github.io/devMSMs/reference/createFormulas.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create balancing formulas — createFormulas","text":"exposure name exposure variable exposure_time_pts list integers weights created/assessed correspond time points exposure wass measured outcome name outcome variable \".timepoint\" suffix type type formula create 'full' (includes lagged time-varying confounders), 'short' (includes time-varying confounders t-1 lag ), 'update' (adds 'short' formulas imbalanced time-varying confounders lags great t-1) ti_confounders list time invariant confounders (least one required) tv_confounders list time-varying confounders \".timepoint\" suffix, include exposure outcome variables (least time-varying exposure variables required ) bal_stats list balance statistics assessBalance(), required 'update' type concur_conf (optional) list variable names reflecting time-varying confounders retain formulas contemporaneously (default none) keep_conf (optional) list variable names reflecting confounders always retain formulas (default depends type) home_dir path home directory (required 'save.' = TRUE) custom (optional) custom list formulas exposure time point (default create automatically according type) verbose (optional) TRUE FALSE indicator user output (default TRUE) save.(optional) TRUE FALSE indicator save output intermediary output locally (default TRUE)","code":""},{"path":"https://istallworthy.github.io/devMSMs/reference/createFormulas.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create balancing formulas — createFormulas","text":"list balancing formulas exposure time point","code":""},{"path":"https://istallworthy.github.io/devMSMs/reference/createFormulas.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Create balancing formulas — createFormulas","text":"","code":"#Full Formulas f <- createFormulas(exposure = \"A\",                     exposure_time_pts = c(1, 2, 3),                     outcome = \"D.3\",                     tv_confounders = c(\"A.1\", \"A.2\", \"A.3\"),                     ti_confounders = \"C\",                     type = \"full\",                     save.out = FALSE) #> USER ALERT: Please manually inspect the full balancing formula below: #> The full formula for A - D.3 at A time point 1 is:  #> A.1 ~ C #> <environment: 0x55c511ff7790> #>  #> USER ALERT: Please manually inspect the full balancing formula below: #> The full formula for A - D.3 at A time point 2 is:  #> A.2 ~ A.1 + C #> <environment: 0x55c511ff7790> #>  #> USER ALERT: Please manually inspect the full balancing formula below: #> The full formula for A - D.3 at A time point 3 is:  #> A.3 ~ A.1 + A.2 + C #> <environment: 0x55c511ff7790> #>   f <- createFormulas(exposure = \"A\",                     exposure_time_pts = c(1, 2, 3),                     outcome = \"D.3\",                     tv_confounders = c(\"A.1\", \"A.2\", \"A.3\", \"B.1\", \"B.2\", \"B.3\"),                     ti_confounders = \"C\",                     type = \"full\",                     save.out = FALSE) #> USER ALERT: Please manually inspect the full balancing formula below: #> The full formula for A - D.3 at A time point 1 is:  #> A.1 ~ C #> <environment: 0x55c511dfff60> #>  #> USER ALERT: Please manually inspect the full balancing formula below: #> The full formula for A - D.3 at A time point 2 is:  #> A.2 ~ A.1 + B.1 + C #> <environment: 0x55c511dfff60> #>  #> USER ALERT: Please manually inspect the full balancing formula below: #> The full formula for A - D.3 at A time point 3 is:  #> A.3 ~ A.1 + A.2 + B.1 + B.2 + C #> <environment: 0x55c511dfff60> #>   #Short Formulas f <- createFormulas(exposure = \"A\",                     exposure_time_pts = c(1, 2, 3),                     outcome = \"D.3\",                     tv_confounders = c(\"A.1\", \"A.2\", \"A.3\"),                     ti_confounders = \"C\",                     type = \"short\",                     save.out = FALSE) #> USER ALERT: Please manually inspect the short balancing formula below that includes time-varying confounders at t-1 only: #> The short formula for A - D.3 at A time point 1 is:  #> A.1 ~ C #> <environment: 0x55c511888668> #>  #> USER ALERT: Please manually inspect the short balancing formula below that includes time-varying confounders at t-1 only: #> The short formula for A - D.3 at A time point 2 is:  #> A.2 ~ A.1 + C #> <environment: 0x55c511888668> #>  #> USER ALERT: Please manually inspect the short balancing formula below that includes time-varying confounders at t-1 only: #> The short formula for A - D.3 at A time point 3 is:  #> A.3 ~ A.2 + C #> <environment: 0x55c511888668> #>  f <- createFormulas(exposure = \"A\",                     exposure_time_pts = c(1, 2, 3),                     outcome = \"D.3\",                     tv_confounders = c(\"A.1\", \"A.2\", \"A.3\", \"B.1\", \"B.2\", \"B.3\"),                     ti_confounders = \"C\",                     type = \"short\",                     save.out = FALSE) #> USER ALERT: Please manually inspect the short balancing formula below that includes time-varying confounders at t-1 only: #> The short formula for A - D.3 at A time point 1 is:  #> A.1 ~ C #> <environment: 0x55c5114e0518> #>  #> USER ALERT: Please manually inspect the short balancing formula below that includes time-varying confounders at t-1 only: #> The short formula for A - D.3 at A time point 2 is:  #> A.2 ~ A.1 + B.1 + C #> <environment: 0x55c5114e0518> #>  #> USER ALERT: Please manually inspect the short balancing formula below that includes time-varying confounders at t-1 only: #> The short formula for A - D.3 at A time point 3 is:  #> A.3 ~ A.2 + B.2 + C #> <environment: 0x55c5114e0518> #>   c <- list(\"short_form-1\" = as.formula(A.1 ~ C),           \"short_form-2\" = as.formula(A.2 ~ A.1 + B.1 + C),           \"short_form-3\" = as.formula(A.3 ~ A.2 + B.2 + C))  f <- createFormulas(exposure = \"A\",                     exposure_time_pts = c(1, 2, 3),                     outcome = \"D.3\",                     tv_confounders = c(\"A.1\", \"A.2\", \"A.3\", \"B.1\", \"B.2\", \"B.3\"),                     ti_confounders = \"C\",                     type = \"short\",                     custom = c,                     save.out = FALSE) #> The user-supplied custom balancing formula for each exposure time point are below:  #> A.1 ~ C #> <environment: 0x55c512082358> #> A.2 ~ A.1 + B.1 + C #> <environment: 0x55c512082358> #> A.3 ~ A.2 + B.2 + C #> <environment: 0x55c512082358>  #Update Formulas test <- data.frame(ID = 1:50,                    A.1 = rnorm(n = 50),                    A.2 = rnorm(n = 50),                    A.3 = rnorm(n = 50),                    B.1 = rnorm(n = 50),                    B.2 = rnorm(n = 50),                    B.3 = rnorm(n = 50),                    C = rnorm(n = 50),                    D.3 = rnorm(n = 50)) test[, c(\"A.1\", \"A.2\", \"A.3\")] <- lapply(test[, c(\"A.1\", \"A.2\", \"A.3\")], as.numeric)  w <- createWeights(data = test,                    exposure = \"A\",                    outcome = \"D.3\",                    formulas = f,                    save.out = FALSE) #> For the cbps weighting method, the median weight value is 1.03 (SD = 0.43; range = 0.41-2).  #>    b <- assessBalance(data = test,                    exposure = \"A\",                    exposure_time_pts = c(1, 2, 3),                    outcome = \"D.3\",                    type = \"weighted\",                    weights = w,                    formulas = f,                    save.out = FALSE) #> USER ALERT: The following statistics display covariate imbalance at each exposure time point following IPTW weighting, using short formulas. #>     #> As shown below, 2 out of 7 (29%) covariates across time points, corresponding to 2 out of 2 domains, remain imbalanced with a remaining median absolute value correlation/std mean difference of 0.14 (range= 0.14-0.14): #>  #> Table: Imbalanced covariates using cbps and short formulas #>  #> | exp_time| balanced_n| imbalanced_n|  n| #> |--------:|----------:|------------:|--:| #> |        1|          0|            1|  1| #> |        2|          2|            1|  3| #> |        3|          3|            0|  3| #>  #>  #> USER ALERT: For exposure A using the short formulas and cbps : #> The median absolute value relation between exposure and confounder is 0.08 (range = -0.08 -0.14).  #> As shown below, the following 2 covariates across time points out of 7 total (28.57%) spanning 2 domains out of 3 (66.67%) are imbalanced with a remaining median absolute value correlation/std mean difference in relation to A of 0.14 (range=0.14-0.14) : #>  #>  #> Table: Imbalanced Covariates #>  #> |   |exposure | exp_time| covar_time|covariate |   avg_bal| bal_thresh| balanced| #> |:--|:--------|--------:|----------:|:---------|---------:|----------:|--------:| #> |1  |A        |        1|          0|C         | 0.1352080|        0.1|        0| #> |3  |A        |        2|          1|B.1       | 0.1438014|        0.1|        0| #>  f <- createFormulas(exposure = \"A\",                     exposure_time_pts = c(1, 2, 3),                     outcome = \"D.3\",                     tv_confounders = c(\"A.1\", \"A.2\", \"A.3\"),                     ti_confounders = \"C\",                     type = \"update\",                     bal_stats = b,                     save.out = FALSE) #> USER ALERT: Please manually inspect the updated balancing formula below that includes time-varying confounders at t-1 and those greater at further lags that remained imbalanced: #> The update formula for A - D.3 at A time point 1 is:  #> A.1 ~ C #> <environment: 0x55c5152df438> #>  #> USER ALERT: Please manually inspect the updated balancing formula below that includes time-varying confounders at t-1 and those greater at further lags that remained imbalanced: #> For A at exposure time point 2 no time-varying confounders at additional lags were added.  #>  #> The update formula for A - D.3 at A time point 2 is:  #> A.2 ~ A.1 + C #> <environment: 0x55c5152df438> #>  #> USER ALERT: Please manually inspect the updated balancing formula below that includes time-varying confounders at t-1 and those greater at further lags that remained imbalanced: #> For A at exposure time point 3 no time-varying confounders at additional lags were added.  #>  #> The update formula for A - D.3 at A time point 3 is:  #> A.3 ~ A.2 + C #> <environment: 0x55c5152df438> #>  f <- createFormulas(exposure = \"A\",                     exposure_time_pts = c(1, 2, 3),                     outcome = \"D.3\",                     tv_confounders = c(\"A.1\", \"A.2\", \"A.3\", \"B.1\", \"B.2\", \"B.3\"),                     ti_confounders = \"C\",                     type = \"update\",                     bal_stats = b,                     save.out = FALSE) #> USER ALERT: Please manually inspect the updated balancing formula below that includes time-varying confounders at t-1 and those greater at further lags that remained imbalanced: #> The update formula for A - D.3 at A time point 1 is:  #> A.1 ~ C #> <environment: 0x55c514f1aec8> #>  #> USER ALERT: Please manually inspect the updated balancing formula below that includes time-varying confounders at t-1 and those greater at further lags that remained imbalanced: #> For A at exposure time point 2 no time-varying confounders at additional lags were added.  #>  #> The update formula for A - D.3 at A time point 2 is:  #> A.2 ~ A.1 + B.1 + C #> <environment: 0x55c514f1aec8> #>  #> USER ALERT: Please manually inspect the updated balancing formula below that includes time-varying confounders at t-1 and those greater at further lags that remained imbalanced: #> For A at exposure time point 3 no time-varying confounders at additional lags were added.  #>  #> The update formula for A - D.3 at A time point 3 is:  #> A.3 ~ A.2 + B.2 + C #> <environment: 0x55c514f1aec8> #>"},{"path":"https://istallworthy.github.io/devMSMs/reference/createWeights.html","id":null,"dir":"Reference","previous_headings":"","what":"Creates IPTW balancing weights — createWeights","title":"Creates IPTW balancing weights — createWeights","text":"Creates IPTW balancing weights user-specified exposure time point using balancing formulas relate exposure time point relevant confounders.","code":""},{"path":"https://istallworthy.github.io/devMSMs/reference/createWeights.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Creates IPTW balancing weights — createWeights","text":"","code":"createWeights(   data,   exposure,   outcome,   formulas,   method = \"cbps\",   SL.library = \"SL.glm\",   criterion = NA,   home_dir = NULL,   read_in_from_file = FALSE,   verbose = TRUE,   save.out = TRUE,   ... )"},{"path":"https://istallworthy.github.io/devMSMs/reference/createWeights.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Creates IPTW balancing weights — createWeights","text":"data data wide format : data frame, list imputed data frames, mids object exposure name exposure variable outcome name outcome variable \".timepoint\" suffix formulas list balancing formulas time point output createFormulas() method (optional) character string weightitMSM() balancing method abbreviation (default Covariate Balancing Propensity Score \"cbps\") SL.library required superLearner weighting method (\"super\"); see SuperLearner::listWrappers() options criterion (optional) criterion used select best weights (default \"p.mean\" minimizing avg Pearson correlation continuous exposures \"smd.mean\" binary exposures) (requird \"gbm\" method) home_dir path home directory (required 'save.' = TRUE) read_in_from_file (optional) TRUE FALSE indicator read weights previously run saved locally (default FALSE) verbose (optional) TRUE FALSE indicator user output (default TRUE) save.(optional) TRUE FALSE indicator save output intermediary output locally (default TRUE) ... inputs weightitMSM()","code":""},{"path":"https://istallworthy.github.io/devMSMs/reference/createWeights.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Creates IPTW balancing weights — createWeights","text":"list IPTW balancing weights","code":""},{"path":[]},{"path":"https://istallworthy.github.io/devMSMs/reference/createWeights.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Creates IPTW balancing weights — createWeights","text":"","code":"test <- data.frame(ID = 1:50,                    A.1 = rnorm(n = 50),                    A.2 = rnorm(n = 50),                    A.3 = rnorm(n = 50),                    B.1 = rnorm(n = 50),                    B.2 = rnorm(n = 50),                    B.3 = rnorm(n = 50),                    C = rnorm(n = 50),                    D.3 = rnorm(n = 50)) test[, c(\"A.1\", \"A.2\", \"A.3\")] <- lapply(test[, c(\"A.1\", \"A.2\", \"A.3\")], as.numeric)  f <- createFormulas(exposure = \"A\",                     exposure_time_pts = c(1, 2, 3),                     outcome = \"D.3\",                     tv_confounders = c(\"A.1\", \"A.2\", \"A.3\", \"B.1\", \"B.2\", \"B.3\"),                     ti_confounders = \"C\",                     type = \"short\",                     save.out = FALSE) #> USER ALERT: Please manually inspect the short balancing formula below that includes time-varying confounders at t-1 only: #> The short formula for A - D.3 at A time point 1 is:  #> A.1 ~ C #> <environment: 0x55c515cd7c68> #>  #> USER ALERT: Please manually inspect the short balancing formula below that includes time-varying confounders at t-1 only: #> The short formula for A - D.3 at A time point 2 is:  #> A.2 ~ A.1 + B.1 + C #> <environment: 0x55c515cd7c68> #>  #> USER ALERT: Please manually inspect the short balancing formula below that includes time-varying confounders at t-1 only: #> The short formula for A - D.3 at A time point 3 is:  #> A.3 ~ A.2 + B.2 + C #> <environment: 0x55c515cd7c68> #>  w <- createWeights(data = test,                    exposure = \"A\",                    outcome = \"D.3\",                    formulas = f,                    save.out = FALSE) #> For the cbps weighting method, the median weight value is 0.98 (SD = 0.2; range = 0.7-2).  #>                       f <- createFormulas(exposure = \"A\",                     exposure_time_pts = c(1, 2, 3),                     outcome = \"D.3\",                     tv_confounders = c(\"A.1\", \"A.2\", \"A.3\", \"B.1\", \"B.2\", \"B.3\", \"A.1:B.1\"),                     ti_confounders = \"C\",                     type = \"short\",                     save.out = FALSE) #> USER ALERT: Please manually inspect the short balancing formula below that includes time-varying confounders at t-1 only: #> The short formula for A - D.3 at A time point 1 is:  #> A.1 ~ C #> <environment: 0x55c510997d20> #>  #> USER ALERT: Please manually inspect the short balancing formula below that includes time-varying confounders at t-1 only: #> The short formula for A - D.3 at A time point 2 is:  #> A.2 ~ A.1 + A.1:B.1 + B.1 + C #> <environment: 0x55c510997d20> #>  #> USER ALERT: Please manually inspect the short balancing formula below that includes time-varying confounders at t-1 only: #> The short formula for A - D.3 at A time point 3 is:  #> A.3 ~ A.2 + B.2 + C #> <environment: 0x55c510997d20> #>  w <- createWeights(data = test,                    exposure = \"A\",                    outcome = \"D.3\",                    formulas = f,                    save.out = FALSE) #> For the cbps weighting method, the median weight value is 0.98 (SD = 0.2; range = 0.7-2).  #>                       w <- createWeights(data = test,                    exposure = \"A\",                    outcome = \"D.3\",                    formulas = f,                    method = \"cbps\",                    save.out = FALSE) #> For the cbps weighting method, the median weight value is 0.98 (SD = 0.2; range = 0.7-2).  #>   w <- createWeights(data = test,                    exposure = \"A\",                    outcome = \"D.3\",                    formulas = f,                    method = \"cbps\",                    save.out = FALSE) #> For the cbps weighting method, the median weight value is 0.98 (SD = 0.2; range = 0.7-2).  #>   w <- createWeights(data = test,                    exposure = \"A\",                    outcome = \"D.3\",                    formulas = f,                    method = \"gbm\",                    save.out = FALSE)                     #> For the gbm weighting method, the median weight value is 0.81 (SD = 0.25; range = 0.36-2).  #>   w <- createWeights(data = test,                    exposure = \"A\",                    outcome = \"D.3\",                    formulas = f,                    method = \"bart\",                    save.out = FALSE) #> For the bart weighting method, the median weight value is 0.83 (SD = 0.3; range = 0.32-2).  #>   w <- createWeights(data = test,                    exposure = \"A\",                    outcome = \"D.3\",                    formulas = f,                    method = \"super\",                    save.out = FALSE)    #> Loading required package: nnls #> Warning: All algorithms have zero weight #> Warning: All metalearner coefficients are zero, predictions will all be equal to 0 #> Warning: All algorithms have zero weight #> Warning: All metalearner coefficients are zero, predictions will all be equal to 0 #> For the super weighting method, the median weight value is 1.02 (SD = 0.29; range = 0.67-2).  #>"},{"path":"https://istallworthy.github.io/devMSMs/reference/create_custom_comparisons.html","id":null,"dir":"Reference","previous_headings":"","what":"Creates custom comparisons — create_custom_comparisons","title":"Creates custom comparisons — create_custom_comparisons","text":"Creates custom comparisons","code":""},{"path":"https://istallworthy.github.io/devMSMs/reference/create_custom_comparisons.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Creates custom comparisons — create_custom_comparisons","text":"","code":"create_custom_comparisons(preds, ref_vals, comp_vals, exposure)"},{"path":"https://istallworthy.github.io/devMSMs/reference/create_custom_comparisons.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Creates custom comparisons — create_custom_comparisons","text":"preds custom output marginaleffects::average_predictions() ref_vals reference values comp_vals comparison values exposure name exposure variable","code":""},{"path":"https://istallworthy.github.io/devMSMs/reference/create_custom_comparisons.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Creates custom comparisons — create_custom_comparisons","text":"custom comparisons","code":""},{"path":"https://istallworthy.github.io/devMSMs/reference/create_custom_contrasts.html","id":null,"dir":"Reference","previous_headings":"","what":"Create custom contrasts — create_custom_contrasts","title":"Create custom contrasts — create_custom_contrasts","text":"Create custom contrasts","code":""},{"path":"https://istallworthy.github.io/devMSMs/reference/create_custom_contrasts.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create custom contrasts — create_custom_contrasts","text":"","code":"create_custom_contrasts(d, reference, comp_histories, exposure, preds)"},{"path":"https://istallworthy.github.io/devMSMs/reference/create_custom_contrasts.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create custom contrasts — create_custom_contrasts","text":"d data frame high low values per exposure main effect reference reference sequence \"h\" /\"l\" (e.g., \"h-h-h\") comp_histories comparison sequence(s) \"h\" /\"l\" (e.g., \"h-h-h\") exposure name exposure variable preds custom output marginaleffects::average_predictions()","code":""},{"path":"https://istallworthy.github.io/devMSMs/reference/create_custom_contrasts.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create custom contrasts — create_custom_contrasts","text":"contrasts","code":""},{"path":"https://istallworthy.github.io/devMSMs/reference/devMSMs-package.html","id":null,"dir":"Reference","previous_headings":"","what":"devMSMs: Tools for Conducting Marginal Structural Models with Developmental Data — devMSMs-package","title":"devMSMs: Tools for Conducting Marginal Structural Models with Developmental Data — devMSMs-package","text":"Functions preparing, assessing, implementing MSMS.","code":""},{"path":[]},{"path":"https://istallworthy.github.io/devMSMs/reference/devMSMs-package.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"devMSMs: Tools for Conducting Marginal Structural Models with Developmental Data — devMSMs-package","text":"Maintainer: Isabella Stallworthy istall@seas.upenn.edu Authors: Noah Greifer ngreifer@iq.harvard.edu [contributor] Meriah DeJoseph meriahd@stanford.edu Emily Padrutt padru004@umn.edu Daniel Berry dberry@umn.edu","code":""},{"path":"https://istallworthy.github.io/devMSMs/reference/eval_hist.html","id":null,"dir":"Reference","previous_headings":"","what":"Visualize distribution of sample across exposure histories — eval_hist","title":"Visualize distribution of sample across exposure histories — eval_hist","text":"Create customized, user-specified exposure histories tables displaying sample distribution across user inspection.","code":""},{"path":"https://istallworthy.github.io/devMSMs/reference/eval_hist.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Visualize distribution of sample across exposure histories — eval_hist","text":"","code":"eval_hist(   data,   exposure,   time_pts,   epochs = NULL,   hi_lo_cut = NULL,   ref = NULL,   comps = NULL )"},{"path":"https://istallworthy.github.io/devMSMs/reference/eval_hist.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Visualize distribution of sample across exposure histories — eval_hist","text":"data data wide format : data frame, list imputed data frames, mids object exposure name exposure variable time_pts list integers weights created/assessed correspond time points exposure measured epochs (optional) data frame exposure epoch labels values hi_lo_cut list two numbers indicating quantile values reflect high low values, respectively, continuous exposure ref (optional) list one strings \"-\"-separated \"l\" \"h\" values indicative reference exposure history compare comparison, required comparison supplied comps (optional) list one strings \"-\"-separated \"l\" \"h\" values indicative comparison history/histories compare reference, required reference supplied","code":""},{"path":"https://istallworthy.github.io/devMSMs/reference/eval_hist.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Visualize distribution of sample across exposure histories — eval_hist","text":"none","code":""},{"path":"https://istallworthy.github.io/devMSMs/reference/eval_hist.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Visualize distribution of sample across exposure histories — eval_hist","text":"","code":"test <- data.frame(ID = 1:50,                    A.1 = rnorm(n = 50),                    A.2 = rnorm(n = 50),                    A.3 = rnorm(n = 50),                    B.1 = rnorm(n = 50),                    B.2 = rnorm(n = 50),                    B.3 = rnorm(n = 50),                    C = rnorm(n = 50),                    D.3 = rnorm(n = 50)) test[, c(\"A.1\", \"A.2\", \"A.3\")] <- lapply(test[, c(\"A.1\", \"A.2\", \"A.3\")], as.numeric)  h <- eval_hist(data = test,                exposure = \"A\",                time_pts = c(1, 2, 3)) #> Summary of Exposure Main Effects:  #>  #> USER ALERT: Out of the total of 50 individuals in the sample, below is the distribution of the 46 (92%) individuals that fall into 8 out of the 8 total user-defined exposure histories created from median split values for low and high levels of exposure A, respectively, across 1, 2, 3.  #> USER ALERT: Please inspect the distribution of the sample across the following exposure histories and ensure there is sufficient spread to avoid extrapolation and low precision:  #>  #> Table: Summary of user-specified exposure A histories based on exposure main effects 1, 2, 3 containing time points 1, 2, 3: #>  #> |history |  n| #> |:-------|--:| #> |h-h-h   |  5| #> |h-h-l   |  7| #> |h-l-h   |  5| #> |h-l-l   |  6| #> |l-h-h   |  4| #> |l-h-l   |  7| #> |l-l-h   |  8| #> |l-l-l   |  4| #>  h <- eval_hist(data = test,                exposure = \"A\",                time_pts = c(1, 2, 3),                epochs = data.frame(epochs = c(\"Infancy\", \"Toddlerhood\"),                                    values = I(list(c(1, 2), c(3))))) #> Summary of Exposure Main Effects:  #>  #> USER ALERT: Out of the total of 50 individuals in the sample, below is the distribution of the 48 (96%) individuals that fall into 4 out of the 4 total user-defined exposure histories created from median split values for low and high levels of exposure A, respectively, across Infancy, Toddlerhood.  #> USER ALERT: Please inspect the distribution of the sample across the following exposure histories and ensure there is sufficient spread to avoid extrapolation and low precision:  #>  #> Table: Summary of user-specified exposure A histories based on exposure main effects Infancy, Toddlerhood containing time points c(1, 2), 3: #>  #> |history |  n| #> |:-------|--:| #> |h-h     |  9| #> |h-l     | 15| #> |l-h     | 15| #> |l-l     |  9| #>  h <- eval_hist(data = test,                exposure = \"A\",                time_pts = c(1, 2, 3),                hi_lo_cut = c(0.6, 0.3)) #> Summary of Exposure Main Effects:  #>  #> USER ALERT: Out of the total of 50 individuals in the sample, below is the distribution of the 17 (34%) individuals that fall into 7 out of the 8 the total user-defined exposure histories created from 30th and 60th percentile values for low and high levels of exposure A, respectively, across 1, 2, 3.  #> USER ALERT: Please inspect the distribution of the sample across the following exposure histories and ensure there is sufficient spread to avoid extrapolation and low precision:  #> Warning: USER ALERT: There are no individuals in your sample that fall into h-l-l exposure history/histories. You may wish to consider different high/low cutoffs (for continuous exposures), alternative epochs, or choose a different measure to avoid extrapolation. #>  #>  #> Table: Summary of user-specified exposure A histories based on exposure main effects 1, 2, 3 containing time points 1, 2, 3: #>  #> |history |  n| #> |:-------|--:| #> |h-h-h   |  2| #> |h-h-l   |  2| #> |h-l-h   |  3| #> |l-h-h   |  3| #> |l-h-l   |  3| #> |l-l-h   |  3| #> |l-l-l   |  1| #>  h <- eval_hist(data = test,                exposure = \"A\",                time_pts = c(1, 2, 3),                hi_lo_cut = c(0.6, 0.3),                ref = \"l-l-l\",                comps = \"h-h-h\") #> Summary of Exposure Main Effects:  #>  #> USER ALERT: Out of the total of 50 individuals in the sample, below is the distribution of the 3 (6%) individuals that fall into 2 out of the 2 the total user-defined exposure histories created from 30th and 60th percentile values for low and high levels of exposure A, respectively, across 1, 2, 3.  #> USER ALERT: Please inspect the distribution of the sample across the following exposure histories and ensure there is sufficient spread to avoid extrapolation and low precision:  #>  #> Table: Summary of user-specified exposure A histories based on exposure main effects 1, 2, 3 containing time points 1, 2, 3: #>  #> |history |  n| #> |:-------|--:| #> |h-h-h   |  2| #> |l-l-l   |  1| #>"},{"path":"https://istallworthy.github.io/devMSMs/reference/fitModel.html","id":null,"dir":"Reference","previous_headings":"","what":"Fit outcome model — fitModel","title":"Fit outcome model — fitModel","text":"Fits weighted marginal outcome model generalized linear model user's choosing, relating exposure main effects outcome using IPTW weights.","code":""},{"path":"https://istallworthy.github.io/devMSMs/reference/fitModel.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Fit outcome model — fitModel","text":"","code":"fitModel(   data,   weights,   exposure,   exposure_time_pts,   outcome,   model,   family = NULL,   link = NA,   int_order = NA,   covariates = NULL,   epochs = NULL,   home_dir = NULL,   verbose = TRUE,   save.out = TRUE )"},{"path":"https://istallworthy.github.io/devMSMs/reference/fitModel.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Fit outcome model — fitModel","text":"data data wide format : data frame, list imputed data frames, mids object weights list IPTW weights output createWeights() exposure name exposure variable exposure_time_pts list integers weights created/assessed correspond time points exposure measured outcome name outcome variable \".timepoint\" suffix model character indicating one following outcome models: \"m0\" (exposure main effects) \"m1\" (exposure main effects & covariates) \"m2\" (exposure main effects & interactions) \"m3\" (exposure main effects, interactions, & covariates) family (optional) family function specification svyglm model link (optional) character link function specification svyglm model int_order integer specification highest order exposure main effects interaction, required interaction models (\"m2\", \"m3\") covariates list characters reflecting variable names covariates, required covariate models (\"m1\", \"m3\") epochs (optional) data frame exposure epoch labels values home_dir path home directory (required 'save.' = TRUE) verbose (optional) TRUE FALSE indicator user output (default TRUE) save.(optional) TRUE FALSE indicator save output intermediary output locally (default TRUE)","code":""},{"path":"https://istallworthy.github.io/devMSMs/reference/fitModel.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Fit outcome model — fitModel","text":"list svyglm model output","code":""},{"path":[]},{"path":"https://istallworthy.github.io/devMSMs/reference/fitModel.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Fit outcome model — fitModel","text":"","code":"f <- createFormulas(exposure = \"A\",                     exposure_time_pts = c(1, 2, 3),                     outcome = \"D.3\",                     tv_confounders = c(\"A.1\", \"A.2\", \"A.3\", \"B.1\", \"B.2\", \"B.3\"),                     ti_confounders = \"C\",                     type = \"full\",                     save.out = FALSE) #> USER ALERT: Please manually inspect the full balancing formula below: #> The full formula for A - D.3 at A time point 1 is:  #> A.1 ~ C #> <environment: 0x55c51be07bd0> #>  #> USER ALERT: Please manually inspect the full balancing formula below: #> The full formula for A - D.3 at A time point 2 is:  #> A.2 ~ A.1 + B.1 + C #> <environment: 0x55c51be07bd0> #>  #> USER ALERT: Please manually inspect the full balancing formula below: #> The full formula for A - D.3 at A time point 3 is:  #> A.3 ~ A.1 + A.2 + B.1 + B.2 + C #> <environment: 0x55c51be07bd0> #>   test <- data.frame(ID = 1:50,                    A.1 = rnorm(n = 50),                    A.2 = rnorm(n = 50),                    A.3 = rnorm(n = 50),                    B.1 = rnorm(n = 50),                    B.2 = rnorm(n = 50),                    B.3 = rnorm(n = 50),                    C = rnorm(n = 50),                    D.3 = rnorm(n = 50)) test[, c(\"A.1\", \"A.2\", \"A.3\")] <- lapply(test[, c(\"A.1\", \"A.2\", \"A.3\")], as.numeric)  w <- createWeights(data = test,                    exposure = \"A\",                    outcome = \"D.3\",                    formulas = f,                    save.out = FALSE) #> For the cbps weighting method, the median weight value is 0.9 (SD = 1.61; range = 0.26-12).  #>    m <- fitModel(data = test,               weights = w,               exposure = \"A\",               exposure_time_pts = c(1, 2, 3),               outcome = \"D.3\",               model = \"m0\",               save.out = FALSE) #> Please inspect the following likelihood ratio test to determine if the exposures collective predict significant variation in the outcome compared to a model without exposure terms. #>  #> We strongly suggest not conducting history comparisons if the likelihood ratio test is non-significant. #>  #> Working (Rao-Scott+F) LRT for A.1 A.2 A.3 #>  in svyglm(formula = as.formula(f), design = s, family = fam) #> Working 2logLR =  7.193819 p= 0.082918  #> (scale factors:  1.5 0.88 0.59 );  denominator df= 46 #>  #> The marginal model, m0, is summarized below: m <- fitModel(data = test,               weights = w,               exposure = \"A\",               exposure_time_pts = c(1, 2, 3),               outcome = \"D.3\",               model = \"m0\",               family = gaussian,               link = \"identity\",               epochs = data.frame(epochs = c(\"Infancy\", \"Toddlerhood\"),                                   values = I(list(c(1, 2), c(3)))),               save.out = FALSE) #> Please inspect the following likelihood ratio test to determine if the exposures collective predict significant variation in the outcome compared to a model without exposure terms. #>  #> We strongly suggest not conducting history comparisons if the likelihood ratio test is non-significant. #>  #> Working (Rao-Scott+F) LRT for A.Infancy A.Toddlerhood #>  in svyglm(formula = as.formula(f), design = s, family = fam) #> Working 2logLR =  5.632304 p= 0.070911  #> (scale factors:  1 0.96 );  denominator df= 47 #>  #> The marginal model, m0, is summarized below: m <- fitModel(data = test,               weights = w,               exposure = \"A\",               exposure_time_pts = c(1, 2, 3),               outcome = \"D.3\",               model = \"m1\",               covariates = \"C\",               save.out = FALSE) #> Please inspect the following likelihood ratio test to determine if the exposures collective predict significant variation in the outcome compared to a model without exposure terms. #>  #> We strongly suggest not conducting history comparisons if the likelihood ratio test is non-significant. #>  #> Working (Rao-Scott+F) LRT for A.1 A.2 A.3 #>  in svyglm(formula = as.formula(f), design = s, family = fam) #> Working 2logLR =  6.479077 p= 0.10633  #> (scale factors:  1.4 0.95 0.62 );  denominator df= 45 #>  #> The marginal model, m1, is summarized below: m <- fitModel(data = test,               weights = w,               exposure = \"A\",               exposure_time_pts = c(1, 2, 3),               outcome = \"D.3\",               model = \"m2\",               int_order = 3,               save.out = FALSE) #> Please inspect the following likelihood ratio test to determine if the exposures collective predict significant variation in the outcome compared to a model without exposure terms. #>  #> We strongly suggest not conducting history comparisons if the likelihood ratio test is non-significant. #>  #> Working (Rao-Scott+F) LRT for A.1 A.2 A.3 A.1:A.2 A.1:A.3 A.2:A.3 A.1:A.2:A.3 #>  in svyglm(formula = as.formula(f), design = s, family = fam) #> Working 2logLR =  14.11331 p= 0.098241  #> (scale factors:  2.7 1.6 0.91 0.7 0.5 0.35 0.17 );  denominator df= 42 #>  #> The marginal model, m2, is summarized below: m <- fitModel(data = test,               weights = w,               exposure = \"A\",               exposure_time_pts = c(1, 2, 3),               outcome = \"D.3\",               model = \"m3\",               int_order = 3,               covariates = \"C\",               save.out = FALSE) #> Please inspect the following likelihood ratio test to determine if the exposures collective predict significant variation in the outcome compared to a model without exposure terms. #>  #> We strongly suggest not conducting history comparisons if the likelihood ratio test is non-significant. #>  #> Working (Rao-Scott+F) LRT for A.1 A.2 A.3 A.1:A.2 A.1:A.3 A.2:A.3 A.1:A.2:A.3 #>  in svyglm(formula = as.formula(f), design = s, family = fam) #> Working 2logLR =  16.64468 p= 0.058473  #> (scale factors:  2.8 1.1 1 0.83 0.57 0.45 0.26 );  denominator df= 41 #>  #> The marginal model, m3, is summarized below:"},{"path":"https://istallworthy.github.io/devMSMs/reference/getModel.html","id":null,"dir":"Reference","previous_headings":"","what":"Fits outcome model — getModel","title":"Fits outcome model — getModel","text":"Fits outcome model","code":""},{"path":"https://istallworthy.github.io/devMSMs/reference/getModel.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Fits outcome model — getModel","text":"","code":"getModel(   d,   exposure,   exposure_time_pts,   outcome,   exp_epochs,   int_order,   model,   fam,   covariates,   verbose,   epochs = NULL )"},{"path":"https://istallworthy.github.io/devMSMs/reference/getModel.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Fits outcome model — getModel","text":"d wide data frame exposure name exposure variable exposure_time_pts list integers weights created/assessed correspond time points exposure measured outcome name outcome variable \".timepoint\" suffix exp_epochs list exposure epochs int_order integer specification highest order exposure main effects interaction interaction models model character indicating one following outcome models: \"m0\" (exposure main effects) \"m1\" (exposure main effects & covariates) \"m2\" (exposure main effects & interactions) \"m3\" (exposure main effects, interactions, & covariates) \"covs\" (covariate model) \"int\" (intercept model) fam function specification svyglm model covariates list characters reflecting variable names covariates covariate models verbose TRUE FALSE indicator user output (default TRUE) epochs data frame exposure epoch labels values","code":""},{"path":"https://istallworthy.github.io/devMSMs/reference/getModel.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Fits outcome model — getModel","text":"list fitted model(s)","code":""},{"path":"https://istallworthy.github.io/devMSMs/reference/getModel.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Fits outcome model — getModel","text":"","code":"test <- data.frame(ID = 1:50,                    A.1 = rnorm(n = 50),                    A.2 = rnorm(n = 50),                    A.3 = rnorm(n = 50),                    B.1 = rnorm(n = 50),                    B.2 = rnorm(n = 50),                    B.3 = rnorm(n = 50),                    C = rnorm(n = 50),                    D.3 = rnorm(n = 50)) test[, c(\"A.1\", \"A.2\", \"A.3\")] <- lapply(test[, c(\"A.1\", \"A.2\", \"A.3\")], as.numeric)  f <- createFormulas(exposure = \"A\",                     exposure_time_pts = c(1, 2, 3),                     outcome = \"D.3\",                     tv_confounders = c(\"A.1\", \"A.2\", \"A.3\", \"B.1\", \"B.2\", \"B.3\"),                     ti_confounders = \"C\",                     type = \"full\",                     save.out = FALSE) #> USER ALERT: Please manually inspect the full balancing formula below: #> The full formula for A - D.3 at A time point 1 is:  #> A.1 ~ C #> <environment: 0x55c513c0fcc8> #>  #> USER ALERT: Please manually inspect the full balancing formula below: #> The full formula for A - D.3 at A time point 2 is:  #> A.2 ~ A.1 + B.1 + C #> <environment: 0x55c513c0fcc8> #>  #> USER ALERT: Please manually inspect the full balancing formula below: #> The full formula for A - D.3 at A time point 3 is:  #> A.3 ~ A.1 + A.2 + B.1 + B.2 + C #> <environment: 0x55c513c0fcc8> #>   w <- createWeights(data = test,                    exposure = \"A\",                    outcome = \"D.3\",                    formulas = f,                    save.out = FALSE) #> For the cbps weighting method, the median weight value is 0.97 (SD = 0.42; range = 0.29-2).  #>    epochs = data.frame(epochs = c(\"Infancy\", \"Toddlerhood\"),                     values = I(list(c(1, 2), c(3)))) e <- apply(expand.grid(\"A\", as.character(epochs[, 1])), 1,            paste, sep = \"\", collapse = \".\") test$weights <- w[[1]]$weights  g <- getModel(d = test,               exposure = \"A\",               exposure_time_pts = c(1, 2, 3),               outcome = \"D.3\",               epochs = epochs,               exp_epochs = e,               fam = gaussian,               model = \"m0\")"},{"path":"https://istallworthy.github.io/devMSMs/reference/get_comparison_values.html","id":null,"dir":"Reference","previous_headings":"","what":"Finds custom comparison values — get_comparison_values","title":"Finds custom comparison values — get_comparison_values","text":"Finds custom comparison values","code":""},{"path":"https://istallworthy.github.io/devMSMs/reference/get_comparison_values.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Finds custom comparison values — get_comparison_values","text":"","code":"get_comparison_values(d, comp_histories)"},{"path":"https://istallworthy.github.io/devMSMs/reference/get_comparison_values.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Finds custom comparison values — get_comparison_values","text":"d data frame high low values per exposure main effect comp_histories comparison sequence(s) \"h\" /\"l\" (e.g., \"h-h-h\")","code":""},{"path":"https://istallworthy.github.io/devMSMs/reference/get_comparison_values.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Finds custom comparison values — get_comparison_values","text":"comparison values","code":""},{"path":"https://istallworthy.github.io/devMSMs/reference/get_comparison_values.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Finds custom comparison values — get_comparison_values","text":"","code":"d <- data.frame(e = c(\"A.1\", \"A.2\", \"A.3\"),                l = c(0, 0, 0),                h = c(1, 1, 1)) r <- get_comparison_values(d = d,                           comp_histories = \"l-l-l\" ) r <- get_comparison_values(d = d,                           comp_histories = \"h-h-h\" ) r <- get_comparison_values(d = d,                          comp_histories = c(\"h-h-h\", \"h-h-l\"))"},{"path":"https://istallworthy.github.io/devMSMs/reference/get_reference_values.html","id":null,"dir":"Reference","previous_headings":"","what":"Finds custom reference values — get_reference_values","title":"Finds custom reference values — get_reference_values","text":"Finds custom reference values","code":""},{"path":"https://istallworthy.github.io/devMSMs/reference/get_reference_values.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Finds custom reference values — get_reference_values","text":"","code":"get_reference_values(d, reference)"},{"path":"https://istallworthy.github.io/devMSMs/reference/get_reference_values.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Finds custom reference values — get_reference_values","text":"d data frame high low values per exposure main effect reference reference sequence \"h\" /\"l\" (e.g., \"h-h-h\")","code":""},{"path":"https://istallworthy.github.io/devMSMs/reference/get_reference_values.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Finds custom reference values — get_reference_values","text":"reference values","code":""},{"path":"https://istallworthy.github.io/devMSMs/reference/get_reference_values.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Finds custom reference values — get_reference_values","text":"","code":"d <- data.frame(e = c(\"A.1\", \"A.2\", \"A.3\"),                l = c(0, 0, 0),                h = c(1, 1, 1)) r <- get_reference_values(d = d,                           reference = \"l-l-l\" ) r <- get_reference_values(d = d,                           reference = \"h-h-h\" )"},{"path":"https://istallworthy.github.io/devMSMs/reference/make_love_plot.html","id":null,"dir":"Reference","previous_headings":"","what":"Create love plots showing balancing statistics — make_love_plot","title":"Create love plots showing balancing statistics — make_love_plot","text":"Create love plots showing balancing statistics","code":""},{"path":"https://istallworthy.github.io/devMSMs/reference/make_love_plot.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create love plots showing balancing statistics — make_love_plot","text":"","code":"make_love_plot(   balance_stats,   exposure,   exposure_time_pt,   exposure_type,   k = 0,   form_name,   data_type,   balance_thresh,   weights_method,   imp_conf,   save.out = FALSE,   home_dir = NULL,   folder = NULL,   verbose = TRUE )"},{"path":"https://istallworthy.github.io/devMSMs/reference/make_love_plot.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create love plots showing balancing statistics — make_love_plot","text":"balance_stats data frame balance statistics exposure name exposure variable exposure_time_pt exposure time point integer exposure_type character indicating binary continuous exposure type k imputation number form_name formula name data_type single imputed data type balance_thresh one two numbers 0 1 indicating single balancing threshold thresholds less important confounders, respectively weights_method method character string WeightItMSM() balancing method abbreviation imp_conf list variable names reflecting important confounders save.TRUE FALSE indicator save output intermediary output locally home_dir path home directory (required save.= TRUE) folder folder path saving verbose (optional) TRUE FALSE indicator user output (default TRUE)","code":""},{"path":"https://istallworthy.github.io/devMSMs/reference/make_love_plot.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create love plots showing balancing statistics — make_love_plot","text":"none","code":""},{"path":"https://istallworthy.github.io/devMSMs/reference/make_love_plot.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Create love plots showing balancing statistics — make_love_plot","text":"","code":"f <- createFormulas(exposure = \"A\",                     exposure_time_pts = c(1, 2, 3),                     outcome = \"D.3\",                     tv_confounders = c(\"A.1\", \"A.2\", \"A.3\", \"B.1\", \"B.2\", \"B.3\"),                     ti_confounders = \"C\",                     type = \"full\",                     save.out = FALSE) #> USER ALERT: Please manually inspect the full balancing formula below: #> The full formula for A - D.3 at A time point 1 is:  #> A.1 ~ C #> <environment: 0x55c5079d3858> #>  #> USER ALERT: Please manually inspect the full balancing formula below: #> The full formula for A - D.3 at A time point 2 is:  #> A.2 ~ A.1 + B.1 + C #> <environment: 0x55c5079d3858> #>  #> USER ALERT: Please manually inspect the full balancing formula below: #> The full formula for A - D.3 at A time point 3 is:  #> A.3 ~ A.1 + A.2 + B.1 + B.2 + C #> <environment: 0x55c5079d3858> #>   test <- data.frame(ID = 1:50,                    A.1 = rnorm(n = 50),                    A.2 = rnorm(n = 50),                    A.3 = rnorm(n = 50),                    B.1 = rnorm(n = 50),                    B.2 = rnorm(n = 50),                    B.3 = rnorm(n = 50),                    C = rnorm(n = 50),                    D.3 = rnorm(n = 50)) test[, c(\"A.1\", \"A.2\", \"A.3\")] <- lapply(test[, c(\"A.1\", \"A.2\", \"A.3\")], as.numeric)  w <- createWeights(data = test,                    exposure = \"A\",                    outcome = \"D.3\",                    formulas = f,                    save.out = FALSE) #> For the cbps weighting method, the median weight value is 1.06 (SD = 1.27; range = 0.2-7).  #>    b <- assessBalance(data = test,                    exposure = \"A\",                    exposure_time_pts = c(1, 2, 3),                    outcome = \"D.3\",                    type = \"weighted\",                    weights = w,                    formulas = f,                    save.out = FALSE) #> USER ALERT: The following statistics display covariate imbalance at each exposure time point following IPTW weighting, using full formulas. #>     #> No covariates remain imbalanced using cbps and full formulas.  #>  #>  #> USER ALERT: For exposure A using the full formulas and cbps : #> The median absolute value relation between exposure and confounder is 0.04 (range = -0.07 -0.05).  #> There are no imbalanced covariates.  #> There are no imbalanced covariates.  make_love_plot(balance_stats = b,                exposure = \"A\",                exposure_time_pt = 1,                exposure_type = \"continuous\",                form_name = \"form_name\",                data_type = \"single\",                balance_thresh = 0.1,                imp_conf = NULL,                weights_method = w[[1]]$method,                save.out = FALSE,                folder = \"prebalance/\")   make_love_plot(balance_stats = b,                exposure = \"A\",                exposure_time_pt = 2,                exposure_type = \"continuous\",                form_name = \"form_name\",                data_type = \"single\",                balance_thresh = c(0.05, 0.1),                imp_conf = \"A.2\",                weights_method = w[[1]]$method,                save.out = FALSE,                folder = \"weighted/\")"},{"path":"https://istallworthy.github.io/devMSMs/reference/perform_multiple_comparison_correction.html","id":null,"dir":"Reference","previous_headings":"","what":"Conduct multiple comparison correction — perform_multiple_comparison_correction","title":"Conduct multiple comparison correction — perform_multiple_comparison_correction","text":"Conduct multiple comparison correction","code":""},{"path":"https://istallworthy.github.io/devMSMs/reference/perform_multiple_comparison_correction.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Conduct multiple comparison correction — perform_multiple_comparison_correction","text":"","code":"perform_multiple_comparison_correction(   comps,   reference,   comp_histories,   method,   verbose = TRUE )"},{"path":"https://istallworthy.github.io/devMSMs/reference/perform_multiple_comparison_correction.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Conduct multiple comparison correction — perform_multiple_comparison_correction","text":"comps table reference reference sequence \"h\" /\"l\" (e.g., \"h-h-h\") comp_histories comparison sequence(s) \"h\" /\"l\" (e.g., \"h-h-h\") method character abbreviation multiple comparison correction method verbose (optional) TRUE FALSE indicator user output (default TRUE)","code":""},{"path":"https://istallworthy.github.io/devMSMs/reference/perform_multiple_comparison_correction.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Conduct multiple comparison correction — perform_multiple_comparison_correction","text":"comparison table corrected p-values","code":""},{"path":"https://istallworthy.github.io/devMSMs/reference/sim_data_imp_list.rda.html","id":null,"dir":"Reference","previous_headings":"","what":"Wide data imputed and read in (continuous exposure) — sim_data_imp_list.rda","title":"Wide data imputed and read in (continuous exposure) — sim_data_imp_list.rda","text":"data simulated based data Family Life Project (FLP), longitudinal study following 1,292 families representative two geographic areas (three counties North Carolina three counties Pennsylvania) high rural child poverty (Vernon-Feagans et al., 2013; Burchinal et al., 2008). MAR missingness added using missMethods package imputing mice package reading imputed dataset. data contain economic strain (ESEATA1) continuously distributed variable.","code":""},{"path":"https://istallworthy.github.io/devMSMs/reference/sim_data_imp_list.rda.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Wide data imputed and read in (continuous exposure) — sim_data_imp_list.rda","text":"","code":"sim_data_imp_list"},{"path":"https://istallworthy.github.io/devMSMs/reference/sim_data_imp_list.rda.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"Wide data imputed and read in (continuous exposure) — sim_data_imp_list.rda","text":"list data frames","code":""},{"path":"https://istallworthy.github.io/devMSMs/reference/sim_data_long_miss.rda.html","id":null,"dir":"Reference","previous_headings":"","what":"Long data with missingness (continuous exposure) — sim_data_long_miss.rda","title":"Long data with missingness (continuous exposure) — sim_data_long_miss.rda","text":"data simulated based data Family Life Project (FLP), longitudinal study following 1,292 families representative two geographic areas (three counties North Carolina three counties Pennsylvania) high rural child poverty (Vernon-Feagans et al., 2013; Burchinal et al., 2008). MAR missingness added using missMethods package. data contain economic strain (ESEATA1) continuously distributed variable.","code":""},{"path":"https://istallworthy.github.io/devMSMs/reference/sim_data_long_miss.rda.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Long data with missingness (continuous exposure) — sim_data_long_miss.rda","text":"","code":"sim_data_long_miss"},{"path":"https://istallworthy.github.io/devMSMs/reference/sim_data_long_miss.rda.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"Long data with missingness (continuous exposure) — sim_data_long_miss.rda","text":"data frame","code":""},{"path":"https://istallworthy.github.io/devMSMs/reference/sim_data_long_miss_bin.rda.html","id":null,"dir":"Reference","previous_headings":"","what":"Long data with missingness (binary exposure) — sim_data_long_miss_bin.rda","title":"Long data with missingness (binary exposure) — sim_data_long_miss_bin.rda","text":"data simulated based data Family Life Project (FLP), longitudinal study following 1,292 families representative two geographic areas (three counties North Carolina three counties Pennsylvania) high rural child poverty (Vernon-Feagans et al., 2013; Burchinal et al., 2008). MAR missingness added using missMethods package. data contain economic strain (ESEATA1) binary variable.","code":""},{"path":"https://istallworthy.github.io/devMSMs/reference/sim_data_long_miss_bin.rda.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Long data with missingness (binary exposure) — sim_data_long_miss_bin.rda","text":"","code":"sim_data_long_miss_bin"},{"path":"https://istallworthy.github.io/devMSMs/reference/sim_data_long_miss_bin.rda.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"Long data with missingness (binary exposure) — sim_data_long_miss_bin.rda","text":"data frame","code":""},{"path":"https://istallworthy.github.io/devMSMs/reference/sim_data_mice.rda.html","id":null,"dir":"Reference","previous_headings":"","what":"Wide data imputed with mice (continuous exposure) — sim_data_mice.rda","title":"Wide data imputed with mice (continuous exposure) — sim_data_mice.rda","text":"data simulated based data Family Life Project (FLP), longitudinal study following 1,292 families representative two geographic areas (three counties North Carolina three counties Pennsylvania) high rural child poverty (Vernon-Feagans et al., 2013; Burchinal et al., 2008). MAR missingness added using missMethods package imputing mice package. data contain economic strain (ESEATA1) continuously distributed variable.","code":""},{"path":"https://istallworthy.github.io/devMSMs/reference/sim_data_mice.rda.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Wide data imputed with mice (continuous exposure) — sim_data_mice.rda","text":"","code":"sim_data_mice"},{"path":"https://istallworthy.github.io/devMSMs/reference/sim_data_mice.rda.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"Wide data imputed with mice (continuous exposure) — sim_data_mice.rda","text":"mice object","code":""},{"path":"https://istallworthy.github.io/devMSMs/reference/sim_data_wide.rda.html","id":null,"dir":"Reference","previous_headings":"","what":"Wide complete data (continuous exposure)\nThese data are simulated based on data from the Family Life Project (FLP), a longitudinal study following 1,292 families\nrepresentative of two geographic areas (three counties in North Carolina and three counties in Pennsylvania) with high rural\nchild poverty (Vernon-Feagans et al., 2013; Burchinal et al., 2008). These data contain economic strain (ESEATA1) as a continuously\ndistributed variable. — sim_data_wide.rda","title":"Wide complete data (continuous exposure)\nThese data are simulated based on data from the Family Life Project (FLP), a longitudinal study following 1,292 families\nrepresentative of two geographic areas (three counties in North Carolina and three counties in Pennsylvania) with high rural\nchild poverty (Vernon-Feagans et al., 2013; Burchinal et al., 2008). These data contain economic strain (ESEATA1) as a continuously\ndistributed variable. — sim_data_wide.rda","text":"Wide complete data (continuous exposure) data simulated based data Family Life Project (FLP), longitudinal study following 1,292 families representative two geographic areas (three counties North Carolina three counties Pennsylvania) high rural child poverty (Vernon-Feagans et al., 2013; Burchinal et al., 2008). data contain economic strain (ESEATA1) continuously distributed variable.","code":""},{"path":"https://istallworthy.github.io/devMSMs/reference/sim_data_wide.rda.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Wide complete data (continuous exposure)\nThese data are simulated based on data from the Family Life Project (FLP), a longitudinal study following 1,292 families\nrepresentative of two geographic areas (three counties in North Carolina and three counties in Pennsylvania) with high rural\nchild poverty (Vernon-Feagans et al., 2013; Burchinal et al., 2008). These data contain economic strain (ESEATA1) as a continuously\ndistributed variable. — sim_data_wide.rda","text":"","code":"sim_data_wide"},{"path":"https://istallworthy.github.io/devMSMs/reference/sim_data_wide.rda.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"Wide complete data (continuous exposure)\nThese data are simulated based on data from the Family Life Project (FLP), a longitudinal study following 1,292 families\nrepresentative of two geographic areas (three counties in North Carolina and three counties in Pennsylvania) with high rural\nchild poverty (Vernon-Feagans et al., 2013; Burchinal et al., 2008). These data contain economic strain (ESEATA1) as a continuously\ndistributed variable. — sim_data_wide.rda","text":"wide data frame 1,292 observations 36 measured variables. \"ID\" person identifier \"WAVE\" age (months) data collected \"ESETA1\" continuous exposure economic strain \"StrDif_Tot.58\" continuous outcome behavioral problems \"InRatioCor\" income--needs ratio \"PmEd2\" parent's education level \"state\" family's state residence \"TcBlac2\" family's race (1 = Black?, 0 = White?) \"bioDadInHH2\" whether biological father lives family (insert coding) \"HomeOwnd\" indicator whether family owns home (insert coding) \"KFASTScr\" \"PmBlac2\" primary careigver race (insert coding) \"PmAge2\" \"PmMrSt2\" \"RMomAgeU\" \"RHealth\" \"RHasSO\" \"SmokTotl\" \"caregiv_health\" \"peri_health\" \"SWghtLB\" \"SurpPreg\" \"DrnkFreq\" \"gov_assist\" \"ALI_LE\" \"B18Raw\" \"CORTB\" \"EARS_TJo\" \"fscore\" \"HOMEETA1\" \"IBRAttn\" \"LESMnNeg\" \"LESMnPos\" \"MDI\" \"RHAsSO\" \"SAAmylase\" \"WndNbrhood\"","code":""},{"path":"https://istallworthy.github.io/devMSMs/reference/sim_data_wide.rda.html","id":"references","dir":"Reference","previous_headings":"","what":"References","title":"Wide complete data (continuous exposure)\nThese data are simulated based on data from the Family Life Project (FLP), a longitudinal study following 1,292 families\nrepresentative of two geographic areas (three counties in North Carolina and three counties in Pennsylvania) with high rural\nchild poverty (Vernon-Feagans et al., 2013; Burchinal et al., 2008). These data contain economic strain (ESEATA1) as a continuously\ndistributed variable. — sim_data_wide.rda","text":"DeJoseph, M. L., Sifre, R. D., Raver, C. C., Blair, C. B., & Berry, D. (2021). Capturing Environmental Dimensions Adversity Resources Context Poverty Across Infancy Early Adolescence: Moderated Nonlinear Factor Model. Child Development, n/(n/). https://doi.org/10.1111/cdev.13504 Burchinal, M., Howes, C., Pianta, R., Bryant, D., Early, D., Clifford, R., & Barbarin, O. (2008). Predicting Child Outcomes End Kindergarten Quality Pre-Kindergarten Teacher–Child Interactions Instruction. Applied Developmental Science, 12(3), 140–153. https://doi.org/10.1080/10888690802199418 Vernon-Feagans, L., Cox, M., Willoughby, M., Burchinal, M., Garrett-Peters, P., Mills-Koonce, R., Garrett-Peiers, P., Conger, R. D., & Bauer, P. J. (2013). Family Life Project: Epidemiological Developmental Study Young Children Living Poor Rural Communities. Monographs Society Research Child Development, 78(5), –150.","code":""},{"path":"https://istallworthy.github.io/devMSMs/reference/sim_data_wide_bin.rda.html","id":null,"dir":"Reference","previous_headings":"","what":"Wide complete data (binary exposure)\nThese data are simulated based on data from the Family Life Project (FLP), a longitudinal study following 1,292 families\nrepresentative of two geographic areas (three counties in North Carolina and three counties in Pennsylvania) with high rural\nchild poverty (Vernon-Feagans et al., 2013; Burchinal et al., 2008). These data contain economic strain (ESEATA1) as a binary variable. — sim_data_wide_bin.rda","title":"Wide complete data (binary exposure)\nThese data are simulated based on data from the Family Life Project (FLP), a longitudinal study following 1,292 families\nrepresentative of two geographic areas (three counties in North Carolina and three counties in Pennsylvania) with high rural\nchild poverty (Vernon-Feagans et al., 2013; Burchinal et al., 2008). These data contain economic strain (ESEATA1) as a binary variable. — sim_data_wide_bin.rda","text":"Wide complete data (binary exposure) data simulated based data Family Life Project (FLP), longitudinal study following 1,292 families representative two geographic areas (three counties North Carolina three counties Pennsylvania) high rural child poverty (Vernon-Feagans et al., 2013; Burchinal et al., 2008). data contain economic strain (ESEATA1) binary variable.","code":""},{"path":"https://istallworthy.github.io/devMSMs/reference/sim_data_wide_bin.rda.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Wide complete data (binary exposure)\nThese data are simulated based on data from the Family Life Project (FLP), a longitudinal study following 1,292 families\nrepresentative of two geographic areas (three counties in North Carolina and three counties in Pennsylvania) with high rural\nchild poverty (Vernon-Feagans et al., 2013; Burchinal et al., 2008). These data contain economic strain (ESEATA1) as a binary variable. — sim_data_wide_bin.rda","text":"","code":"sim_data_wide_bin"},{"path":"https://istallworthy.github.io/devMSMs/reference/sim_data_wide_bin.rda.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"Wide complete data (binary exposure)\nThese data are simulated based on data from the Family Life Project (FLP), a longitudinal study following 1,292 families\nrepresentative of two geographic areas (three counties in North Carolina and three counties in Pennsylvania) with high rural\nchild poverty (Vernon-Feagans et al., 2013; Burchinal et al., 2008). These data contain economic strain (ESEATA1) as a binary variable. — sim_data_wide_bin.rda","text":"data frame","code":""},{"path":"https://istallworthy.github.io/devMSMs/reference/sim_data_wide_miss.rda.html","id":null,"dir":"Reference","previous_headings":"","what":"Wide data with missingness (continuous exposure) — sim_data_wide_miss.rda","title":"Wide data with missingness (continuous exposure) — sim_data_wide_miss.rda","text":"data simulated based data Family Life Project (FLP), longitudinal study following 1,292 families representative two geographic areas (three counties North Carolina three counties Pennsylvania) high rural child poverty (Vernon-Feagans et al., 2013; Burchinal et al., 2008). MAR missingness added using missMethods package. data contain economic strain (ESEATA1) continuously distributed variable.","code":""},{"path":"https://istallworthy.github.io/devMSMs/reference/sim_data_wide_miss.rda.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Wide data with missingness (continuous exposure) — sim_data_wide_miss.rda","text":"","code":"sim_data_wide_miss"},{"path":"https://istallworthy.github.io/devMSMs/reference/sim_data_wide_miss.rda.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"Wide data with missingness (continuous exposure) — sim_data_wide_miss.rda","text":"data frame","code":""},{"path":"https://istallworthy.github.io/devMSMs/reference/sim_data_wide_miss_bin.rda.html","id":null,"dir":"Reference","previous_headings":"","what":"Wide data with missingness (binary exposure) — sim_data_wide_miss_bin.rda","title":"Wide data with missingness (binary exposure) — sim_data_wide_miss_bin.rda","text":"data simulated based data Family Life Project (FLP), longitudinal study following 1,292 families representative two geographic areas (three counties North Carolina three counties Pennsylvania) high rural child poverty (Vernon-Feagans et al., 2013; Burchinal et al., 2008). MAR missingness added using missMethods package. data contain economic strain (ESEATA1) binary variable.","code":""},{"path":"https://istallworthy.github.io/devMSMs/reference/sim_data_wide_miss_bin.rda.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Wide data with missingness (binary exposure) — sim_data_wide_miss_bin.rda","text":"","code":"sim_data_wide_miss_bin"},{"path":"https://istallworthy.github.io/devMSMs/reference/sim_data_wide_miss_bin.rda.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"Wide data with missingness (binary exposure) — sim_data_wide_miss_bin.rda","text":"data frame","code":""},{"path":"https://istallworthy.github.io/devMSMs/reference/trimWeights.html","id":null,"dir":"Reference","previous_headings":"","what":"Trim IPTW balancing weights — trimWeights","title":"Trim IPTW balancing weights — trimWeights","text":"Trims IPTW balancing weights heavy right tails populating weight values given quantile weight value quantile.","code":""},{"path":"https://istallworthy.github.io/devMSMs/reference/trimWeights.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Trim IPTW balancing weights — trimWeights","text":"","code":"trimWeights(   exposure,   outcome,   weights,   quantile = NA,   home_dir = NULL,   verbose = TRUE,   save.out = TRUE )"},{"path":"https://istallworthy.github.io/devMSMs/reference/trimWeights.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Trim IPTW balancing weights — trimWeights","text":"exposure name exposure variable outcome name outcome variable \".timepoint\" suffix weights list IPTW weights output createWeights() quantile (optional) numeric value 0 1 quantile value trim weights (default 0.95) home_dir path home directory (required save.= TRUE) verbose (optional) TRUE FALSE indicator user output (default TRUE) save.(optional) TRUE FALSE indicator save output intermediary output locally (default TRUE)","code":""},{"path":"https://istallworthy.github.io/devMSMs/reference/trimWeights.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Trim IPTW balancing weights — trimWeights","text":"list model output trimmed weights","code":""},{"path":[]},{"path":"https://istallworthy.github.io/devMSMs/reference/trimWeights.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Trim IPTW balancing weights — trimWeights","text":"","code":"f <- createFormulas(exposure = \"A\",                     exposure_time_pts = c(1, 2, 3),                     outcome = \"D.3\",                     tv_confounders = c(\"A.1\", \"A.2\", \"A.3\", \"B.1\", \"B.2\", \"B.3\"),                     ti_confounders = \"C\",                     type = \"full\",                     save.out = FALSE) #> USER ALERT: Please manually inspect the full balancing formula below: #> The full formula for A - D.3 at A time point 1 is:  #> A.1 ~ C #> <environment: 0x55c51c067800> #>  #> USER ALERT: Please manually inspect the full balancing formula below: #> The full formula for A - D.3 at A time point 2 is:  #> A.2 ~ A.1 + B.1 + C #> <environment: 0x55c51c067800> #>  #> USER ALERT: Please manually inspect the full balancing formula below: #> The full formula for A - D.3 at A time point 3 is:  #> A.3 ~ A.1 + A.2 + B.1 + B.2 + C #> <environment: 0x55c51c067800> #>   test <- data.frame(ID = 1:50,                    A.1 = rnorm(n = 50),                    A.2 = rnorm(n = 50),                    A.3 = rnorm(n = 50),                    B.1 = rnorm(n = 50),                    B.2 = rnorm(n = 50),                    B.3 = rnorm(n = 50),                    C = rnorm(n = 50),                    D.3 = rnorm(n = 50))  w <- createWeights(data = test,                    exposure = \"A\",                    outcome = \"D.3\",                    formulas = f,                    save.out = FALSE) #> For the cbps weighting method, the median weight value is 1.02 (SD = 0.72; range = 0.44-4).  #>    t <- trimWeights(exposure = \"A\",                  outcome = \"D.3\",                  weights = w,                  save.out = FALSE) #> Trimming weights to 95%. #>  #> For the A-D.3 relation, following trimming at the 0.95 quantile, the median weight value is 1.02 (SD= 0.59; range= 0.44-2).  #>   t <- trimWeights(exposure = \"A\",                  outcome = \"D.3\",                  weights = w,                  quantile = 0.75,                  save.out = FALSE) #> Trimming weights to 75%. #>  #> For the A-D.3 relation, following trimming at the 0.75 quantile, the median weight value is 1.02 (SD= 0.38; range= 0.44-2).  #>"}]
